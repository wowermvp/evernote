<html>
<head>
  <title>KeepAlived双主模式高可用集群</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1239"/>
<h1>KeepAlived双主模式高可用集群</h1>

<div>
<span><div style="margin: 0px; padding: 20px 15px 15px; position: relative; font-size: 16px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><h2 style="margin: 0px 0px 14px; padding: 0px 0px 10px; font-size: 24px; border-bottom: 1px solid rgb(231, 231, 235);"><span style="color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant: normal; font-weight: 400;">KeepAlived双主模式高可用集群</span></h2><div style="margin: 0px 0px 18px; padding: 0px; font-size: 0px;"><div><br/></div></div><div style="margin: 0px; padding: 0px; overflow: hidden; position: relative; min-height: 350px;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">一、keepalived简介</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">keepalived是vrrp协议的实现，原生设计目的是为了高可用ipvs服务，keepalived能够配置文件中的定义生成ipvs规则，并能够对各RS的健康状态进行检测；通过共用的虚拟IP地址对外提供服务；每个热备组内同一时刻只有一台主服务器提供服务，其他服务器处于冗余状态，若当前在线的服务器宕机，其虚拟IP地址将会被其他服务器接替（优先级决定接替顺序），实现高可用为后端主机提供服务。</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">二、keepalived组件</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">Keepalived组件介绍</span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word;">core</span><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">:keepalived核心组件，主进程的启动和维护，全局配置等。</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word;">vrrp stack</span><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">:keepalived是基于vrrp协议实现高可用vps服务，vrrp则为相关子进程为其提供服务</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word;">check</span><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">:检测keepalived的健康状态相关进程 </span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word;">system call</span><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">:系统调用</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word;">watch dog</span><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">:监控check和vrrp进程的看管者，check负责检测器子进程的健康状态，当其检测到master上的服务不可用时则通告vrrp将其转移至backup服务器上。</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">三、keepalived配置 </span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">实验拓扑图如下：</span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">keepalived主配置文件主要分为三段：global_defs、vrrp_instance、virtual_ip address,如下详解： </span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word;">示例：</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">编辑/etc/keepalived/keepalived.conf配置文件，将此文件负责给另一个台keepalived服务器，相应的修改其优先级及其state状态信息</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image [2].jpg" type="image/jpeg" data-filename="Image.jpg" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image [3].jpg" type="image/jpeg" data-filename="Image.jpg" style="margin: 0px; padding: 0px; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">使用lvs-dr相同的方法配置Real Server1/Real Server2:</span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image.png" type="image/png" data-filename="Image.png" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">分别给Real Server提供测试页面及其给keepalived节点配置应急响应页面  </span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image [1].png" type="image/png" data-filename="Image.png" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">配置成功后启动keepalived及其后端主机，在keepalived节点上查看其相应的ipvs信息：</span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image [4].jpg" type="image/jpeg" data-filename="Image.jpg" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">现在两节点上的keepalived均已启动</span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image [5].jpg" type="image/jpeg" data-filename="Image.jpg" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image [6].jpg" type="image/jpeg" data-filename="Image.jpg" style="margin: 0px; padding: 0px; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">模拟master节点故障查看其backup节点，则全部的虚拟IP地址转换到backup节，实现地址漂移如下：</span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image [7].jpg" type="image/jpeg" data-filename="Image.jpg" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">本文采用rr算法调度测试结果图：</span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image [8].jpg" type="image/jpeg" data-filename="Image.jpg" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">模拟后端Real Server一台和全部宕机，相应的响应页面及应急页面：</span></div><div><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;"><img src="KeepAlived双主模式高可用集群_files/Image [9].jpg" type="image/jpeg" data-filename="Image.jpg" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; vertical-align: middle; height: auto !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important;"/></span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal;">出现上诉的结果说明你配置的keepalived高可用集群已经实现高可用，可换为浏览器进行测试，或将后端主机搭建相应的服务进行测试查看其是否按照你定义的调度算法进行轮询。</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"/></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; white-space: pre-wrap; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; font-size: 12px; word-wrap: break-word !important; color: rgb(121, 119, 119); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal;">作者：小耳朵</span></div><div style="margin: 0px; padding: 0px; box-sizing: border-box; clear: both; min-height: 1em;"><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 12px; color: rgb(121, 119, 119); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal;">来源：http://purify.blog.51cto.com/10572011/1867346</span></div></div></div></div><div style="margin: 0px; padding: 0px 15px; font-size: 16px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div style="margin: 0px; padding: 0px; position: relative;"><div style="margin: 20px 0px; padding: 0px; text-align: right; min-height: 24px;"><div><a href="https://mp.weixin.qq.com/s?__biz=MzA3OTgyMDcwNg==&amp;mid=2650626864&amp;idx=1&amp;sn=ad49e110f67e89d93688e1c2f642550c&amp;chksm=87a459fdb0d3d0eb75d891d2f566492eb8a4a027c819e07f6c19840772ba1a43a8dd260ebc8d&amp;scene=4&amp;key=564c3e9811aee0ab731d3f92b6e3ad8350c5c1e6bc63743bbae012f7bc4d440583406cf2005e6c458df1cefe061e27ac7e4c381ba7406809fa1fcb80348baa9c3cd08be2dd440a849528745ebd587a84&amp;ascene=7&amp;uin=MTkyNjAwOTYyMA%3D%3D&amp;devicetype=Windows+10&amp;version=6202002e&amp;pass_ticket=jQbXJGErsxJ0o4wsKJW5IWN5Nmzs0XSyWH%2BrMyWS6B1pgDtJ7ducFSoydzDMilJH#comment" style="margin: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; color: rgb(67, 149, 245); text-decoration: none;">写留言<img src="KeepAlived双主模式高可用集群_files/Image [2].png" type="image/png" data-filename="Image.png" style="margin: -3px 0px 0px 3px; padding: 0px; height: auto !important; vertical-align: middle; width: 12px;"/></a></div></div></div></div></span>
</div></body></html> 