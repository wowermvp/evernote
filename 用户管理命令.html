<html>
<head>
  <title>用户管理命令</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1826"/>
<h1>用户管理命令</h1>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div>一、用户相关文件</div><div>1、/etc/passwd                    <i>#用户信息文件</i></div><div>root:x:0:0:root:/root:/bin/bash</div><div>第一列：用户名</div><div>第二列：密码位</div><div>第三列：用户ID</div><div>     0          超级用户ID。如果用户ID为0，代表这个账号是管理员账号。Linux中将普通用户更改为超级用记只需将UID改为0即可。</div><div>     1-499  系统用户（伪用户）UID。这些UID账号是系统保留给系统用户的UID，也就是说UID是1-499范围内的用户是不能登录系统的，而是用来运行系统和服务的。基中1-99是系统保留的账号，系统自动创建。100-499是预留给用户创建系统账号的。</div><div>     500-65535     普通用户UID。建立的普通用户UID从500开始，最大到65535。2.6.x内核以后的Linux系统用户UID已经可以支持2^32个。   </div><div>第四列：组ID。GID添加用户时，如果不指定用户所属的初始组，那么会建立和用户名相同的组。</div><div>第五列：用户说明</div><div>第六列：用户家目录</div><div>第七列：登录shell     /bin/bash</div><div><br/></div><div>2、/etc/shadow </div>
root:$6$ilyGzeNA4oAMTTL2$RqQIv2DknQeLHhKe4esvS9gpY7XtFheQJvp2VH00psTVdSgvJCAXSm2guv1XGo.jNjWBQId8Gf8E1UBGo97oL/:16495:0:99999:7:::      
<div>第一列：用户名</div><div>第二列：加密密码</div><div>     在密码前加入“！”或“*”改变加密值让密码暂时失效，使这个用户无法登录，达到暂时禁止用户登录的效果</div><div>     注意所有伪用户的密码都是“！！”或“*”，代表没有密码是不能登录的。当然我新创建的用户如果不设定密码，它的密码项也是“！！”，代表这个用户没有密码，不能登录。</div><div>第三列：密码最近修改时间，1970年1月1日作为标准时间</div><div>     时间戳转日期</div><div>     <font color="#FF0000">date -d &quot;1970-01-01     15775 days&quot;</font></div><div>     日期转时间戳</div><div>     <font color="#FF0000">echo $(($(date --date=&quot;2013/01/11&quot; +%s)/86400+1))</font></div><div>第四列：两次密码的修改间隔时间（和第3字段相比）</div><div>第五列：密码有效期（和第3字段相比）</div><div>第六列：密码修改到期前的警告天数（和第5字段相比）</div><div>第七列：密码过期后的宽限天数（和第5字段相比）</div><div>第八列：密码失效时间（同样是用时间戳表示。如果超过了失效时间，就算密码没有过期，用户也就失效无法使用了）</div><div>第九列：保留</div><div><br/></div><div>3、/etc/group                   <i> #组信息文件</i></div><div>root:x:0:root</div><div>第一列：组名</div><div>第二列：组密码位</div><div>第三列：GID</div><div>第四列：此组中支持的其他用户，附加组是此组的用户</div><div>     初始组：每个用户的初始组只能有一个，一般都是和用户名相同的组作为初始组</div><div>     附加组：每个用户可以属于多个附加组。要把用户加入组，都是加入附加组</div><div><br/></div><div>4、/etc/gshadow               <i>#组密码文件</i></div><div>     如果给用户组设定了组管理员，并给该用户组设定了组密码，组密码就保存在这个文件当中。组管理员就可以利用这个密码管理这个用户组了。</div><div><br/></div><div>5、用户的家目录（~）</div><div>6、用户邮箱目录</div><div>     邮箱在/var/spool/mail目录当中，例如lamp用户的邮箱就是/var/spool/mail/lamp文件</div><div>7、用户模板目录</div><div>     /etc/skel/</div><div><br/></div><div>二、用户管理命令</div><div><br/></div><div>命令名称：useradd</div><div>命令所在路径：/usr/sbin/useradd</div><div>执行权限：root</div><div>功能描述：添加新的用户</div><div>语法：useradd [选项] 用户名</div><div>               -u UID:            手工指定用户的UID号</div><div>               -d 家目录：      手工指定用户的家目录C</div><div>               -c 用户说明：   手工指定用户的说明</div><div>               -g 组名：         手工指定用户的初始组</div><div>               -G 组名：         指定用户的附加组</div><div>               -s shell：          手工指定用户的登录shell。默认是/bin/bash</div><div>范例：# useradd yangmi                               <i>#添加新用户yangmi</i></div><div>用户默认值文件（在公有模式下按些模板建立用户，当前linux建立用户是采用私有模式）</div><div>useradd添加用户参考的默认值文件主要有两个，分别是/etc/default/useradd和/etc/login.defs</div><div>     1）/etc/default/useradd</div><div>               GROUP=100                          <i>#用户默认组</i></div><div>               HOME=/home                       <i>#用户家目录</i></div><div>               INAVTIVE=-1                        <i>#密码过期后宽限天数（shadow文件7字段）</i></div><div>               EXPIRE=                                <i>#密码失效时间（8）</i></div><div>               SHELL=/bin/bash                 <i>#默认shell</i></div><div>               SKEL=/etc/skel                     <i>#模板目录</i></div><div>               CREATE_MAIL_SPOOL=yes  <i>#是否建立邮箱</i></div><div><i>     </i>GROUP=100</div><div>     这个选项是建立用户的默认组，也就是说添加每个用户时，用户的初始组就是GID为100的这个用户组。目前采用的机制是私有用户机制。</div><div>     HOME=/home</div><div>     这个选项是用户的家目录的默认位置，所以所有的新建用户的家目录默认都在/home/下。</div><div>     INACTIVE=-1</div><div>     这个选项就是密码过期后的宽限天数，也就是/etc/shadow文件的第七字段。如果是天数，比如10代表密码过期后10天失效；如果是0，代表密码过期后立即失效；如果是-1，则代表密码永远不会失效。这里默认值是-1，所以所有新建立的用户密码都不会失效。</div><div>     EXPIRE=</div><div>     这个选项是密码失效时间，也就是/etc/shadow文件的第八个字段。也就是说用户到达这个日期就会直接失效。当然这里采用的也是时间戳表示日期。默认值是空，所以所有用户没有失效时间，永久有效。</div><div>     SHELL=/bin/bash</div><div>     这个选项是用户默认的shell。/bin/bash是Linux的标志是shell，所以所有新建立的用户默认具备shell赋予的权限。</div><div>     SKEL=/etc/skel</div><div>     这个选项就是定义用户模板目录的位置，/etc/skel/目录中的文件都会复制到新建用户的家目录中。</div><div>     CREATE_MAIL_SPOOL=yes</div><div>     这个选项定义是否给新建用户建立邮箱，默认是创建，也就是说所有的新建用户系统都会新建一个邮箱，放在/var/spool/mail/下和用户名同名。</div><div>     2）/etc/login.defs                         #去掉注释内容后，余下的文件内容如下</div><div>          MAIL_DIR                    /var/spool/mail</div><div>          PASS_MAX_DAYS        99999</div><div>          PASS_MIN_DAYS         0</div><div>          PASS_MIN_LEN            5</div><div>          PASS_WARN_AGE        7</div><div><br/></div><div>          UID_MIN                 500</div><div>          UID_MAX                 60000</div><div><br/></div><div>          GID_MIN                 500</div><div>          GID-MAX                 60000</div><div><br/></div><div>          CREATE_HOME              yes</div><div>          UMASK                         077</div><div>          USERGROUPS_ENAB     yes</div><div>          ENCRYPT_METHOD      SHA512</div><div>     MAIL_DIR     /var/spool/mail</div><div>     这行指定了新建用户的默认邮箱位置。比如lamp用户的邮箱就是/var/spool/mail/lamp。</div><div>     PASS_MAX_DAYS     99999</div><div>     这行指定的是密码有效期，也就是/etc/shadow文件的第五字段。代表多少天之后必须修改密码，默认值是9999。</div><div>     PASS_MIN_DAYS     0</div><div>     这行指定的是再次密码的修改间隔时间，也就是/etc/shadow文件的第四字段。代表第一次修改密码之后，几天后才能再次修改密码。默认值为0。</div><div>     PASS_MIN_LEN     5</div><div>     这行指定的是密码的最小长度，默认不小于5位。但是我们现在用户登录时验证已经被PAM模块取代，所以这个选项并不生效。</div><div>     PASS_WARN_AGE     7</div><div>     这行指定的是密码修改到期前警告天数，也就是/etc/shadow文件的第六字段。代表密码到有效期前多少天开始进行警告提醒，默认值是7。</div><div>     UID_MIN     500</div><div>     UID_MAX     60000</div><div>     这两行代表创建用户时，最小UID和最大UID的范围。2.6.x内核开始，Linux用户的UID最大可支持2^32个，但是真正使用时最大范围是60000。注意如果手工指定一个用户的UID是550，那么下一个创建的用户的UID就会从551开始，哪怕500-549之间UID没有使用（小于500的UID是给伪用户预留的）。</div><div>     GID_MIN     500</div><div>     GID_MAX     60000</div><div>     这两行指定了GID的最小值和最大值之间的范围。</div><div>     CREATE_HOME     yes</div><div>     这行指定建立用户时是否自动建立用户的家目录，默认是建立。</div><div>     UMASK     077</div><div>     这行指定的是建立用户家目录的默认权限，因为umask值是077，所以新建用户的家目录权限是700。</div><div>     USERGROUPS_ENAB     yes</div><div>     这行指定的是使用命令userdel删除用户时，是否删除用户的初始组，默认是删除。</div><div>     ENCRYPT_METHOD     SHA512</div><div>     这行指定Linux用户密码使用SHA512散列模式加密，这是新的密码加密模式，原先Linux采用的是DES或MD5方式加密</div><div><br/></div><div>命令名称：usermod</div><div>命令所在路径：/usr/sbin/usermod</div><div>执行权限：root</div><div>功能描述：修改用户信息</div><div>语法：usermod [选项] 用户名</div><div>               -u UID：            修改用户的UID号</div><div>               -c 用户说明：     修改用户说明信息</div><div>               -G 组名：           修改用户的附加组</div><div>               -L：                   临时锁定用户（lock）</div><div>               -U：                  解锁用户锁定（Unlock）</div><div>          #usermod -l 新名 旧名     #给用户改名</div><div><br/></div><div>命令名称：passwd</div><div>命令所在路径：/usr/bin/passwd</div><div>执行权限：所有用户</div><div>功能描述：设置用户密码</div><div>语法： passwd [选项] 用户名</div><div>               -S           查询用户密码的密码状态。仅root用户可用。</div><div>               -l            暂时锁定用户。仅root用户可用。</div><div>               -u           解锁用户。仅root用户可用。</div><div>               --stdin    可以通过管道符输出的数据作为用户的密码</div><div>注：普通用户用passwd来更改自己的密码。</div><div>用户的密码设置模板文件</div><div>     /etc/login.defs</div><div>          PASS_MAX_DAYS 99999                <i>#密码有效期（5）</i></div><div>          PASS_MIN_DAYS 0                        <i>#密码修改间隔（4）</i></div><div>          PASS_MIN_LEN  5                          <i>#密码最小5位（PAM）</i></div><div>          PASS_WARN_AGE 7                       <i>#密码到期警告（6）</i></div><div>          UID_MIN       500                          <i>#最小和最大UID范围</i></div><div>          GID_MAX       60000           </div><div>          ENCRYPT_METHOD     SHA512     <i>#加密模式</i></div><div><br/></div><div>命令名称：chage</div><div>命令所在路径：/usr/bin/chage</div><div>执行权限：所有用户</div><div>功能描述：修改用户密码状态</div><div>语法：chage [选项] 用户名</div><div>               -l                列出用户的详细密码状态</div><div>              <b><font color="#E30000"> -d 日期：    密码最后一次更改日期（3字段）</font></b></div><div>               -m 天数：   两次修改密码间隔（4字段）</div><div>               -M 天数：   密码有效期（5字段）</div><div>               -W 天数：   密码过期前警告天数（6字段）</div><div>               -I 天数：     密码过后宽限天数（7字段）</div><div>               -E 日期：    账号失效时间（8字段）</div><div>范例：$ chage -d 0 lamp               <i>#这个命令把密码修改日期归零了（shadow第3字段）</i></div><div>                                                     <i>#这样用户一登陆就被提示要修改密码</i></div><div><br/></div><div><br/>
命令名称：userdel</div><div>命令所在路径：/usr/sbin/userdel</div><div>执行权限：root</div><div>功能描述：删除用户</div><div>语法：userdel [选项] 用户名</div><div>               -r 用户名：       删除用户的同时连同家目录一起删除</div><div>范例：$ userdel -r user1             <i>#删除用户user1同时删除/home/user1目录</i></div><div><i><br/></i></div><div><br/></div><div>命令名称：id</div><div>命令所在路径：/usr/bin/id</div><div>执行权限：所有用户</div><div>功能描述：查看用户ID</div><div>语法：id 用户名</div><div>范例：$ id wower                   <i> #查看用户的UID、GID信息</i></div><div><br/></div><div>命令名称：su</div><div>命令所在路径：/bin/su</div><div>执行权限：所有用户</div><div>功能描述：切换用户身份</div><div>语法：su [选项] 用户名</div><div>          -                     选项只使用“-”代表连带用户环境变量一起切换</div><div>          -c 命令：        仅执行一次命令，而不切换用户身份</div><div>范例：$ su - root                              <i>#切换成root，连带用户环境变量</i></div><div>          $ su - root -c &quot;useradd user1&quot;    <i>#不切换成root，但是执行useradd命令添加user1用户</i></div><div><i><br/></i></div><div>命令名称：newgrp</div><div>命令所在路径：/usr/bin/su</div><div>执行权限：所有用户</div><div>功能描述：改变用户的有效组</div><div>范例：假设aa用户既属于aa组，又属于group1组，如果有效组是aa组，那么aa用户建立文件时，文件的默认属组是aa组。如果有效组是group1组，那么aa用户建立文件时，文件默认属组是group1组</div><div>          以aa身份登录</div><div>          newgrp group1                    <i>#改变aa的有效组为group1（aa必须属于group1组），此时用户创建新</i></div><div>                                                      <i>#文件时，默认属组为group1，而不再是aa</i></div><div><br/></div><div>命令名称：who</div><div>命令所在路径：/usr/bin/who</div><div>执行权限：所有用户</div><div>功能描述：查看用户登录信息</div><div>语法：$ who                                         <i>#查看用户登录信息</i></div><div><br/></div><div>wower      pts/0        2015-03-14 03:53 (192.168.216.118)</div><div>登录用户  登录终端         登录时间       远程登录主机的IP（此项为空则说明是本地登录）</div><div>          tty本地终端</div><div>          pts远程终端</div><div><br/></div><div>命令名称：w</div><div>命令所在路径：/usr/bin/w</div><div>执行权限：所有用户</div><div>功能描述：查看登录用户详细信息</div><div>语法：w</div><div><br/></div><div><hr/></div><div><br/></div><div>用户组管理命令</div><div><hr/><br/></div><div>命令名称：groupadd</div><div>命令所在路径：/usr/sbin/groupadd</div><div>执行权限：root</div><div>功能描述：添加用户组</div><div>语法：groupadd [选项] 组名</div><div>                  -g GID：          指定用户组ID</div><div><br/></div><div>命令名称：groupmod</div><div>命令所在路径：/usr/sbin/groupmod</div><div>执行权限：root</div><div>功能描述：修改用户组</div><div>语法：groupmod [选项] 组名</div><div>                  -g GID:            修改组ID</div><div>                  -n 新组名：      修改组名</div><div>范例：# groupmod -n newgroup oldgroup          <i>#将oldgroup更改为newgroup</i></div><div><br/></div><div>命令名称：groupdel</div><div>命令所在路径：/usr/sbin/groupdel</div><div>执行权限：root</div><div>功能描述：删除组（作为用户的初始组时要删除该组必先删除组的初始用户）</div><div>语法：groupdel 组名</div><div><br/></div><div>命令名称：gpasswd</div><div>命令所在路径：/usr/bin/gpasswd</div><div>执行权限：所有用户</div><div>功能描述：把用户添加入组或从组中删除</div><div>语法：gpasswd [选项] 组名</div><div>               -a 用户名：     把用户加入组</div><div>               -d 用户名：     把用户从组中删除</div><div><br/></div><div><hr/><br/></div><div>压缩解压命令</div><hr/><div><br/></div><div>命令名称：gzip</div><div>英文原意：<font color="#FF0000">G</font>NU <font color="#FF0000">zip</font></div><div>命令所在路径：/bin/gzip</div><div>执行权限：所有用户</div><div>功能描述：压缩文件，压缩后文件格式为&quot;.gz&quot;，gzip只能压缩文件不能压缩目录。</div><div>语法：gzip [文件]</div><div>范例：$ gzip /tmp/services       <i>#压缩/tmp/services文件，该压缩不保留源文件直接生成services.gz</i></div><div><br/></div><div>命令名称：gunzip</div><div>英文原意：<font color="#FF0000">G</font>NU <font color="#FF0000">un</font><font color="#FF0000">zip</font></div><div>命令所在路径：/bin/gunzip</div><div>执行权限：所有用户</div><div>功能描述：解压.gz的压缩文件</div><div>语法：gunzip [压缩文件]</div><div>范例：$ gunzip services.gz      <i>#解压services.gz压缩文件，不保留原压缩文件</i></div><div><br/></div><div>命令名称：tar</div><div>英文原意：</div><div>命令所在路径：/bin/tar</div><div>执行权限：所有用户</div><div>功能描述：打包目录，压缩后文件格式为&quot;.tar.gz&quot;</div><div>语法：tar 选项[-zcf] [压缩后文件名] [目录]</div><div>           -c  打包</div><div>           -v  显示详细信息</div><div>           -f  指定文件名</div><div>           -z  解压缩<font color="#FF0000">.gz</font>文件</div><div>           -j   解压缩<font color="#FF0000">.bz2</font>文件</div><div>范例：$ tar -zcf Japan.tar.gz Japan         <i> #将目录/Japan打包成Japan.tar.gz压缩文件</i></div><div><br/></div><div>命令名称：tar</div><div>语法：tar 选项[-zxf] [压缩后文件名]</div><div>           -x  解包</div><div>           -v  显示详细信息</div><div>           -f  指定解压文件</div><div>           -z  解压缩<font color="#FF0000">.gz</font>文件</div><div>           -j  解压缩<font color="#FF0000">.bz2</font>文件</div><div>           -C  指定解压位置</div><div>范例：$ tar -zxvf Japan.tar.gz              <i>#解压Japan.tar.gz文件</i></div><div><br/></div><div>命令名称：zip</div><div>英文原意：</div><div>命令所在路径：/usr/bin/zip</div><div>执行权限：所有用户</div><div>功能描述：压缩文件或目录，压缩后文件格式为&quot;.zip&quot;</div><div>语法：zip [选项]-r [压缩后文件名] [文件或目录]</div><div>                        -r  压缩目录</div><div><br/></div><div>命令名称：unzip</div><div>英文原意：</div><div>命令所在路径：/usr/bin/unzip</div><div>执行权限：所有用户</div><div>功能描述：解压缩文件或目录</div><div>语法：unzip [压缩文件]</div><div><br/></div><div>命令名称：bzip2</div><div>英文原意：</div><div>命令所在路径：/usr/bin/bzip2</div><div>执行权限：所有用户</div><div>功能描述：压缩文件，压缩后格式为&quot;.bz2&quot;</div><div>语法：bzip2 选项 [-k] [文件]</div><div>                       -k  产生压缩文件后保留原文件</div><div>范例：$ bzip2 -k services                         <i>     #将文件services压缩成services<font color="#FF0000">.bz2</font>文件</i></div><div>          $ tar -cjf wower.tar.bz2 wower           <i>#将目录/wower打包压缩成wower<font color="#FF0000">.tar.bz2</font>的</i><i>压缩文件</i></div><div>                   -j  解压缩<font color="#FF0000">.bz2</font>文件                    </div><div><br/></div><div>命令名称：bunzip2</div><div>英文原意：</div><div>命令所在路径：/usr/bin/bunzip2</div><div>执行权限：所有用户</div><div>功能描述：解压文件</div><div>语法：bunzip2 选项[-k] [压缩文件]</div><div>                         -k 解压缩后保留原文件</div><div>范例：$ bunzip2 -k servcies.bz2                    </div><div>          $ tar -xjf wower.tar.bz2                     <i>#解压wower<font color="#FF0000">.tar.bz2</font>文件</i></div><div>                   -j  解压缩<font color="#FF0000">.bz2</font>文件</div><div><hr/><br/></div><div><br/></div><div>网络命令</div><div><hr/><br/></div><div>命令名称：write</div><div>英文原意：write</div><div>命令所在路径：/usr/bin/write</div><div>执行权限：所有用户</div><div>功能描述：给用记发信息，以ctrl+D结束。</div><div>语法：write &lt;用户名&gt;</div><div><br/></div><div>命令名称：wall</div><div>英文原意：write all</div><div>命令所在路径：/usr/bin/wall</div><div>执行权限：所有用户</div><div>功能描述：发广播信息</div><div>语法：wall [message]</div><div>范例：# wall ShengChao is a honest man!           <i>#向所有用户发送ShengChao is a honest man!</i></div><div><br/></div><div>命令名称：ping</div><div>英文原意：</div><div>命令所在路径：/bin/ping</div><div>执行权限：所有用户</div><div>功能描述：测试网络连通性</div><div>语法：ping 选项 IP地址</div><div>            -c  指定发送次数</div><div>范例：ping -c 4 192.168.216.118                  <i>#测试本机与192.168.216.118的连通性</i></div><div><br/></div><div>命令名称：ifconfig</div><div>英文原意：<font color="#FF0000">i</font>nter<font color="#FF0000">f</font>ace <font color="#FF0000">config</font>ure</div><div>命令所在路径：/sbin/ifconfig</div><div>执行权限：root</div><div>功能描述：查看和设置网卡信息</div><div>语法：ifconfig 网卡名称 IP地址</div><div>范例：#ifconfig eth0 192.168.216.113     <i> #给本机第一块网卡配置192.168.216.113的IP地址（临时生效）</i></div><div><br/></div><div>命令名称：mail</div><div>英文原意：</div><div>命令所在路径：/bin/mail</div><div>执行权限：所有用户</div><div>功能描述：查看发送电子邮件，发送邮件时以ctrl+D结束。</div><div>语法：mail [用户名]</div><div>范例：# mail root                               <i>#给root发送邮件</i></div><div><br/></div><div>命令名称：last</div><div>英文原意：</div><div>命令所在路径：/usr/bin/last</div><div>执行权限：所有用户</div><div>功能描述：列出目前与过去登录系统的用户信息</div><div>语法：last</div><div><br/></div><div>命令名称：lastlog</div><div>英文原意：</div><div>命令所在路径：/usr/bin/lastlog</div><div>执行权限：所有用户</div><div>功能描述：检查某特定用户上次登录的时间</div><div>语法：# lastlog                               <i> #查看所有用户最后一次登录的时间</i></div><div>          # lastlog -u 502                    <i>#查看UID为502的用户的上次登录时间</i></div><div><br/></div><div>命令名称：traceroute</div><div>英文原意：</div><div>命令所在路径：/bin/traceroute</div><div>执行权限：所有用户</div><div>功能描述：显示数据包到主机间的路径</div><div>语法：traceroute</div><div>范例：# traceroute <a href="http://www.lampbrother.net/">www.lampbrother.net</a></div><div><br/></div><div>命令名称：netstat</div><div>英文原意：</div><div>命令所在路径：/bin/netstat</div><div>执行权限：所有用户</div><div>功能描述：显示网络相关信息</div><div>语法：netstat [选项]</div><div>               -t    tcp协议</div><div>               -u    udp协议</div><div>               -l    监听</div><div>               -r    路由</div><div>               -n    显示IP地址和端口号</div><div>范例：# netstat -tlun                    <i>#查看本机监听的端口</i></div><div>          # netstat -an                      <i>#查看本机的所有网络连接</i></div><div>          # netstat -rn                      <i>#查看本机路由表</i></div><div><br/></div><div><br/>
命令名称：setup</div><div>英文原意：</div><div>命令所在路径：/usr/bin/setup</div><div>执行权限：root</div><div>功能描述：配置网络（该命令为redhat系列的专有工具）</div><div>语法：setup</div><div>      用setup配置IP地址后，service network restart重启网络服务。</div><div><br/></div><div><hr/></div><div><br/></div><div>挂载命令</div><div><hr/></div><div><div>命令名称：mount</div><div>英文原意：</div><div>命令所在路径：/bin/mount</div><div>执行权限：所有用户</div><div>功能描述：挂载设备</div><div>语法：mount [-t 文件系统] [-L 卷标名] [-o 特殊选项] 设备文件名 挂载点</div><div>     选项：</div><div>          -t 文件系统：加入文件系统类型来指定挂载的类型，可以ext3、ext4、iso9660等文件系统</div><div>          -L 卷标名：挂载指定卷标的分区，而不是安装设备文件名挂载</div><div>          -o 特殊选项： 可以指定挂载的额外选项</div><div><img src="用户管理命令_files/Image.png" type="image/png" data-filename="Image.png" height="410" style="cursor: default;" width="639"/></div><div>范例：# mount -t iso9660 /dev/sr0 /mnt/cdrom      <i>#挂载光盘（光盘文件系统为iso9660）</i></div><div>      # mount -l                                                          <i>#查询系统中已经挂载的设备，-l会显示卷标名称</i></div><div><i>     </i> # mount -a                                                        <i>#依据配置文件/etc/fstab的内容，自动挂载</i></div><div><i>     </i> # fdisk -l                                                            <i>#查看U盘设备文件名</i></div><div>        mount -t vfat /dev/sdb1 /mnt/usb                 <i>#挂载U盘</i></div><div><i><br/></i></div><div>命令名称：umount</div><div>英文原意：</div><div>命令所在路径：/bin/umount</div><div>执行权限：所有用户</div><div>功能描述：卸载设备</div><div>语法：umount 设备文件或挂载点</div><div>范例：# umount /dev/sr0                           <i>#卸载光盘</i></div><div><i><br/></i></div><div><i>     </i>举例：</div><div>例1：[root@localhost～]#mount                               <i>#查看系统中已经挂载的文件系统（包括虚拟文件系统）</i></div><div>     /dev/sda5 on / type ext4 (rw)<br/>
     proc on /proc type proc (rw)<br/>
     sysfs on /sys type sysfs (rw)<br/>
     devpts on /dev/pts type devpts (rw,gid=5,mode=620)<br/>
     tmpfs on /dev/shm type tmpfs (rw)<br/>
     /dev/sda1 on /boot type ext4 (rw)<br/>
     /dev/sda2 on /home type ext4 (rw)<br/>
     none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)</div><div>例2：修改特殊权限</div><div>[root@localhost～]#mount</div><div>#查看/boot分区已经被挂载，而且采用defaults选项，那么我们重新挂载分区，并采用noexec权限禁止执行文件执行，看看会出现什么情况（注意不要用根分区做试验，否则系统命令也不能执行了）</div><div>......省略部分内容......</div><div>/dev/sda1 on /boot type ext4 (rw)</div><div>......省略部分内容......</div><div>[root@localhost～]#mount -o remount,noexec /boot     <i>#重新挂载/boot分区，并使用noexec权限</i></div><div>[root@localhost boot]#vi hello.sh                                   <i>#写一个shell脚本</i></div><div>#!/bin/bash</div><div>echo &quot;hello!&quot;</div><div>[root@localhost boot]#chmod 755 hello.sh</div><div>[root@localhost boot]#./hello.sh</div><div>-bash: ./hello.sh: 权限不够                                                <i>#虽然赋予了hello.sh执行权限，但是仍然无法执行</i></div><div>[root@localhost boot]#mount -o remount,exec /boot     <i>#记得改回来，否则会影响系统启动</i></div><div>例3：挂载分区</div><div>[root@localhost～]#mkdir /mnt/disk1                              <i>#建立挂载点目录</i></div><div>[root@localhost～]#mount /dev/sdb1 /mnt/disk1           <i>#挂载分区</i></div><div>例4：光盘挂载</div><div>mount -t 文件系统     设备描述文件     挂载点（已经存在空目录）</div><div>[root@localhost～]#mount -t iso9660 /dev/sr0 /mnt/cdrom</div><div>[root@localhost～]#umount /mnt/cdrom                       <i> #卸载光盘（退出挂载目录才能卸载）</i></div><div>例5：挂载U盘</div><div>[root@localhost～]#fdisk -l                         <i>#查看所有分区（U盘的设备文件名不确定，先查看）</i></div><div>[root@localhost～]#mount -t vfat /dev/sdb1 /mnt/usb</div><div>fat32在linux的文件系统为vfat，fat16在linux文件系统为fat，linux默认不支持ntfs</div><div>[root@localhost～]#mount -t vfat -o iocharset=utf8 /dev/sdb1 /mnt/usb</div><div><i>#挂载U盘，指定为中文编码为utf-8（这样中文文件名不会出现乱码）</i></div><div>[root@localhost～]#umount /mnt/usb        <i>#卸载U盘</i></div><div>例6：挂载NTFS分区</div><div>1）重新编译内核（该方法比较麻烦）</div><div>2）加载NTFS模块</div><div>     下载内核</div><div>到内核官网www.kernel.org下载和本机安装的内核相同版本的内核源码。（系统中的内核是已经被编译成二进制文件的）</div><div>[root@localhost～]#uname -r                   <i> #查看内核版本</i></div><div>2.6.32-431.el6.i686</div><div>     解压内核</div><div>[root@localhost～]#tar -zxvf linux-2.6.32.tar.bz2</div><div>[root@localhost～]#cp -r linux-2.6.32 /usr/src/kernels/          <i>#复制内核源码到默认内核源码保存位置</i></div><div>     生成内核编译所需的.config文件</div><div>[root@localhost～]#mount /dev/sr0 /mnt/cdrom</div><div>[root@localhost～]#rpm -ivh /mnt/cdrom/Packages/kernel-devel-2.6.32-431.el6.i686.rpm</div><div>                                                                                               <i>#安装rpm包中的内核源码</i></div><div>[root@localhost～]#cp /usr/src/kernels/2.6.32-431.el6.i686/.config /usr/src/kernels/linux-2.6.32/</div><div>                            <i> #从rpm包的内核源码中，复制.config文件到源码包的内核源码中</i></div><div>    修改一下.config文件，让它支持NTFS文件系统。需要把#CONFIG_NTFS_FS is not set 这句话改为CONFIG_NTFS_FS=m，意思是用模块形式加载NTFS文件系统。</div><div>[root@localhost～]#vi /usr/src/kernels/linux-2.6.32/.config</div><div>......省略部分内容......</div><div>#CONFIG_NTFS_FS is not set</div><div>改为CONFIG_NTFS_FS=m</div><div>......省略部分内容.......</div><div>     编译模块</div><div>[root@localhost～]#cd /usr/src/kernels/linux-2.6.32/</div><div><i>#编译命令一定要进入内核目录才能执行，因为编译命令编译的是当前所在目录</i></div><div>[root@localhost linux-2.6.32]#make modules</div><div><i>#在命令执行过程中，会需要选择要安装哪些模块，这时只选择NTFS相关模块，其他模块都不安装</i></div><div>......省略部分内容......</div><div>NTFS file system support (NTFS_FS) [M/n/y/?]     m</div><div>NTFS debugging support (NTFS_DEBUG) [N/y/?] (NEW)     y</div><div>NTFS write support (NTFS_RW) [N/y/?] (NEW)     y</div><div>......省略部分内容.......</div><div><i>#只需要这几个功能选择y（安装）或m（安装成模块），其他功能都不需要安装。</i></div><div>等待编译结束，就可以得到ntfs.ko模块了</div><div>     模块安装</div><div>将ntfs.ko模块，复制到指定位置</div><div>[root@localhost linux-2.6.32]#cp fs/ntfs/ntfs.ko /lib/moudels/2.6.32-431.el6.i686/kernel/fs/</div><div>[root@localhost linux-2.6.32]#depmod -a                   <i> #扫描所有模块</i></div><div>[root@localhost linux-2.6.32]#modprobe ntfs             <i> #安装ntfs模块</i></div><div>如果modprobe ntfs命令报错，那是因为版本不符，只要强制执行命令</div><div>[root@localhost linux-2.6.32]#modprobe -f ntfs          <i>#-f 强制</i></div><div>[root@localhost linux-2.6.32]#lsmod | grep ntfs          <i>#查询ntfs模块是否有被安装</i></div><div>ntfs模块安装成功，可以尝试挂载和使用ntfs分区</div><div>3）使用NTFS-3G安装NTFS文件系统模块</div><div>     下载NTFS-3G插件</div><div>     安装NTFS-3G插件</div><div>在编译安装NTFS-3G插件之前，保证gcc编译器已经安装，具体过程如下：</div><div>[root@localhost～]#tar -zxvf ntfs-3g_ntfsprogs-2013.1.13.tgz               <i>#解压</i></div><div>[root@localhost～]#cd ntfs-3g_ntfsprogs-2013.1.13                              <i>#进入解压目录</i></div><div>[root@localhost ntfs-3g_ntfsprogs-2013.1.13]#./configure                    <i>#编译器准备</i></div><div>[root@localhost ntfs-3g_ntfsprogs-2013.1.13]#make&amp;make install        <i>#编译安装</i></div><div>安装完成，即可挂载和使用NTFS分区了，注意挂载分区的文件系统是ntfs-3g：</div><div>[root@localhost～]#mount -t ntfs-3g 分区设备文件名 挂载点</div><br/></div><div><br/></div><div><hr/><br/></div><div>vi文本编辑器</div><div><hr/><br/></div><div><br/></div><div align="justify"><img src="用户管理命令_files/Image [1].png" type="image/png" data-filename="Image.png" alt="graphic" border="0" height="325" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="574"/></div><div align="justify"><br/></div><div align="justify">插入模式</div><div align="justify">     以下命令须在命令模式下输入</div><div align="justify">          命令          作用</div><div align="justify">            a           追加（在光标所在字符后插入）</div><div align="justify">            i            插入（在光标所在字符前插入）</div><div align="justify">            o           打开（在光标下插入新行）</div><div align="justify">            A           在光标所在行尾插入</div><div align="justify">            I            在光标所在行行首插入</div><div align="justify">            O          在光标上插入新行</div><div><br/></div><div>编辑模式</div><div>     在命令模式下输入</div><div>          :w     保存</div><div>          :q     不保存退出</div><div>          :wq   保存退出</div><div>          :q!    强制退出（任何用户都可以使用）</div><div>          :wq!  强制保存退出（只有root可以使用）</div><div><br/></div><div>命令模式</div><div>     光标定位</div><div>          h              光标向左移动</div><div>          j               光标向下移动</div><div>          k              光标向上移动</div><div>          l               光标向右移动</div><div>          :set nu       设置行号</div><div>          :set nonu   取消行号</div><div>          :n              到第几行</div><div>          gg             移动到文件头</div><div>          G              移动到文件尾</div><div>          ^或0         移动到行首</div><div>          $               移动到行尾</div><div>     删除命令</div><div>          x           删除光标所在的单个字符</div><div>          nx         删除光标所在处后n个字符</div><div>          dd         删除光标所在的整行</div><div>          ndd       删除包括光标所在行往下的n行</div><div>          dG        删除光标所在处到文件尾</div><div>     复制剪切粘贴命令</div><div>          yy           复制当前行</div><div>          nyy         复制包括当前行往下的n行</div><div>          dd          剪切当前行</div><div>          ndd        剪切包括光标所在行往下的n行</div><div>          p/P         粘贴在当前光标所在行下或行上</div><div>     撤消命令</div><div>          u            撤消</div><div>          ctrl+r     反撤消</div><div>     颜色开关</div><div>          :syntax off</div><div>          :syntax on</div><div>     查找</div><div>          /关键词     在光标所在处向下查找关键词（n 下一个，N 上一个）</div><div>     替换</div><div>          r                                   替换光标所在处的字符</div><div>          R                                   从光标所在处开始替换字符，按ESC结束</div><div>          :n1,n2/old/new/g          在n1至n2行内替换指定字符串</div><div>          :%s/old/new/g              全文替换指定字符串</div><div>          例：  :1,5s/^/#/g          注释1到5行</div><div>                  :1,5s/^#//g           取消1至5行注释</div><div>                  :1,5s/^/\/\//g       1至5行头加入//        (“\”为转义符)</div><div>                  :1,10s/^\/\///g     删除1至10行行首的//</div><div><font face="新宋体"><br/></font></div><div>vim使用技巧</div><div>     1、在vim中导入其他文件内容或命令结果</div><div>     a、导入其他文件内容</div><div>          在命令模式下：</div><div>          :r 文件名</div><div>     b、在vim中执行系统命令</div><div>     :!命令</div><div>     c、导入命令结果</div><div>     :r !命令</div><div>     2、设定快捷键</div><div>     :map 快捷键 快捷键执行的命令</div><div>     例如：</div><div>          :map ^P I#&lt;ESC&gt;</div><div>          #当输入ctrl+p快捷键时，执行在行首加入#注释</div><div>          #^P不能手工输入，需要执行ctrl+V+P来定义，或ctrl+V，然后ctrl+P</div><div>          </div><div>          :map ^B ^x</div><div>          #当输入ctrl+B快捷键时，把光标移动到行首，然后删除一个字母。用于取消注释</div><div>     3、替换</div><div>     :ab 源字符 替换为字符</div><div>     :ab mymail <a href="mailto:shenchao@lampbrother.net">shenchao@lampbrother.net</a></div><div>     </div><div>     如果需要永久生效，须写入vim配置文件</div><div>     ~/vimrc</div><div>     </div></span>
</div></body></html> 