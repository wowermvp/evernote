<html>
<head>
  <title>shell语法（摘自网络）</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1378"/>
<h1>shell语法（摘自网络）</h1>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="color: rgb(51, 51, 51); font-size: 14px; text-align: left; background-color: rgb(255, 255, 255); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"><span style="line-height: 1.3em;"><span style="line-height: 25px;"><span style="font-size: 16px; line-height: 28px;">一、基本语法</span></span></span><br/><span style="line-height: 1.3em;"><span style="line-height: 25px;">1.1、shell文件开头</span></span><br/><span style="line-height: 1.3em; color: rgb(0, 51, 102);">shell文件必须以下面的行开始（必须方在文件的第一行）： </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;">#!/bin/sh </span></span><br/><span style="line-height: 1.3em; color: rgb(0, 51, 102);">符号</span><span style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;">#!</span></span><span style="line-height: 1.3em; color: rgb(0, 51, 102);">用来告诉系统它后面的参数是用来执行该文件的程序。在这个例子中我们使用/bin/sh来执行程序。 </span><br/><span style="line-height: 1.3em; color: rgb(0, 51, 102);">当编辑好脚本时，如果要执行该脚本，还必须使其可执行。 </span><br/><span style="line-height: 1.3em; color: rgb(0, 51, 102);">要使脚本可执行：</span><br/><span style="line-height: 1.3em; color: rgb(0, 51, 102);">运行</span><span style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;">chmod +x filename</span></span><span style="line-height: 1.3em; color: rgb(0, 51, 102);"> 这样才能用./filename 来运行</span><br/><span style="line-height: 1.3em;"><span style="line-height: 25px;">1.2 注释 </span></span><br/><span style="line-height: 1.3em;"><span style="color: rgb(0, 51, 102); line-height: 25px;">在进行</span><span style="color: rgb(0, 0, 255); line-height: 25px;">shell</span><span style="color: rgb(0, 51, 102); line-height: 25px;">编程时，以</span><span style="color: rgb(0, 0, 255); line-height: 25px;">#</span><span style="color: rgb(0, 51, 102); line-height: 25px;">开头的句子表示注释，直到这一行的结束。我们真诚地建议您在程序中使用注释。</span></span><br/><span style="line-height: 1.3em; color: rgb(0, 51, 102);">如果您使用了注释，那么即使相当长的时间内没有使用该脚本，您也能在很短的时间内明白该脚本的作用</span><br/><span style="line-height: 1.3em; color: rgb(0, 51, 102);">及工作原理。</span><br/><span style="line-height: 1.3em;"><span style="line-height: 25px;">1.3 变量 </span></span><br/><span style="color: rgb(0, 51, 102);"><span style="line-height: 1.3em;">在shell编程中，所有的变量都由字符串组成，并且您不需要对变量</span><span style="line-height: 1.3em;">进行声明，直接赋值就可以，应用变量的话，用$+变量名的形式。</span></span></span><div style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255); line-height: 25px;"><span style="line-height: 1.3em; color: rgb(0, 0, 128);">要赋值给一个变量，您可以这样写： </span><span style="line-height: 18px; color: rgb(0, 0, 128);"><br style="line-height: 25px;"/></span><span style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;">a=&quot;hello world&quot; </span></span><br/><span style="line-height: 1.3em; color: rgb(0, 0, 128);">现在打印变量a的内容： </span><br/><span style="color: rgb(0, 0, 255);"><span style="line-height: 1.3em;">echo &quot;A is:&quot; </span><br/><span style="line-height: 1.3em;">echo $a </span></span><br/><span style="line-height: 1.3em; color: rgb(0, 0, 128);">有时候变量名很容易与其他文字混淆，比如： </span><br/><span style="color: rgb(0, 0, 255);"><span style="line-height: 1.3em;">num=2 </span><br/><span style="line-height: 1.3em;">echo &quot;this is the $numnd&quot; </span></span><br/><span style="line-height: 1.3em; color: rgb(0, 0, 128);">这并不会打印出&quot;this is the 2nd&quot;，而仅仅打印&quot;this is the &quot;，因为shell会去搜索变量numnd的值，</span><br/><span style="line-height: 1.3em; color: rgb(0, 0, 128);">但是这个变量时没有值的。可以使用</span><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">花括号</span></span><span style="line-height: 1.3em; color: rgb(0, 0, 128);">来告诉shell我们要打印的是num变量： </span><br/><span style="line-height: 1.3em; color: rgb(0, 0, 255);">num=2 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;">echo &quot;this is the </span><span style="color: rgb(255, 102, 0); line-height: 25px;">${</span><span style="color: rgb(0, 0, 255); line-height: 25px;">num</span><span style="color: rgb(255, 102, 0); line-height: 25px;">}</span><span style="color: rgb(0, 0, 255); line-height: 25px;">nd&quot; </span></span><br/><span style="line-height: 1.3em; color: rgb(0, 0, 128);">这将打印： this is the 2nd</span><br/><span style="line-height: 1.3em;"><span style="line-height: 25px;">1.4 环境变量</span></span><br/><span style="color: rgb(0, 0, 128);"><span style="line-height: 1.3em;">由export关键字处理过的变量叫做环境变量。我们不对环境变量进行讨论，因为通常情况下仅仅在登录</span><br/><span style="line-height: 1.3em;">脚本中使用环境变量。</span></span><span style="font-size: 16px; line-height: 28px;"><span style="line-height: 25px;"><span style="line-height: 28px;"><br/></span></span></span></div><div style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255); line-height: 25px;"><div style="line-height: 1.3em;"><span style="line-height: 25px;"><span style="font-size: 16px; line-height: 28px;">二、</span>概念: 管道, 重定向和 backtick </span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 51, 102); line-height: 25px;">这些不是系统命令，但是他们真的很重要。</span></div><div style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">管道</span><span style="color: rgb(0, 0, 128); line-height: 25px;"> </span><span style="color: rgb(255, 102, 0); line-height: 25px;">(|)</span><span style="color: rgb(0, 0, 128); line-height: 25px;">： 将一个命令的输出作为另外一个命令的输入。</span><span style="color: rgb(0, 51, 102); line-height: 25px;"> </span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;">grep &quot;hello&quot; file.txt | wc -l </span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 0, 128); line-height: 25px;">在file.txt中搜索包含有”hello”的行并计算其行数。 </span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 0, 128); line-height: 25px;">在这里grep命令的输出作为wc命令的输入。当然您可以使用多个命令。 </span></div><div style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">重定向</span><span style="color: rgb(0, 51, 102); line-height: 25px;">：将命令的结果输出到文件，而不是标准输出（屏幕）。</span></div><div style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">&gt;</span><span style="color: rgb(0, 51, 102); line-height: 25px;"> 写入文件并覆盖旧文件 </span></div><div style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">&gt;&gt;</span><span style="color: rgb(0, 51, 102); line-height: 25px;"> 加到文件的尾部，保留旧文件内容。</span></div><div style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">反短斜线</span><span style="color: rgb(0, 51, 102); line-height: 25px;"> </span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 51, 102); line-height: 25px;">使用</span><span style="color: rgb(255, 102, 0); line-height: 25px;">反短斜线</span><span style="color: rgb(0, 51, 102); line-height: 25px;">(&quot;</span><span style="line-height: 25px;"><span style="color: rgb(255, 102, 0);">`</span></span><span style="color: rgb(0, 51, 102); line-height: 25px;">&quot;)可以将一个命令的输出作为另外一个命令的一个命令行参数。</span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 51, 102); line-height: 25px;">命令： </span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;">find . -mtime -1 -type f -print </span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 51, 102); line-height: 25px;">用来查找过去24小时（-mtime –2则表示过去48小时）内修改过的文件。如果您</span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 51, 102); line-height: 25px;">想将所有查找到的文件打一个包，则可以使用以下脚本： </span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;">#!/bin/sh </span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;"># The ticks are backticks (</span><span style="color: rgb(255, 102, 0); line-height: 25px;">`</span><span style="color: rgb(0, 0, 255); line-height: 25px;">) not normal quotes ('): </span></div><div style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;">tar -zcvf lastmod.tar.gz </span><span style="color: rgb(255, 102, 0); line-height: 25px;">`</span><span style="color: rgb(0, 0, 255); line-height: 25px;">find . -mtime -1 -type f -print</span><span style="color: rgb(255, 102, 0); line-height: 25px;">` </span></div><div><span style="font-size: 16px; line-height: 28px;">三、</span> 流程控制语句 </div><div>3.1、if<span style="color: rgb(0, 51, 102);"> </span></div><div><span style="color: rgb(0, 51, 102);">&quot;</span><span style="color: rgb(255, 102, 0);">if</span><span style="color: rgb(0, 51, 102);">&quot; 表达式 如果条件为真则执行then后面的部分： </span></div><div><span style="color: rgb(0, 0, 255);">if ....; then </span></div><div><span style="color: rgb(0, 0, 255);">.... </span></div><div><span style="color: rgb(0, 0, 255);">elif ....; then </span></div><div><span style="color: rgb(0, 0, 255);">.... </span></div><div><span style="color: rgb(0, 0, 255);">else </span></div><div><span style="color: rgb(0, 0, 255);">.... </span></div><div><span style="color: rgb(0, 0, 255);">fi</span></div><div><span style="color: rgb(0, 51, 102);">大多数情况下，可以使用测试命令来对条件进行测试。比如可以比较字符串、判断文件</span></div><div><span style="color: rgb(0, 51, 102);">是否存在及是否可读等等… </span></div><div><span style="color: rgb(0, 51, 102);">通常用&quot; [ ] &quot;来表示条件测试。注意这里的空格很重要。要确保方括号的空格。 </span></div><div><span style="color: rgb(255, 102, 0);">[ -f &quot;somefile&quot; ] </span><span style="color: rgb(51, 102, 255);">：判断是否是一个文件 </span></div><div><span style="color: rgb(255, 102, 0);">[ -x &quot;/bin/ls&quot; ] </span><span style="color: rgb(51, 102, 255);">：判断/bin/ls是否存在并有可执行权限 </span></div><div><span style="color: rgb(255, 102, 0);">[ -n &quot;$var&quot; ] </span><span style="color: rgb(51, 102, 255);">：判断$var变量是否有值 </span></div><div><span style="color: rgb(255, 102, 0);">[ &quot;$a&quot; = &quot;$b&quot; ] </span><span style="color: rgb(51, 102, 255);">：判断$a和$b是否相等 </span><span style="color: rgb(255, 102, 0);">,注意“=”和变量之间要有空格</span><span style="color: rgb(51, 102, 255);">。</span></div><div><span style="color: rgb(0, 51, 102);">执行man test可以查看所有测试表达式可以比较和判断的类型。 </span></div><div><span style="color: rgb(0, 51, 102);">直接执行以下脚本： </span></div><div><span style="color: rgb(0, 0, 255);">#!/bin/sh </span></div><div><span style="color: rgb(0, 0, 255);">if [ &quot;$SHELL&quot; = &quot;/bin/bash&quot; ]; then </span></div><div><span style="color: rgb(0, 0, 255);">echo &quot;your login shell is the bash (bourne again shell)&quot; </span></div><div><span style="color: rgb(0, 0, 255);">else </span></div><div><span style="color: rgb(0, 0, 255);">echo &quot;your login shell is not bash but $SHELL&quot; </span></div><div><span style="color: rgb(0, 0, 255);">fi </span></div><div><span style="color: rgb(0, 51, 102);">变量$SHELL包含了登录shell的名称，我们和/bin/bash进行了比较。 </span></div><div>3.2、快捷操作符<span style="color: rgb(255, 102, 0);">&amp;&amp;</span>和<span style="color: rgb(255, 102, 0);">||</span></div><div><span style="color: rgb(0, 51, 102);">熟悉C语言的朋友可能会很喜欢下面的表达式： </span></div><div><span style="color: rgb(0, 0, 255);">[ -f &quot;/etc/shadow&quot; ] &amp;&amp; echo &quot;This computer uses shadow passwors&quot; </span></div><div><span style="color: rgb(0, 51, 102);">这里 </span><span style="color: rgb(255, 102, 0);">&amp;&amp;</span><span style="color: rgb(0, 51, 102);"> 就是一个快捷操作符，如果左边的表达式为真则执行右边的语句。</span></div><div><span style="color: rgb(0, 51, 102);">您也可以认为是逻辑运算中的与操作。上例中表示如果/etc/shadow文件存在</span></div><div><span style="color: rgb(0, 51, 102);">则打印” This computer uses shadow passwors”。同样</span><span style="color: rgb(0, 0, 255);">或</span><span style="color: rgb(0, 51, 102);">操作(</span><span style="color: rgb(255, 102, 0);">||</span><span style="color: rgb(0, 51, 102);">)在shell编程中也是</span></div><div><span style="color: rgb(0, 51, 102);">可用的。这里有个例子： </span></div><div style="color: rgb(51, 102, 255);">#!/bin/sh </div><div style="color: rgb(51, 102, 255);">mailfolder=/var/spool/mail/james </div><div><span style="color: rgb(51, 102, 255);">[ -r &quot;$mailfolder&quot; ]</span><span style="color: rgb(255, 102, 0);">||</span><span style="color: rgb(51, 102, 255);">{ echo &quot;Can not read $mailfolder&quot; ; exit 1; } </span></div><div style="color: rgb(51, 102, 255);">echo &quot;$mailfolder has mail from:&quot; </div><div style="color: rgb(51, 102, 255);">grep &quot;^From &quot; $mailfolder</div><div><span style="color: rgb(0, 51, 102);">该脚本首先判断mailfolder是否可读。如果可读则打印该文件中的&quot;From&quot; 一行。如果不可读</span></div><div><span style="color: rgb(0, 51, 102);">则或操作生效，打印错误信息后脚本退出。这里有个问题，那就是我们必须有两个命令： </span></div><div><span style="color: rgb(0, 51, 102);">-打印错误信息 </span></div><div><span style="color: rgb(0, 51, 102);">-退出程序 </span></div><div><span style="color: rgb(0, 0, 128);">我们使用花括号以</span><span style="color: rgb(0, 0, 255);">匿名函数</span><span style="color: rgb(0, 0, 128);">的形式将两个命令放到一起作为一个命令使用。一般函数将在下文提及。 </span></div><div><span style="color: rgb(0, 0, 128);">不用与和或操作符，我们也可以用if表达式作任何事情，但是使用与或操作符会更便利很多。</span></div><div>3.3、case</div><div><span style="color: rgb(255, 102, 0);">case</span><span style="color: rgb(0, 51, 102);"> :表达式可以用来匹配一个给定的字符串，而不是数字。 </span></div><div><span style="color: rgb(0, 0, 255);">case ... in </span></div><div><span style="color: rgb(0, 0, 255);">...) do something here ;; </span></div><div><span style="color: rgb(0, 0, 255);">esac </span></div><div><span style="color: rgb(0, 51, 102);">以下是一个使用</span><span style="color: rgb(0, 0, 255);">case</span><span style="color: rgb(0, 51, 102);">的实例：</span></div><div><span style="color: rgb(51, 102, 255);">dirs=`ls $sourceRoot/android | tr '\n' ' '`</span></div><div><span style="color: rgb(128, 128, 0);">for i in $dirs</span></div><div><span style="color: rgb(128, 128, 0);">do</span></div><div><span style="color: rgb(51, 102, 255);">sourceFold=$sourceRoot/android/${i}</span></div><div><span style="color: rgb(153, 204, 0);">case ${i} in </span></div><div><span style="color: rgb(0, 0, 255);">out</span><span style="color: rgb(255, 102, 0);">)</span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;skip ${i}&quot;;;</span></div><div><span style="color: rgb(0, 0, 255);">kernel</span><span style="color: rgb(255, 102, 0);">|</span><span style="color: rgb(0, 0, 255);">frameworks</span><span style="color: rgb(255, 102, 0);">|</span><span style="color: rgb(0, 0, 255);">vendor</span><span style="color: rgb(255, 102, 0);">|</span><span style="color: rgb(0, 0, 255);">build</span><span style="color: rgb(255, 102, 0);">)</span></div><div><span style="color: rgb(51, 102, 255);">cp -rfu $sourceFold $workRoot/android</span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;copy ${i}&quot;;;</span></div><div><span style="color: rgb(0, 0, 255);">*</span><span style="color: rgb(255, 102, 0);">) </span></div><div><span style="color: rgb(51, 102, 255);">ln -sf $sourceFold $workRoot/android</span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;linking ${i}&quot;;;</span></div><div><span style="color: rgb(153, 204, 0);">esac</span></div><div><span style="color: rgb(128, 128, 0);">done</span></div><div><span style="color: rgb(0, 51, 102);">再让我们看一个例子。 file命令可以辨别出一个给定文件的文件类型，比如： </span></div><div><span style="color: rgb(0, 51, 102);">file </span><span style="color: rgb(0, 0, 255);">lf.gz</span><span style="color: rgb(0, 51, 102);"> </span></div><div><span style="color: rgb(0, 51, 102);">这将返回： </span></div><div><span style="color: rgb(0, 0, 255);">lf.gz: gzip compressed </span><span style="color: rgb(51, 102, 255);">data, deflated, original filename, </span></div><div><span style="color: rgb(51, 102, 255);">last modified: Mon Aug 27 23:09:18 2001, os: Unix </span></div><div><span style="color: rgb(0, 51, 102);">下面有个一个叫做smartzip的脚本，该脚本可以自动解压bzip2, gzip 和zip 类型的压缩文件： </span></div><div><span style="color: rgb(51, 102, 255);">#!/bin/sh </span></div><div><span style="color: rgb(51, 102, 255);">ftype=`file &quot;$1&quot;` </span></div><div><span style="color: rgb(153, 204, 0);">case &quot;$ftype&quot; in </span></div><div><span style="color: rgb(0, 0, 255);">&quot;$1: Zip archive&quot;*) </span></div><div><span style="color: rgb(51, 102, 255);">unzip &quot;$1&quot; ;; </span></div><div><span style="color: rgb(0, 0, 255);">&quot;$1: gzip compressed&quot;*) </span></div><div><span style="color: rgb(51, 102, 255);">gunzip &quot;$1&quot; ;; </span></div><div><span style="color: rgb(0, 0, 255);">&quot;$1: bzip2 compressed&quot;*) </span></div><div><span style="color: rgb(51, 102, 255);">bunzip2 &quot;$1&quot; ;; </span></div><div><span style="color: rgb(51, 102, 255);">*) echo &quot;File $1 can not be uncompressed with smartzip&quot;;; </span></div><div><span style="color: rgb(153, 204, 0);">esac </span></div><div><span style="color: rgb(0, 51, 102);">您可能注意到我们在这里使用了一个特殊的变量</span><span style="color: rgb(0, 0, 255);">$1</span><span style="color: rgb(0, 51, 102);">。该变量包含了传递给该程序的第一个参数值。</span></div><div><span style="color: rgb(0, 51, 102);">也就是说，当我们运行： </span></div><div><span style="color: rgb(51, 102, 255);">smartzip articles.zip </span></div><div><span style="color: rgb(0, 51, 102);">$1 就是字符串</span><span style="color: rgb(51, 102, 255);"> articles.zip</span></div><div>3.4、 selsect</div><div><span style="color: rgb(0, 0, 255);">select</span><span style="color: rgb(0, 51, 102);"> 表达式是一种bash的</span><span style="color: rgb(255, 102, 0);">扩展应用</span><span style="color: rgb(0, 51, 102);">，尤其擅长于交互式使用。用户可以从一组不同的值中进行选择。 </span></div><div><span style="color: rgb(0, 0, 255);">select var in ... ; do </span></div><div><span style="color: rgb(0, 0, 255);">break </span></div><div><span style="color: rgb(0, 0, 255);">done </span></div><div><span style="color: rgb(0, 51, 102);">.... now $var can be used .... </span></div><div><span style="color: rgb(0, 51, 102);">下面是一个例子： </span></div><div><span style="color: rgb(51, 102, 255);">#!/bin/sh </span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;What is your favourite OS?&quot; </span></div><div><span style="color: rgb(255, 102, 0);">select var in </span><span style="color: rgb(51, 102, 255);">&quot;Linux&quot; &quot;Gnu Hurd&quot; &quot;Free BSD&quot; &quot;Other&quot;</span><span style="color: rgb(255, 102, 0);">; do </span></div><div><span style="color: rgb(255, 102, 0);">break </span></div><div><span style="color: rgb(255, 102, 0);">done </span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;You have selected $var&quot; </span></div><div><span style="color: rgb(0, 0, 255);">下面是该脚本运行的结果： </span></div><div><span style="color: rgb(0, 0, 255);">What is your favourite OS? </span></div><div><span style="color: rgb(0, 0, 255);">1) Linux </span></div><div><span style="color: rgb(0, 0, 255);">2) Gnu Hurd </span></div><div><span style="color: rgb(0, 0, 255);">3) Free BSD </span></div><div><span style="color: rgb(0, 0, 255);">4) Other </span></div><div><span style="color: rgb(0, 0, 255);">#? 1 </span></div><div><span style="color: rgb(0, 0, 255);">You have selected Linux</span></div><div>注意<span style="color: rgb(0, 51, 102);">：</span>select是扩展应用。</div><div>3.4、while</div><div><span style="color: rgb(0, 51, 102);">while表达式： </span></div><div><span style="color: rgb(0, 51, 102);">while ...; do </span></div><div><span style="color: rgb(0, 51, 102);">.... </span></div><div><span style="color: rgb(0, 51, 102);">done </span></div><div><span style="color: rgb(0, 51, 102);">当while中的表达式为真时，将一直循环。</span></div><div><span style="color: rgb(0, 51, 102);">可以用关键字&quot;</span><span style="color: rgb(255, 102, 0);">break</span><span style="color: rgb(0, 51, 102);">&quot; 用来跳出循环；也可以用关键字”</span><span style="color: rgb(255, 102, 0);">continue</span><span style="color: rgb(0, 51, 102);">”用来不执行余下的部分而直接跳到下一个循环。</span></div><div><span style="color: rgb(0, 51, 102);">实例3-4-1</span></div><div><span style="color: rgb(51, 102, 255);">#!/bin/sh </span></div><div><span style="color: rgb(51, 102, 255);">num=10</span></div><div><span style="color: rgb(153, 204, 0);">while [ ! &quot;$num&quot; = &quot;0&quot; ]; do </span></div><div><span style="color: rgb(51, 102, 255);">#num=num-1</span></div><div><span style="color: rgb(51, 102, 255);">num=`expr &quot;$num&quot; &quot;-&quot; &quot;1&quot;` </span></div><div><span style="color: rgb(51, 102, 255);">echo $num</span></div><div><span style="color: rgb(153, 204, 0);">done</span></div><div>3.5、for</div><div><span style="color: rgb(0, 51, 102);">for-loop表达式查看一个字符串列表 (字符串用空格分隔) 然后将其赋给一个变量： </span></div><div><span style="color: rgb(0, 0, 255);">for var in ....; do </span></div><div><span style="color: rgb(0, 0, 255);">.... </span></div><div><span style="color: rgb(0, 0, 255);">done </span></div><div><span style="color: rgb(0, 51, 102);">在下面的例子中，将分别打印ABC到屏幕上： </span></div><div><span style="color: rgb(0, 0, 255);">#!/bin/sh </span></div><div><span style="color: rgb(153, 204, 0);">for var in A B C ; do </span></div><div><span style="color: rgb(0, 0, 255);">echo &quot;var is $var&quot; </span></div><div><span style="color: rgb(153, 204, 0);">done </span></div><div><span style="color: rgb(0, 51, 102);">下面是一个更为有用的脚本showrpm，其功能是打印一些RPM包的统计信息： </span></div><div><span style="color: rgb(51, 102, 255);">#!/bin/sh </span></div><div><span style="color: rgb(51, 102, 255);"># list a content summary of a number of RPM packages </span></div><div><span style="color: rgb(51, 102, 255);"># USAGE: showrpm rpmfile1 rpmfile2 ... </span></div><div><span style="color: rgb(51, 102, 255);"># EXAMPLE: showrpm /cdrom/RedHat/RPMS/*.rpm </span></div><div><span style="color: rgb(153, 204, 0);">for</span><span style="color: rgb(0, 0, 255);"> rpmpackage</span><span style="color: rgb(153, 204, 0);"> in $*; do </span></div><div><span style="color: rgb(51, 102, 255);">if [ -r &quot;</span><span style="color: rgb(0, 0, 255);">$rpmpackage</span><span style="color: rgb(51, 102, 255);">&quot; ];then </span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;=============== $rpmpackage ==============&quot; </span></div><div><span style="color: rgb(51, 102, 255);">rpm -qi -p </span><span style="color: rgb(0, 0, 255);">$rpmpackage </span></div><div><span style="color: rgb(51, 102, 255);">else </span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;ERROR: cannot read file $rpmpackage&quot; </span></div><div><span style="color: rgb(51, 102, 255);">fi </span></div><div><span style="color: rgb(153, 204, 0);">done</span><span style="color: rgb(51, 102, 255);"> </span></div><div><span style="color: rgb(0, 51, 102);">这里出现了第二个特殊的变量$*，该变量包含了所有输入的命令行参数值。</span></div><div><span style="color: rgb(0, 51, 102);">如果您运行</span><span style="color: rgb(51, 102, 255);">showrpm openssh.rpm w3m.rpm webgrep.rpm </span></div><div><span style="color: rgb(0, 51, 102);">此时 $* 包含了 3 个字符串，即</span><span style="color: rgb(51, 102, 255);">openssh.rpm, w3m.rpm and webgrep.rpm.</span></div><div><span style="font-size: 16px; line-height: 28px;">四、</span>引号<span style="color: rgb(0, 51, 102);"> </span></div><div><span style="color: rgb(0, 51, 102);">在向程序传递任何参数之前，程序会扩展通配符和变量。这里所谓扩展的意思是程序会把通配符</span></div><div><span style="color: rgb(0, 51, 102);">（比如*）替换成合适的文件名，它变量替换成变量值。为了防 止程序作这种替换，您可以使用</span></div><div><span style="color: rgb(0, 51, 102);">引号：让我们来看一个例子，假设在当前目录下有一些文件，两个jpg文件， mail.jpg 和tux.jpg。 </span></div><div><span style="color: rgb(0, 0, 255);">echo *.jpg</span></div><div><span style="color: rgb(0, 51, 102);">这将打印出&quot;mail.jpg tux.jpg&quot;的结果。 </span></div><div><span style="color: rgb(255, 102, 0);">引号</span><span style="color: rgb(0, 0, 128);"> (单引号和双引号) 将</span><span style="color: rgb(255, 102, 0);">防止这种通配符扩展</span><span style="color: rgb(0, 51, 102);">： </span></div><div><span style="color: rgb(0, 0, 255);">#!/bin/sh </span></div><div><span style="color: rgb(0, 0, 255);">echo &quot;*.jpg&quot; </span></div><div><span style="color: rgb(0, 0, 255);">echo '*.jpg' </span></div><div><span style="color: rgb(0, 51, 102);">这将打印&quot;*.jpg&quot; 两次。 </span></div><div><span style="color: rgb(0, 0, 128);">单引号更严格一些。它可以防止任何变量扩展。双引号可以防止通配符扩展但允许变量扩展</span><span style="color: rgb(0, 51, 102);">。 </span></div><div><span style="color: rgb(51, 102, 255);">#!/bin/sh </span></div><div><span style="color: rgb(51, 102, 255);">echo $SHELL </span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;$SHELL&quot; </span></div><div><span style="color: rgb(51, 102, 255);">echo '$SHELL' </span></div><div><span style="color: rgb(0, 51, 102);">运行结果为： </span></div><div><span style="color: rgb(51, 102, 255);">/bin/bash </span></div><div><span style="color: rgb(51, 102, 255);">/bin/bash </span></div><div><span style="color: rgb(51, 102, 255);">$SHELL </span></div><div><span style="color: rgb(0, 0, 128);">最后，还有一种防止这种扩展的方法，那就是使用</span><span style="color: rgb(255, 102, 0);">转义字符</span><span style="color: rgb(0, 0, 128);">——</span><span style="color: rgb(255, 102, 0);">反斜杆</span><span style="color: rgb(0, 0, 128);">： </span></div><div><span style="color: rgb(0, 0, 255);">echo \*.jpg </span></div><div><span style="color: rgb(0, 0, 255);">echo \$SHELL </span></div><div><span style="color: rgb(0, 51, 102);">这将输出： </span></div><div><span style="color: rgb(0, 0, 255);">*.jpg </span></div><div><span style="color: rgb(0, 0, 255);">$SHELL</span></div><div><span style="font-size: 16px; line-height: 28px;">五、</span>函数</div><div style="color: rgb(0, 51, 102);">如果您写了一些稍微复杂一些的程序，您就会发现在程序中可能在几个地方使用了相同的代码，</div><div style="color: rgb(0, 51, 102);">并且您也会发现，如果我们使用了函数，会方便很多。一个函数是这个样子的： </div><div><span style="color: rgb(51, 102, 255);">functionname() </span></div><div><span style="color: rgb(51, 102, 255);">{ </span></div><div><span style="color: rgb(51, 102, 255);"># inside the body $1 is the first argument given to the function </span></div><div><span style="color: rgb(51, 102, 255);"># $2 the second ... </span></div><div><span style="color: rgb(51, 102, 255);">body </span></div><div><span style="color: rgb(51, 102, 255);">} </span></div><div style="color: rgb(0, 51, 102);">您需要在每个程序的开始对函数进行声明。</div><div style="color: rgb(0, 51, 102);">下面是一个叫做xtitlebar的脚本，使用这个脚本您可以改变终端窗口的名称。</div><div style="color: rgb(0, 51, 102);">这里使用了一个叫做help的函数。正如您可以看到的那样，这个定义的函数被使用了两次。 </div><div><span style="color: rgb(51, 102, 255);">#!/bin/sh </span></div><div><span style="color: rgb(51, 102, 255);"># vim: set sw=4 ts=4 et: </span></div><div><span style="color: rgb(0, 0, 255);">help() </span></div><div><span style="color: rgb(51, 102, 255);">{ </span></div><div><span style="color: rgb(0, 0, 255);">cat</span><span style="color: rgb(51, 102, 255);"> </span><span style="color: rgb(255, 102, 0);">&lt;&lt;</span><span style="color: rgb(51, 102, 255);"> </span><span style="color: rgb(128, 128, 0);">HELP</span></div><div><span style="color: rgb(51, 102, 255);">xtitlebar -- change the name of an xterm, gnome-terminal or kde konsole </span></div><div><span style="color: rgb(51, 102, 255);">USAGE: xtitlebar [-h] &quot;string_for_titelbar&quot; </span></div><div><span style="color: rgb(51, 102, 255);">OPTIONS: -h help text </span></div><div><span style="color: rgb(51, 102, 255);">EXAMPLE: xtitlebar &quot;cvs&quot; </span></div><div><span style="color: rgb(128, 128, 0);">HELP</span></div><div><span style="color: rgb(51, 102, 255);">exit 0 </span></div><div><span style="color: rgb(51, 102, 255);">} </span></div><div><span style="color: rgb(51, 102, 255);"># in case of error or if -h is given we call the function help: </span></div><div><span style="color: rgb(51, 102, 255);">[ -z &quot;$1&quot; ] &amp;&amp; </span><span style="color: rgb(255, 102, 0);">help</span><span style="color: rgb(51, 102, 255);"> </span></div><div><span style="color: rgb(51, 102, 255);">[ &quot;$1&quot; = &quot;-h&quot; ] &amp;&amp; </span><span style="color: rgb(255, 102, 0);">help </span></div><div><span style="color: rgb(51, 102, 255);"># send the escape sequence to change the xterm titelbar: </span></div><div><span style="color: rgb(51, 102, 255);">echo $1</span></div><div><span style="color: rgb(51, 102, 255);">echo -e &quot;33]0;&quot;$1&quot;07&quot; </span></div><div><span style="color: rgb(51, 102, 255);">#</span></div><div><span style="color: rgb(0, 51, 102);">在脚本中提供帮助是一种很好的编程习惯，这样方便其他用户（和您）使用和理解脚本。命令行参数我们已经见过</span><span style="color: rgb(255, 102, 0);">$* </span><span style="color: rgb(0, 51, 102);">和</span><span style="color: rgb(255, 102, 0);"> $1, $2 ... $9</span><span style="color: rgb(0, 51, 102);"> 等特殊变量，这些特殊变量包含了用户从命令行输入的参数。迄今为止，我们仅仅了解了一些简单的命令行语法（比如一些强制性的参数和查看帮助的-h选项）。 但是在编写更复杂的程序时，您可能会发现您需要更多的自定义的选项。通常的惯例是在所有可选的参数之前加一个减号，后面再加上参数值 (比如文件名)。 有好多方法可以实现对输入参数的分析，但是下面的使用case表达式的例子无疑是一个不错的方法。 </span></div><div>文件test.sh</div><div><span style="color: rgb(51, 102, 255);">#!/bin/sh </span></div><div><span style="color: rgb(0, 0, 255);">help() </span></div><div><span style="color: rgb(51, 102, 255);">{ </span></div><div><span style="color: rgb(0, 0, 255);">cat</span><span style="color: rgb(51, 102, 255);"> </span><span style="color: rgb(255, 102, 0);">&lt;&lt;</span><span style="color: rgb(51, 102, 255);"> </span><span style="color: rgb(128, 128, 0);">HELP</span></div><div><span style="color: rgb(51, 102, 255);">This is a generic command line parser demo. </span></div><div><span style="color: rgb(51, 102, 255);">USAGE EXAMPLE: cmdparser -l hello -f somefile1 somefile2 </span></div><div><span style="color: rgb(128, 128, 0);">HELP</span></div><div><span style="color: rgb(51, 102, 255);">exit 0 </span></div><div><span style="color: rgb(51, 102, 255);">} </span></div><div><span style="color: rgb(128, 128, 0);">while [ -n &quot;$1&quot; ]; do </span></div><div><span style="color: rgb(153, 204, 0);">case</span><span style="color: rgb(51, 102, 255);"> $1 in </span></div><div><span style="color: rgb(0, 0, 255);">-h)</span><span style="color: rgb(51, 102, 255);"> help;shift 1;; # function help is called </span></div><div><span style="color: rgb(0, 0, 255);">-f)</span><span style="color: rgb(51, 102, 255);"> opt_f=1;shift 1;; # variable opt_f is set </span></div><div><span style="color: rgb(0, 0, 255);">-l)</span><span style="color: rgb(51, 102, 255);"> opt_l=$2;shift 2;; # -l takes an argument -&gt; shift by 2 </span></div><div><span style="color: rgb(0, 0, 255);">-*)</span><span style="color: rgb(51, 102, 255);"> echo &quot;error: no such option $1. -h for help&quot;;exit 1;; </span></div><div><span style="color: rgb(0, 0, 255);">*)</span><span style="color: rgb(51, 102, 255);"> break;; </span></div><div><span style="color: rgb(153, 204, 0);">esac</span><span style="color: rgb(51, 102, 255);"> </span></div><div><span style="color: rgb(128, 128, 0);">done</span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;opt_f is $opt_f&quot; </span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;opt_l is $opt_l&quot; </span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;first arg is $1&quot; </span></div><div><span style="color: rgb(51, 102, 255);">echo &quot;2nd arg is $2&quot; </span></div><div style="color: rgb(0, 51, 102);">您可以这样运行该脚本： </div><div><span style="color: rgb(51, 102, 255);">sh test.sh -l hello -f a b</span></div><div style="color: rgb(0, 51, 102);">返回的结果是： </div><div><span style="color: rgb(51, 102, 255);">opt_f is 1</span></div><div><span style="color: rgb(51, 102, 255);">opt_l is hello</span></div><div><span style="color: rgb(51, 102, 255);">first arg is a</span></div><div><span style="color: rgb(51, 102, 255);">2nd arg is b</span></div><div style="color: rgb(0, 51, 102);">这个脚本是如何工作的呢？脚本首先在所有输入命令行参数中进行循环，将输入参数</div><div style="color: rgb(0, 51, 102);">与case表达式进行比较，如果匹配则设置一个变量并且移除该参数。根据unix系统的惯例，</div><div style="color: rgb(0, 51, 102);">首先输入的应该是包含减号的参数.</div><div style="line-height: 22px;"><div><span style="font-size: 16px; line-height: 28px;">六、 </span>Here documents</div><div><span style="color: rgb(0, 51, 102);">当要将几行文字传递给一个命令时，here documents（译者注：目前还没有见到过对该词适合的翻译）</span></div><div><span style="color: rgb(0, 51, 102);">一种不错的方法。对每个脚本写一段帮助性的文字是很有用的，此时如果我们使用here documents技术</span></div></div><span style="color: rgb(0, 51, 102);"> </span><span style="line-height: 22px;"><span style="color: rgb(0, 51, 102);">就不必用echo函数一行行输出。 一个 Here document 以 </span><span style="color: rgb(255, 102, 0);">&lt;&lt;</span><span style="color: rgb(0, 51, 102);"> 开头，后面接上一个字符串(任意的)，假设是“</span><span style="color: rgb(0, 0, 255);">robin</span><span style="color: rgb(0, 51, 102);">”</span></span><div style="line-height: 22px;"><div><span style="color: rgb(0, 51, 102);">在你文本结束后，再用这个字符串(“</span><span style="color: rgb(0, 0, 255);">robin</span><span style="color: rgb(0, 51, 102);">”)追加一行，以表示文本结束。这个字符串我暂称之为</span><span style="color: rgb(0, 0, 255);">边界区分字符串</span><span style="color: rgb(0, 51, 102);">。下面是一个例子，</span></div><div><span style="color: rgb(51, 102, 255);">#!/bin/sh </span></div><div><span style="color: rgb(0, 0, 255);">cat</span><span style="color: rgb(51, 102, 255);"> </span><span style="color: rgb(255, 102, 0);">&lt;&lt;</span><span style="color: rgb(51, 102, 255);"> </span><span style="color: rgb(128, 128, 0);">HELP</span></div><div><span style="color: rgb(51, 102, 255);">ren -- renames a number of files using sed regular expressions </span></div><div><span style="color: rgb(51, 102, 255);">USAGE: ren 'regexp' 'replacement' files... </span></div><div><span style="color: rgb(51, 102, 255);">EXAMPLE: rename all *.HTM files in *.html: </span></div><div><span style="color: rgb(51, 102, 255);">ren 'HTM$' 'html' *.HTM </span></div><div><span style="color: rgb(128, 128, 0);">HELP</span></div><div><span style="color: rgb(0, 51, 102);">上面我们是选用HELP作为边界区分字符串的。其实我们也可以使用任意的字符串，比如robin，那么上例将变成如下：</span></div></div><div style="line-height: 22px;"><div style="color: rgb(0, 51, 102);">#!/bin/sh </div><div><span style="color: rgb(0, 0, 255);">cat</span><span style="color: rgb(0, 51, 102);"> </span><span style="color: rgb(255, 102, 0);">&lt;&lt;</span><span style="color: rgb(128, 128, 0);"> robin</span></div><div><span style="color: rgb(51, 102, 255);">ren -- renames a number of files using sed regular expressions </span></div><div><span style="color: rgb(51, 102, 255);">USAGE: ren 'regexp' 'replacement' files... </span></div><div><span style="color: rgb(51, 102, 255);">EXAMPLE: rename all *.HTM files in *.html: </span></div><div><span style="color: rgb(51, 102, 255);">ren 'HTM$' 'html' *.HTM </span></div><div><span style="color: rgb(128, 128, 0);">robin</span></div></div><div style="line-height: 22px;"><span style="line-height: 25px;"><span style="font-size: 16px; line-height: 28px;">七、</span>调试</span></div><div style="line-height: 22px; color: rgb(0, 51, 102);">最简单的调试命令当然是使用echo命令。您可以使用echo在任何怀疑出错的地方打印任何变量值。这也是绝大多数的shell程序员要花费80%的时间来调试程序的原因。Shell程序的好处在于不需要重新编译，插入一个echo命令也不需要多少时间。 </div><div style="line-height: 22px;"><span style="color: rgb(0, 0, 128); line-height: 25px;">shell也有一个真实的调试模式。如果在脚本中有错误，您可以这样来进行调试： </span></div><div style="line-height: 22px;"><span style="color: rgb(0, 0, 255); line-height: 25px;">sh -x test.sh</span></div><div style="line-height: 22px;"><span style="color: rgb(0, 0, 128); line-height: 25px;">这将执行该脚本并显示所有变量的值。 </span></div><div style="line-height: 22px;"><span style="color: rgb(0, 0, 128); line-height: 25px;">shell还有一个不需要执行脚本只是检查语法的模式。可以这样使用：</span><span style="line-height: 25px; color: rgb(0, 51, 102);"> </span></div><div style="line-height: 22px;"><span style="color: rgb(0, 0, 255); line-height: 25px;">sh -n test,sh</span></div><div style="line-height: 22px;"><span style="color: rgb(0, 0, 128); line-height: 25px;">这将返回所有语法错误</span></div></div><div style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255); line-height: 25px;"><span style="line-height: 1.3em;"><span style="line-height: 25px;"><span style="font-size: 16px; line-height: 28px;">八、 Shell基本命令</span></span></span><br/><span style="color: rgb(0, 51, 102);"><span style="line-height: 1.3em;">在shell脚本中可以使用任意的unix/linux命令，但是还是由一些相对更常用的命令。这些命令通常是用来</span><br/></span></div><div style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255); line-height: 25px;"><span style="line-height: 1.3em;">进行文件和文字操作的。</span></div><div style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255); line-height: 25px;"><span style="color: rgb(0, 51, 102);"><span style="line-height: 1.3em;">关于linux命令的详细内容请参考《</span></span><strong><a href="http://hubingforever.blog.163.com/blog/static/17104057920117184214950/" style="color: rgb(207, 121, 28); text-decoration: none;" target="_blank" title="阅读全文">Linux命令简介</a></strong><span style="line-height: 18px; color: rgb(0, 51, 102);">》 </span></div><div style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255); line-height: 25px;"><span style="line-height: 1.3em;"><span style="color: rgb(0, 0, 128); line-height: 25px;">常用命令语法及功能 </span></span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">echo</span><span style="color: rgb(51, 102, 255); line-height: 25px;"> &quot;some text&quot;: 将文字内容打印在屏幕上 </span></span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">ls:</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);"> 文件列表 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">wc –l filewc</span><span style="color: rgb(51, 102, 255); line-height: 25px;">或</span><span style="color: rgb(255, 102, 0); line-height: 25px;">-w filewc</span><span style="color: rgb(51, 102, 255); line-height: 25px;">或</span><span style="color: rgb(255, 102, 0); line-height: 25px;">-c file</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 计算文件行数；计算文件中的单词数；计算文件中的字符数 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">cp sourcefile destfile:</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);"> 文件拷贝 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">mv oldname newname</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);"> : 重命名文件或移动文件 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">rm file</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 删除文件 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">grep 'pattern' file</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 在文件内搜索字符串比如：grep 'searchstring' file.txt </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">cut -b colnum file</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 指定欲显示的文件内容范围，并将它们输出到标准输出设备比如：输出</span><br/><span style="line-height: 1.3em; color: rgb(51, 102, 255);">每行第5个到第9个字符cut -b5-9 file.txt</span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">cat file.txt</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 输出文件内容到标准输出设备（屏幕）上 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">file somefile</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 得到文件类型 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">read var</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 提示用户输入，并将输入赋值给变量 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">sort file.txt</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 对file.txt文件中的行进行排序 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">uniq</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 删除文本文件中出现的行列比如： sort file.txt | uniq </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">expr</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 进行数学运算Example: add 2 and 3expr 2 &quot;+&quot; 3 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">find</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 搜索文件比如：根据文件名搜索find . -name filename -print </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">tee:</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);"> 将数据输出到标准输出设备(屏幕) 和文件比如：somecommand | tee outfile </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">basename file</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 返回不包含路径的文件名比如： basename /bin/tux将返回 tux </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">dirname file</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 返回文件所在路径比如：dirname /bin/tux将返回 /bin </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">head file</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: 打印文本文件开头几行 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">tail file</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);"> : 打印文本文件末尾几行 </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">sed:</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);"> Sed是一个基本的查找替换程序。可以从标准输入（比如命令管道）读入文本，并将</span><br/><span style="line-height: 1.3em; color: rgb(51, 102, 255);">结果输出到标准输出（屏幕）。该命令采用正则表达式（见参考）进行搜索。 </span><br/><span style="line-height: 1.3em; color: rgb(51, 102, 255);">不要和shell中的通配符相混淆。比如：将linuxfocus 替换为 </span><br/><span style="line-height: 1.3em; color: rgb(51, 102, 255);">LinuxFocus ：cat text.file | sed 's/linuxfocus/LinuxFocus/' &gt; newtext.file </span><br/><span style="line-height: 1.3em;"><span style="color: rgb(255, 102, 0); line-height: 25px;">awk</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);">: </span><span style="line-height: 1.3em;"><span style="color: rgb(0, 0, 255); line-height: 25px;">awk</span></span><span style="line-height: 1.3em; color: rgb(51, 102, 255);"> 用来从文本文件中提取字段。缺省地，字段分割符是空格，可以使用-F指定其他分割符。</span><br/><span style="line-height: 1.3em; color: rgb(51, 102, 255);">cat file.txt | awk -F, '{print $1 &quot;,&quot; $3 }'这里我们使用，作为字段分割符，同时打印</span><br/><span style="line-height: 1.3em; color: rgb(51, 102, 255);">第一个和第三个字段。如果该文件内容如下： Adam Bor, 34, IndiaKerry Miller, 22, USA</span><br/><span style="line-height: 1.3em; color: rgb(51, 102, 255);">命令输出结果为：Adam Bor, IndiaKerry Miller</span></div></span>
</div></body></html> 