<html>
<head>
  <title>CentOS下安装系统监控工具OrzDBA</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1298"/>
<h1>CentOS下安装系统监控工具OrzDBA</h1>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px"><div style="font-family:sans-serif;"><div style="font-family:&quot;PT Serif&quot;, STZhongsong, , &quot;Microsoft Yahei&quot;, serif, Verdana, sans-serif;font-size:16px;line-height:2;color:rgb(85, 85, 85);background:rgb(255, 255, 255);"><div><span><div><div><div><div><div style="opacity:1;transform:translateY(0px);">

    
      <div style="display:block;">

        
        
          <h1 style="margin:20px 0px 10px;padding:0px;line-height:1.5;font-family:Georgia, sans, &quot;PT Serif&quot;, STZhongsong, , &quot;Microsoft Yahei&quot;, serif, Verdana, sans-serif;font-size:26px;font-weight:400;text-align:center;word-break:break-word;position:relative;"><span style="font-size:26px;font-weight:400;line-height:1.5;font-family:Georgia, sans, &quot;PT Serif&quot;, STZhongsong, , &quot;Microsoft Yahei&quot;, serif, Verdana, sans-serif;text-align:center;display:none;"></span>
            
            
              
                CentOS下安装系统监控工具OrzDBA
              
            
          </h1>
        

        <div style="margin:3px 0px 60px;color:rgb(153, 153, 153);font-family:华文中宋, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:12px;text-align:center;margin-top:5px;margin-bottom:60px;">
          <span>
            
            <span>发表于</span>
            <span>
              2016-05-10
            </span>
          </span>

          
            <span>
                |  
              
              <span>分类于</span>
              
                <span>
                  <a href="http://www.hi-linux.com/categories/MySQL/" rel="index" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);">
                    <span>MySQL</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span>
                  |  
                <a href="http://www.hi-linux.com/2016/05/10/CentOS%E4%B8%8B%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7OrzDBA/#comments" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);">
                  <span>暂无评论</span>
                </a>
              </span>
            
          

          

          
          
             <span>
                 |  
               
               <span>阅读次数 </span>
               <span>129</span>
              </span>
          

        </div>
      </div>
    


    <div style="font-family:华文中宋, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;">

      
      

      
        <p style="margin:0px 0px 25px;">OrzDBA是淘宝DBA团队发布的监控脚本，使用perl开发，可以完成对linux系统和MySql相关指标的实时监控。</p>
<p style="margin:0px 0px 25px;">MYSQL这些监控指标的来源和mysqlreport等工具类似，都是通过<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">show variables</code>列出经常关注的核心变量，通过<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">show global status</code>列出相关MYSQL状态信息。这个监控工具比较有特色，把系统信息和数据库信息一起监控，就是安装有点麻烦。</p>
<p style="margin:0px 0px 25px;">项目地址：<a href="http://code.taobao.org/p/orzdba/src/trunk/" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);" target="_blank">http://code.taobao.org/p/orzdba/src/trunk/</a></p>
<a style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);"></a>
<h3 style="margin:20px 0px 10px;padding:0px;font-weight:bold;line-height:1.5;font-family:Georgia, sans, &quot;PT Serif&quot;, STZhongsong, , &quot;Microsoft Yahei&quot;, serif, Verdana, sans-serif;font-size:20px;padding-top:10px;"><a href="http://www.hi-linux.com/2016/05/10/CentOS%E4%B8%8B%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7OrzDBA/#安装" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);" title="安装"></a>安装</h3><p style="margin:0px 0px 25px;">使用SVN下载OrzDBA的项目，其中包含了文档和依赖的包文件。</p>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">下载源码</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ svn co http://code.taobao.org/svn/orzdba/trunk</span><br/><span style="height:20px;">$ chmod +x orzdba</span><br/><span style="height:20px;">$ cp orzdba  /usr/bin/orzdba</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">安装tcprstat</strong></p>
<p style="margin:0px 0px 25px;">orzdba依赖于tcprstat，需先安装tcprstat。</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ wget http://github.com/downloads/Lowercases/tcprstat/tcprstat-static.v0.3.1.x86_64</span><br/><span style="height:20px;">$ cp tcprstat-static.v0.3.1.x86_64 /usr/bin/tcprstat</span><br/><span style="height:20px;">$ chmod u+sx /usr/bin/tcprstat</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">编辑orzdba源码</p>
<p style="margin:0px 0px 25px;">在源码162行左右把/usr/bin/tcprstat加入默认读取的位置</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ vim orzdba</span><br/><span style="height:20px;"></span><br/><span style="height:20px;">my $TCPRSTAT = &quot;/usr/bin/tcprstat --no-header -t 1 -n 0 -p $port&quot;;</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">安装的perl依赖包</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ yum install perl-Test-Simple.x86_64 perl-Time-HiRes perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker perl-DBD-MySQL perl-DBI</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">安装version模块</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/><span style="height:20px;">4</span><br/><span style="height:20px;">5</span><br/><span style="height:20px;">6</span><br/><span style="height:20px;">7</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ wget http://search.cpan.org/CPAN/authors/id/J/JP/JPEACOCK/version-0.99.tar.gz</span><br/><span style="height:20px;">$ tar -zxvf version-0.99.tar.gz</span><br/><span style="height:20px;">$ cd version-0.99</span><br/><span style="height:20px;">$ perl Makefile.PL</span><br/><span style="height:20px;">$ make </span><br/><span style="height:20px;">$ make test</span><br/><span style="height:20px;">$ make install</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">安装Module-Build模块</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/><span style="height:20px;">4</span><br/><span style="height:20px;">5</span><br/><span style="height:20px;">6</span><br/><span style="height:20px;">7</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ wget http://search.cpan.org/CPAN/authors/id/K/KW/KWILLIAMS/Module-Build-0.31.tar.gz </span><br/><span style="height:20px;">$ tar -zxvf Module-Build-0.31.tar.gz </span><br/><span style="height:20px;">$ cd Module-Build-0.31 </span><br/><span style="height:20px;">$ perl Build.PL </span><br/><span style="height:20px;">$ ./Build </span><br/><span style="height:20px;">$ ./Build test </span><br/><span style="height:20px;">$ ./Build install</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">安装File::Lockfile模块</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/><span style="height:20px;">4</span><br/><span style="height:20px;">5</span><br/><span style="height:20px;">6</span><br/><span style="height:20px;">7</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ wget http://search.cpan.org/CPAN/authors/id/G/GL/GLORYBOX/File-Lockfile-v1.0.5.tar.gz</span><br/><span style="height:20px;">$ tar -zxvf File-Lockfile-v1.0.5.tar.gz </span><br/><span style="height:20px;">$ cd File-Lockfile-v1.0.5 </span><br/><span style="height:20px;">$ perl Build.PL</span><br/><span style="height:20px;">$ perl ./Build</span><br/><span style="height:20px;">$ perl ./Build test</span><br/><span style="height:20px;">$ perl ./Build install</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">安装Class-Data-Inheritable模块</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/><span style="height:20px;">4</span><br/><span style="height:20px;">5</span><br/><span style="height:20px;">6</span><br/><span style="height:20px;">7</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ wget http://search.cpan.org/CPAN/authors/id/T/TM/TMTM/Class-Data-Inheritable-0.08.tar.gz</span><br/><span style="height:20px;">$ tar -zxvf Class-Data-Inheritable-0.08.tar.gz </span><br/><span style="height:20px;">$ cd Class-Data-Inheritable-0.08 </span><br/><span style="height:20px;">$ perl Makefile.PL </span><br/><span style="height:20px;">$ make </span><br/><span style="height:20px;">$ make test </span><br/><span style="height:20px;">$ make install</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">安装完如提示：<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">Usage: Socket::inet_ntoa(ip_address_sv) at ./orz line 477</code>，因主机名不能解析，需要将IP和主机名写到<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">/etc/hosts</code>文件。</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ vi /etc/hosts</span><br/><span style="height:20px;">127.0.0.1   mike</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">注:SVN中签出包含一个<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">orzdba_rt_depend_perl_module.tar.gz</code>文件，这个文件也包含以上4个PERL模块的源代码。</p>
<h3 style="margin:20px 0px 10px;padding:0px;font-weight:bold;line-height:1.5;font-family:Georgia, sans, &quot;PT Serif&quot;, STZhongsong, , &quot;Microsoft Yahei&quot;, serif, Verdana, sans-serif;font-size:20px;padding-top:10px;"><a href="http://www.hi-linux.com/2016/05/10/CentOS%E4%B8%8B%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7OrzDBA/#配置" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);" title="配置"></a>配置</h3><p style="margin:0px 0px 25px;">配置登陆密码</p>
<p style="margin:0px 0px 25px;">在代码的160行左右，配置自己的MySQL验证信息：<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">username</code>、<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">password</code>、<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">socket</code>、<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">host</code>、<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">port</code></p>
<p style="margin:0px 0px 25px;">MYSQL 5.6以下</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ grep -n 'my $MYSQL' orzdba</span><br/><span style="height:20px;">160:my $MYSQL    = qq{mysql -s --skip-column-names -uroot -pyoon -h127.0.0.1 -P$port };</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">MYSQL 5.6以上</p>
<p style="margin:0px 0px 25px;">密码安全问题解决</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ mysql -uroot -p'xxxxx' -s</span><br/><span style="height:20px;">Warning: Using a password on the command line interface can be insecure.</span><br/><span style="height:20px;">(db)root@localhost [(none)]&gt;</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">MySQL加强了密码安全，如果在命令行输入密码，会出现这个警告。但这个警告会影响orzdba展示页面，解决这个烦人的警告可以通过下面两个方法</p>
<ul style="list-style:none;">
<li style="list-style:circle;"><p style="margin:0px 0px 25px;">把数据库密码写到my.cnf配置文件里面</p>
</li>
<li style="list-style:circle;"><p style="margin:0px 0px 25px;">同样利用mysql5.6的新特性<code style="font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;padding:2px 4px;word-break:break-all;color:rgb(85, 85, 85);border-radius:4px;background:rgb(238, 238, 238);">mysql_config_edit</code>可以用来加密用户的密码，消除警告(推荐)</p>
</li>
</ul>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/><span style="height:20px;">4</span><br/><span style="height:20px;">5</span><br/><span style="height:20px;">6</span><br/><span style="height:20px;">7</span><br/><span style="height:20px;">8</span><br/><span style="height:20px;">9</span><br/><span style="height:20px;">10</span><br/><span style="height:20px;">11</span><br/><span style="height:20px;">12</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ mysql_config_editor set --login-path=login --user=root --password</span><br/><span style="height:20px;">$ mysql_config_editor print --all</span><br/><span style="height:20px;">[login] </span><br/><span style="height:20px;">user = root </span><br/><span style="height:20px;">password = *****</span><br/><span style="height:20px;">host = localhost</span><br/><span style="height:20px;"></span><br/><span style="height:20px;">#加密过后的文件是二进制文件不能够直接读出</span><br/><span style="height:20px;">$ cat .mylogin.cnf    </span><br/><span style="height:20px;">  §Z[root@ ~]# ???=s??μ¤??￠ A^Z??o????~  </span><br/><span style="height:20px;">$ mysql --login-path=login -s</span><br/><span style="height:20px;">(db)root@localhost [(none)]&gt;</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">修改orzdba</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/><span style="height:20px;">4</span><br/><span style="height:20px;">5</span><br/><span style="height:20px;">6</span><br/><span style="height:20px;">7</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ vim orzdba</span><br/><span style="height:20px;"></span><br/><span style="height:20px;">#找到160行</span><br/><span style="height:20px;">gg 160</span><br/><span style="height:20px;">my $MYSQL    = qq{mysql -s --skip-column-names -uroot -P$port };</span><br/><span style="height:20px;">修改为</span><br/><span style="height:20px;">my $MYSQL    = qq{mysql --login-path=login -s --skip-column-names };</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">保存， 大功告成。</p>
<h3 style="margin:20px 0px 10px;padding:0px;font-weight:bold;line-height:1.5;font-family:Georgia, sans, &quot;PT Serif&quot;, STZhongsong, , &quot;Microsoft Yahei&quot;, serif, Verdana, sans-serif;font-size:20px;padding-top:10px;"><a href="http://www.hi-linux.com/2016/05/10/CentOS%E4%B8%8B%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7OrzDBA/#使用" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);" title="使用"></a>使用</h3><p style="margin:0px 0px 25px;">使用方法可用帮助命令查看</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/><span style="height:20px;">2</span><br/><span style="height:20px;">3</span><br/><span style="height:20px;">4</span><br/><span style="height:20px;">5</span><br/><span style="height:20px;">6</span><br/><span style="height:20px;">7</span><br/><span style="height:20px;">8</span><br/><span style="height:20px;">9</span><br/><span style="height:20px;">10</span><br/><span style="height:20px;">11</span><br/><span style="height:20px;">12</span><br/><span style="height:20px;">13</span><br/><span style="height:20px;">14</span><br/><span style="height:20px;">15</span><br/><span style="height:20px;">16</span><br/><span style="height:20px;">17</span><br/><span style="height:20px;">18</span><br/><span style="height:20px;">19</span><br/><span style="height:20px;">20</span><br/><span style="height:20px;">21</span><br/><span style="height:20px;">22</span><br/><span style="height:20px;">23</span><br/><span style="height:20px;">24</span><br/><span style="height:20px;">25</span><br/><span style="height:20px;">26</span><br/><span style="height:20px;">27</span><br/><span style="height:20px;">28</span><br/><span style="height:20px;">29</span><br/><span style="height:20px;">30</span><br/><span style="height:20px;">31</span><br/><span style="height:20px;">32</span><br/><span style="height:20px;">33</span><br/><span style="height:20px;">34</span><br/><span style="height:20px;">35</span><br/><span style="height:20px;">36</span><br/><span style="height:20px;">37</span><br/><span style="height:20px;">38</span><br/><span style="height:20px;">39</span><br/><span style="height:20px;">40</span><br/><span style="height:20px;">41</span><br/><span style="height:20px;">42</span><br/><span style="height:20px;">43</span><br/><span style="height:20px;">44</span><br/><span style="height:20px;">45</span><br/><span style="height:20px;">46</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ orzdba -h</span><br/><span style="height:20px;">==========================================================================================</span><br/><span style="height:20px;">Info  :</span><br/><span style="height:20px;">        Created By zhuxu@taobao.com</span><br/><span style="height:20px;">Usage :</span><br/><span style="height:20px;">Command line options :</span><br/><span style="height:20px;"></span><br/><span style="height:20px;">   -h,--help           Print Help Info. </span><br/><span style="height:20px;">   -i,--interval       Time(second) Interval.  </span><br/><span style="height:20px;">   -C,--count          Times. </span><br/><span style="height:20px;">   -t,--time           Print The Current Time.</span><br/><span style="height:20px;">   -nocolor            Print NO Color.</span><br/><span style="height:20px;"></span><br/><span style="height:20px;">   -l,--load           Print Load Info.</span><br/><span style="height:20px;">   -c,--cpu            Print Cpu  Info.</span><br/><span style="height:20px;">   -s,--swap           Print Swap Info.</span><br/><span style="height:20px;">   -d,--disk           Print Disk Info.</span><br/><span style="height:20px;">   -n,--net            Print Net  Info.</span><br/><span style="height:20px;"></span><br/><span style="height:20px;">   -P,--port           Port number to use for mysql connection(default 3306).</span><br/><span style="height:20px;">   -S,--socket         Socket file to use for mysql connection.</span><br/><span style="height:20px;"></span><br/><span style="height:20px;">   -com                Print MySQL Status(Com_select,Com_insert,Com_update,Com_delete).</span><br/><span style="height:20px;">   -hit                Print Innodb Hit%.</span><br/><span style="height:20px;">   -innodb_rows        Print Innodb Rows Status(Innodb_rows_inserted/updated/deleted/read).</span><br/><span style="height:20px;">   -innodb_pages       Print Innodb Buffer Pool Pages Status(Innodb_buffer_pool_pages_data/free/dirty/flushed)</span><br/><span style="height:20px;">   -innodb_data        Print Innodb Data Status(Innodb_data_reads/writes/read/written)</span><br/><span style="height:20px;">   -innodb_log         Print Innodb Log  Status(Innodb_os_log_fsyncs/written)</span><br/><span style="height:20px;">   -innodb_status      Print Innodb Status from Command: 'Show Engine Innodb Status'</span><br/><span style="height:20px;">                       (history list/ log unflushed/uncheckpointed bytes/ read views/ queries inside/queued)</span><br/><span style="height:20px;">   -T,--threads        Print Threads Status(Threads_running,Threads_connected,Threads_created,Threads_cached).</span><br/><span style="height:20px;">   -rt                 Print MySQL DB RT(us).</span><br/><span style="height:20px;">   -B,--bytes          Print Bytes received from/send to MySQL(Bytes_received,Bytes_sent).</span><br/><span style="height:20px;"></span><br/><span style="height:20px;">   -mysql              Print MySQLInfo (include -t,-com,-hit,-T,-B).</span><br/><span style="height:20px;">   -innodb             Print InnodbInfo(include -t,-innodb_pages,-innodb_data,-innodb_log,-innodb_status)</span><br/><span style="height:20px;">   -sys                Print SysInfo   (include -t,-l,-c,-s).</span><br/><span style="height:20px;">   -lazy               Print Info      (include -t,-l,-c,-s,-com,-hit). </span><br/><span style="height:20px;"></span><br/><span style="height:20px;">   -L,--logfile        Print to Logfile.</span><br/><span style="height:20px;">   -logfile_by_day     One day a logfile,the suffix of logfile is 'yyyy-mm-dd';</span><br/><span style="height:20px;">                       and is valid with -L.</span><br/><span style="height:20px;"></span><br/><span style="height:20px;">Sample :</span><br/><span style="height:20px;">   shell&gt; nohup ./orzdba -lazy -d sda -C 5 -i 2 -L /tmp/orzdba.log  &gt; /dev/null 2&gt;&amp;1 &amp;</span><br/><span style="height:20px;">==========================================================================================</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">监控系统和MYSQL各项指标</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ orzdba  -lazy -rt -S /var/lib/mysql/mysql.sock</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><a href="http://www.imike.me/img/linux/orzdba1.png" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);"><img src="CentOS下安装系统监控工具OrzDBA_files/orzdba1.png" type="image/png" data-filename="orzdba1.png" alt="" height="694" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="892"/></a></p>
<blockquote style="margin:0px;padding:0px 15px;color:rgb(102, 102, 102);border-left:4px solid rgb(221, 221, 221);">
<p style="margin:0px 0px 25px;">count：此间隔内完成的请求数量<br/>avg：此间隔内所有完成的请求，响应的平均时间<br/>95_avg：此间隔内95%的请求量的平均响应时间(单位微秒)，该值较能体现MySQL Server查询的平均响应时间</p>
</blockquote>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">监控InnoDB的各项指标</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ orzdba -innodb -S /var/lib/mysql/mysql.sock</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">文档中给出[innodb请求命中率]的计算公式为</p>
<blockquote style="margin:0px;padding:0px 15px;color:rgb(102, 102, 102);border-left:4px solid rgb(221, 221, 221);">
<p style="margin:0px 0px 25px;">Hit% =<br/>(Innodb_buffer_pool_read_requests - Innodb_buffer_pool_reads)<br/>/ Innodb_buffer_pool_read_requests * 100%</p>
</blockquote>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">监控MySQL Server性能</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ orzdba -mysql -S /var/lib/mysql/mysql.sock</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><a href="http://www.imike.me/img/linux/orzdba2.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);"><img src="CentOS下安装系统监控工具OrzDBA_files/orzdba2.jpg" type="image/jpeg" data-filename="orzdba2.jpg" alt="" height="588" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="843"/></a></p>
<p style="margin:0px 0px 25px;">显示出数据库常用变量值、insert/update/delete/select的统计值、innodb请求命中率、线程状态、mysql收发字节数</p>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">Linux系统信息的监控</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ orzdba -sys</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><a href="http://www.imike.me/img/linux/orzdba3.png" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);"><img src="CentOS下安装系统监控工具OrzDBA_files/orzdba3.png" type="image/png" data-filename="orzdba3.png" alt="" height="561" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="669"/></a></p>
<p style="margin:0px 0px 25px;">显示出了当前负载状况、CPU使用状况、swap状况</p>
<p style="margin:0px 0px 25px;"><strong style="font-weight:bold;">查询数据库节点主机cpu,每两秒显示一次，共显示10次，将结果放到cpu.log中</strong></p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:15px;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);"><table style="border-spacing:0px;font-size:14px;font-style:inherit;font-variant:inherit;border-collapse:collapse;font-weight:inherit;table-layout:fixed;word-wrap:break-word;margin:0px;border:none;width:auto;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="color:rgb(102, 102, 102);overflow:auto;font-size:13px;background:rgb(0, 0, 0);line-height:1.6;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;padding:1px;margin:0px;border:none;text-align:right;padding-right:20px;"><span style="height:20px;">1</span><br/></pre></td><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;padding:0px;border:none;"><pre style="overflow:auto;font-family:&quot;Source Code Pro&quot;, Consolas, Monaco, Menlo, monospace, , &quot;Input Mono&quot;, &quot;PT Mono&quot;;font-size:13px;color:rgb(234, 234, 234);line-height:1.6;background:rgb(0, 0, 0);margin:0px;padding:1px;border:none;"><span style="height:20px;">$ orzdba -c -i 2 -C 10 -L cpu.log</span><br/></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;"><a href="http://www.imike.me/img/linux/orzdba4.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);"><img src="CentOS下安装系统监控工具OrzDBA_files/orzdba4.jpg" type="image/jpeg" data-filename="orzdba4.jpg" alt="" height="336" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="559"/></a></p>
<h3 style="margin:20px 0px 10px;padding:0px;font-weight:bold;line-height:1.5;font-family:Georgia, sans, &quot;PT Serif&quot;, STZhongsong, , &quot;Microsoft Yahei&quot;, serif, Verdana, sans-serif;font-size:20px;padding-top:10px;"><a href="http://www.hi-linux.com/2016/05/10/CentOS%E4%B8%8B%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7OrzDBA/#参考文档" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);" title="参考文档"></a>参考文档</h3><p style="margin:0px 0px 25px;"><a href="http://www.google.com/" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);" target="_blank">http://www.google.com</a><br/><a href="http://code.taobao.org/p/orzdba/src/trunk/" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);" target="_blank">http://code.taobao.org/p/orzdba/src/trunk/</a><br/><a href="http://blog.itpub.net/15480802/viewspace-1425464" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);" target="_blank">http://blog.itpub.net/15480802/viewspace-1425464</a><br/><a href="http://blog.itpub.net/28939273/viewspace-1875895/" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);" target="_blank">http://blog.itpub.net/28939273/viewspace-1875895/</a><br/><a href="http://blog.csdn.net/dba_waterbin/article/details/12970675" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);" target="_blank">http://blog.csdn.net/dba_waterbin/article/details/12970675</a></p>

      
    </div>
    
    <div>
      
        
<div style="display:block； padding: 10px 0;margin:20px auto;width:100%;text-align:center;">
    <a href="http://www.hi-linux.com/img/donate/wechatqcode.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);"><img src="CentOS下安装系统监控工具OrzDBA_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" alt="Mike wechat" height="200" style="border:0px;display:block;margin:0px auto;max-width:100%;height:auto;width:200px;" width="200"/></a>
    <div>更多精彩内容，请关注微信公众号Hi-Linux，第一时间推送给您!</div>
</div>

      
    </div>

    <div>
      
        
      
    </div>

    <div style="display:block;">
      
        <div style="margin-top:40px;text-align:left;">
          
            <a href="http://www.hi-linux.com/tags/Linux/" rel="tag" style="color:rgb(85, 85, 85);text-decoration:none;word-wrap:break-word;border-bottom:none;display:inline-block;margin-right:10px;font-size:13px;padding:1px 5px;background:rgb(245, 245, 245);">#Linux</a>
          
            <a href="http://www.hi-linux.com/tags/MySQL/" rel="tag" style="color:rgb(85, 85, 85);text-decoration:none;word-wrap:break-word;border-bottom:none;display:inline-block;margin-right:10px;font-size:13px;padding:1px 5px;background:rgb(245, 245, 245);">#MySQL</a>
          
        </div>
      

      
        <div style="overflow:hidden;padding:10px;white-space:nowrap;border-top:1px solid rgb(238, 238, 238);margin-top:40px;">
          <div style="display:inline-block;width:50%;white-space:normal;">
            
              <a href="http://www.hi-linux.com/2016/05/09/CentOS%E4%B8%8B%E6%90%AD%E5%BB%BAAria2%E8%BF%9C%E7%A8%8B%E4%B8%8B%E8%BD%BD%E7%8E%AF%E5%A2%83/" rel="next" style="background-color:transparent;text-decoration:none;word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);color:rgb(85, 85, 85);border-bottom:none;position:relative;display:inline-block;line-height:25px;font-size:14px;" title="CentOS下搭建Aria2远程下载环境">
                <i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;text-rendering:auto;-webkit-font-smoothing:antialiased;font-size:12px;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:12px;"></span></i> CentOS下搭建Aria2远程下载环境
              </a>
            
          </div>

          <div style="display:inline-block;width:50%;white-space:normal;text-align:right;">
            
              <a href="http://www.hi-linux.com/2016/05/12/%E5%A6%82%E4%BD%95%E7%94%A8httpie%E6%9B%B4%E9%AB%98%E6%95%88%E7%9A%84%E8%B0%83%E8%AF%95%E6%8E%A5%E5%8F%A3/" rel="prev" style="background-color:transparent;text-decoration:none;word-wrap:break-word;border-bottom-color:rgb(204, 204, 204);color:rgb(85, 85, 85);border-bottom:none;position:relative;display:inline-block;line-height:25px;font-size:14px;" title="如何用httpie更高效的调试接口">
                如何用httpie更高效的调试接口 <i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;text-rendering:auto;-webkit-font-smoothing:antialiased;font-size:12px;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:12px;"></span></i>
              </a>
            
          </div>
        </div>
      

      
      
    </div>
  </div></div></div></div></div></span></div></div></div></div><br/></div></span>
</div></body></html> 