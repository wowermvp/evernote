<html>
<head>
  <title>每天一个linux命令（49）：at命令 - peida - 博客园</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1933"/>
<h1>每天一个linux命令（49）：at命令 - peida - 博客园</h1>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/><div style="position: relative; max-width: 1067px;"><div style="font-size: 16px"><div style="font-family:Verdana, Arial, Helvetica, sans-serif;color:rgb(51, 51, 51);font-size:10pt;line-height:1.8;background:rgb(255, 255, 255);"><div><h1 style="margin:20px 0px 10px;padding:0px;font-weight:bold;color:rgb(0, 0, 0);border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(221, 221, 221);font-size:14px;"><a href="http://www.cnblogs.com/peida/archive/2013/01/05/2846152.html" style="margin:0px;padding:0px;text-decoration:none;color:rgb(51, 51, 51);">每天一个linux命令（49）：at命令</a></h1><div style="margin:0px;padding:0px;"><div style="margin:0px;padding:0px;margin-bottom:20px;"><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">在windows系统中，windows提供了计划任务这一功能，在控制面板 -&gt; 性能与维护 -&gt; 任务计划， 它的功能就是安排自动运行的任务。 通过'添加任务计划'的一步步引导，则可建立一个定时执行的任务。</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">在linux系统中你可能已经发现了为什么系统常常会自动的进行一些任务？这些任务到底是谁在支配他们工作的？在linux系统如果你想要让自己设计的备份程序可以自动在某个时间点开始在系统底下运行，而不需要手动来启动它，又该如何处置呢？ 这些例行的工作可能又分为一次性定时工作与循环定时工作，在系统内又是哪些服务在负责？ 还有，如果你想要每年在老婆的生日前一天就发出一封信件提醒自己不要忘记，linux系统下该怎么做呢？ </span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">今天我们主要学习一下一次性定时计划任务的at命令的用法！</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'Times New Roman';">1．</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">命令格式：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">at[参数][时间]</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'Times New Roman';">2．</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">命令功能：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">在一个指定的时间执行一个指定任务，只能执行一次，且需要开启atd进程（</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">ps -ef | grep atd查看， 开启用/etc/init.d/atd start or restart； 开机即启动则需要运行</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">chkconfig --level 2345 atd on）</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">。</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'Times New Roman';">3．</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">命令参数：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">-m 当指定的任务被完成之后，将给用户发送邮件，即使没有标准输出</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">-I atq的别名</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">-d atrm的别名</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">-v 显示任务将被执行的时间</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">-c 打印任务的内容到标准输出</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">-V 显示版本信息</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">-q&lt;列队&gt; 使用指定的列队</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">-f&lt;文件&gt; 从指定文件读入任务而不是从标准输入读入</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">-t&lt;时间参数&gt; 以时间参数的形式提交要运行的任务 </span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">at允许使用一套相当复杂的指定时间的方法。他能够接受在当天的hh:mm（小时:分钟）式的时间指定。假如该时间已过去，那么就放在第二天执行。当然也能够使用midnight（深夜），noon（中午），teatime（饮茶时间，一般是下午4点）等比较模糊的 词语来指定时间。用户还能够采用12小时计时制，即在时间后面加上AM（上午）或PM（下午）来说明是上午还是下午。 也能够指定命令执行的具体日期，指定格式为month day（月 日）或mm/dd/yy（月/日/年）或dd.mm.yy（日.月.年）。指定的日期必须跟在指定时间的后面。 上面介绍的都是绝对计时法，其实还能够使用相对计时法，这对于安排不久就要执行的命令是很有好处的。指定格式为：now + count time-units ，now就是当前时间，time-units是时间单位，这里能够是minutes（分钟）、hours（小时）、days（天）、weeks（星期）。count是时间的数量，究竟是几天，还是几小时，等等。 更有一种计时方法就是直接使用today（今天）、tomorrow（明天）来指定完成命令的时间。</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">TIME：时间格式，这里可以定义出什么时候要进行 at 这项任务的时间，格式有：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">HH:MM</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">ex&gt; 04:00</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">在今日的 HH:MM 时刻进行，若该时刻已超过，则明天的 HH:MM 进行此任务。</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">HH:MM YYYY-MM-DD</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">ex&gt; 04:00 2009-03-17</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">强制规定在某年某月的某一天的特殊时刻进行该项任务</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">HH:MM[am|pm] [Month] [Date]</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">ex&gt; 04pm March 17</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">也是一样，强制在某年某月某日的某时刻进行该项任务</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">HH:MM[am|pm] + number [minutes|hours|days|weeks]</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">ex&gt; now + 5 minutes</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">ex&gt; 04pm + 3 days</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">就是说，在某个时间点再加几个时间后才进行该项任务。</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'Times New Roman';">4．</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">使用实例：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">实例1：</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'Times New Roman';">三天后的下午 5 点锺执行 /bin/ls</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">命令：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'Times New Roman';">at 5pm+3 days</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">输出：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">at 5pm+3 days</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">at&gt; /bin/</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">ls</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">at</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">&gt; &lt;EOT&gt;</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">job </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">7 at 2013-01-08 17:00</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">说明：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">实例2：</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">明天17点钟，输出时间到指定文件内</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">命令：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'Times New Roman';">at 17:20 tomorrow</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">输出：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">at 17:20 tomorrow</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">at&gt; date &gt;/root/2013</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">.log         </span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">at</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">&gt; &lt;EOT&gt;</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">job </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">8 at 2013-01-06 17:20</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">说明：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">实例</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">3</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">：</span><span style="margin:0px;padding:0px;font-weight:bold;font-size:10.5pt;font-family:Helvetica;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;">计划任务设定后，在没有执行之前我们可以用atq命令来查看系统没有执行工作任务</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">命令：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'Times New Roman';">atq</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">输出：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">atq</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">8       2013-01-06 17:20 </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">a root</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">7       2013-01-08 17:00 </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">a root</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">说明：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">实例4：</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'Times New Roman';">删除已经设置的任务</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">命令：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'Times New Roman';">atrm 7</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">输出：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">atq</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">8       2013-01-06 17:20 </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">a root</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">7       2013-01-08 17:00 </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">a root</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">atrm 7</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">atq</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">8       2013-01-06 17:20 </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">a root</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">说明：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">实例5：</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">显示已经设置的任务内容</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">命令：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'Times New Roman';">at -c 8</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">输出：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">at -c 8</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#!/bin/sh</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">atrun uid=0 gid=0</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">mail     root 0</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">umask 22</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">此处省略n个字符</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">date </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">&gt;/root/2013</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">.log</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost ~]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">说明：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">实例6：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">命令：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">输出：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">说明：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">5．</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">atd 的启动与 at 运行的方式</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">5.1 </span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">atd 的启动</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">要使用</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">一次性计划任务</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">时，我们的 Linux 系统上面必须要有负责这个</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">计划任务</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">的服务，那就是 atd </span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">服务</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">。 不过并非所有的 Linux distributions 都默认会把他打开的，所以，某些时刻我们</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">需要</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">手动将</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">atd 服务</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">激活才行。 激活的方法很简单，就是这样：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">命令：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:42.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'Times New Roman';">/etc/init.d/atd start</span> </p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:42.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'Times New Roman';">/etc/init.d/atd restart</span> </p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">输出：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root@localhost /]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">/etc/init.d/atd start</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root@localhost /]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">/etc/init.d/atd </span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">用法：/etc/init.d/atd {start|stop|restart|condrestart|</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">status}</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost /]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">/etc/init.d/atd stop</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">停止 atd：[确定]</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost /]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">ps -ef|grep atd</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">root     25062 24951  0 14:53 pts/0    00:00:00 </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">grep atd</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost /]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">/etc/init.d/atd start</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[确定]td：[确定]</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost /]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">ps -ef|grep atd</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">root     25068     1  0 14:53 ?        00:00:00 /usr/sbin/</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">atd</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">root     </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">25071 24951  0 14:53 pts/0    00:00:00 </span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">grep atd</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost /]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">/etc/init.d/atd restart</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">停止 atd：[确定]</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[确定]td：[确定]</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root</span><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">@localhost /]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">说明：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:42.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'Times New Roman';">/etc/init.d/atd start</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';"> 没有启动的时候，直接启动atd服务</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:42.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'Times New Roman';">/etc/init.d/atd restart</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';"> 服务已经启动后，重启 atd 服务</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:42.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">备注：</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">配置一下启动时就启动这个服务，免得每次重新启动都得再来一次</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">命令：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:42.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">chkconfig atd on</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">输出：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root@localhost /]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span> <span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">chkconfig atd on</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;text-autospace:ideograph-other;background:#f5f5f5;"><span style="margin:0px;padding:0px;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">[root@localhost /]</span><span style="margin:0px;padding:0px;color:#008000;font-size:9pt;font-family:'Courier New';background-position:initial initial;background-repeat:initial initial;">#</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">5.2 </span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-weight:bold;font-size:10.5000pt;font-family:'宋体';">at 的运行方式</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">既然是</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">计划任务</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">，那么应该会有</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">任务执行</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">的方式，并且将这些</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">任务</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">排进行程表中</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">。</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">那么产生</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">计划任务</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">的方式是怎么进行的</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">?</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';"> 事实上，我们使用 at 这个命令来产生所要运行的</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">计划任务</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">，并将这个</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">计划任务</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">以文字档的方式写入 /var/spool/at/ 目录内，该工作便能等待 atd 这个服务的取用与运行了。就这么简单。</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">不过，并不是所有的人都可以进行 at </span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">计划任务。</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">为什么</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">? </span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">因为</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">系统</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">安全的</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">原因。</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">很多主机被所谓的</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">攻击破解</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">后，最常发现的就是他们的系统当中多了很多的</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">黑客</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">程序， 这些程序非常可能运用</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">一些计划任务</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">来运行或搜集</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">你的</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">系统</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">运行信息</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">,</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">并定时的</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">发送</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">给</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">黑客。</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';"> 所以，除非是你认可的帐号，否则先不要让他们使用 at </span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">命令。</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">那怎么达到使用 at 的</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">可控呢</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">?</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">我们可以利用 /etc/at.allow 与 /etc/at.deny 这两个文件来进行 at 的使用限制</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">。</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">加上这两个文件后， at 的工作情况是这样的：</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">先找寻 /etc/at.allow 这个文件，写在这个文件中的使用者才能使用 at ，没有在这个文件中的使用者则不能使用 at (即使没有写在 at.deny 当中)</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">;</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">如果 /etc/at.allow 不存在，就寻找 /etc/at.deny 这个文件，若写在这个 at.deny 的使用者则不能使用 at ，而没有在这个 at.deny 文件中的使用者，就可以使用 at </span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">命令了。</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">如果两个文件都不存在，那么只有 root 可以使用 at 这个命令。</span></p><p style="margin:10px auto;padding:0px;margin-top:0pt;text-indent:21.0000pt;margin-left:21.0000pt;margin-bottom:0pt;"><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">透过这个说明，我们知道 /etc/at.allow 是管理较为严格的方式，而 /etc/at.deny 则较为松散 (因为帐号没有在该文件中，就能够运行 at 了)。在一般的 distributions 当中，</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">由于</span><span style="margin:0px;padding:0px;mso-spacerun:'yes';font-size:10.5000pt;font-family:'宋体';">假设系统上的所有用户都是可信任的， 因此系统通常会保留一个空的 /etc/at.deny 文件，意思是允许所有人使用 at 命令的意思 (您可以自行检查一下该文件)。 不过，万一你不希望有某些使用者使用 at 的话，将那个使用者的帐号写入 /etc/at.deny 即可！ 一个帐号写一行。</span></p></div><div style="margin:0px;padding:0px;display:block;"><p style="margin:0px;padding:0px;margin-top:12px;margin-bottom:0px;"><br/></p></div></div></div></div></div></div></span>
</div></body></html> 