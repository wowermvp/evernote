<html>
<head>
  <title>jvm系列(六):Java服务GC参数调优案例</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1060"/>
<h1>jvm系列(六):Java服务GC参数调优案例</h1>

<div>
<span><div style="text-size-adjust: 100%; -webkit-appearance: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><div style="background-color: rgb(255, 255, 255); letter-spacing: 0.034em; font-size: initial; -webkit-appearance: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><div style="overflow-wrap:break-word;"><div style="background-color:rgb(255, 255, 255);"><h2 style="font-size: 22px; margin: 0px 0px 14px; padding: 0px;"><span style="font-size: 16px; display: inline-block; min-width: 100%;"><span style="font-size: 22px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: 400; line-height: 1.4;">jvm系列(六):Java服务GC参数调优案例</span></span></h2><div style="margin: 0px; padding: 0px; overflow: hidden; font-size: 17px; overflow-wrap: break-word; text-align: justify; position: relative; z-index: 0;"><div style="margin: 0px 0px 15px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">本文介绍了一次生产环境的JVM GC相关参数的调优过程，通过参数的调整避免了GC卡顿对JAVA服务成功率的影响。</span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">这段时间在整理jvm系列的文章，无意中发现本文，作者思路清晰通过步步分析最终解决问题。我个人特别喜欢这种实战类的内容，经原作者的授权同意，将文章分享于此。</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 15px; background-color: rgb(255, 255, 255); color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">备注部分为本人添加，主要起到说明的作用。</span></div><blockquote style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:10px;border-left:3px solid rgb(219, 219, 219);"><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">原文出处：https://segmentfault.com/a/1190000005174819</span></div></blockquote><h2 style="font-size: 22px; margin: 1.5rem 0px 1rem; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; white-space: normal;"><span style="font-size: 22px; color: rgb(21, 153, 87); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: 400; line-height: 1.35;">背景以及遇到的问题</span></h2><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">我们的Java HTTP服务属于OLTP类型，对成功率和响应时间的要求比较高，在生产环境中出现偶现的成功率突然下降然后又自动恢复的情况，如图所示：</span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal; text-align: center;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;"><img src="jvm系列(六)Java服务GC参数调优案例_files/640" type="image/webp" data-filename="640" height="245" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;border-width:2px;border-style:solid;border-color:rgb(238, 238, 238);border-radius:6px;width:677px !important;visibility:visible !important;" width="673"/></span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">JVM和GC相关的参数如下：</span></div><div style="margin: 0px; padding: 8px 0px 6px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background-color: rgb(241, 239, 238); border-radius: 0px; overflow-y: auto; font-size: 10px;"><ol style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">Xmx22528m</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">Xms22528m</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">NewRatio</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">=</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(223, 83, 32); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">2</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">UseConcMarkSweepGC</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">UseParNewGC</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">CMSParallelRemarkEnabled</span></code></div></div></div></li></ol></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">总结来说，由于服务中大量使用了Cache，所以堆大小开到了22G。GC算法使用CMS（UseConcMarkSweepGC），开启了降低标记停顿（CMSParallelRemarkEnabled），设置年轻代为并行收集（UseParNewGC），年轻代和老年代的比例为1:2 （NewRatio＝2）.</span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">JVM GC日志相关的参数如下：</span></div><div style="margin: 0px; padding: 8px 0px 6px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background-color: rgb(241, 239, 238); border-radius: 0px; overflow-y: auto; font-size: 10px;"><ol style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">Xloggc</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(123, 151, 38); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">/data/</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">gc</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">.</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">log</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">GCLogFileSize</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">=</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(223, 83, 32); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">10M</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">NumberOfGCLogFiles</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">=</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(223, 83, 32); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">10</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">UseGCLogFileRotation</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">PrintGCDateStamps</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">PrintGCTimeStamps</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">PrintGCDetails</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">DisableExplicitGC</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">verbose</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">gc</span></code></div></div></div></li></ol></div><h2 style="font-size: 22px; margin: 1.5rem 0px 1rem; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; white-space: normal;"><span style="font-size: 22px; color: rgb(21, 153, 87); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: 400; line-height: 1.35;">问题解决过程</span></h2><h3 style="font-size: 18px; margin: 1.5rem 0px 1rem; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; white-space: normal;"><span style="font-size: 18px; color: rgb(21, 153, 87); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: 400; line-height: 1.35;">排除应用程序的内存使用问题</span></h3><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">首先使用jmap查看内存使用情况：</span></div><div style="margin: 0px; padding: 8px 0px 6px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background-color: rgb(241, 239, 238); border-radius: 0px; overflow-y: auto; font-size: 10px;"><ol style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">jmap</span> <span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">histo</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">live PID</span></div></div></div></li></ol></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">这个命令把程序中当前的对象按照个数和占用的空间排序以后打印出来。这里没有发现使用异常的对象。</span></div><h3 style="font-size: 18px; margin: 1.5rem 0px 1rem; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; white-space: normal;"><span style="font-size: 18px; color: rgb(21, 153, 87); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: 400; line-height: 1.35;">排除Cache内容过多的问题</span></h3><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">如果Cache内容过多也会导致JVM老年代容易被用满导致频繁GC，因此调出GC日志进行查看，发现每次GC以后内存使用一般是从20G降低到5G左右，因此常驻内存的Cache不是导致GC长时间卡顿的根本原因。对于GC LOG的查看有多种方式，使用VisualVM比较直观，需要使用VisualGC：</span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal; text-align: center;"><span style="font-size: 15px;"><img src="jvm系列(六)Java服务GC参数调优案例_files/cache.webp" type="image/webp" data-filename="cache.webp"/></span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">从图中我们可以看到伊甸园和老年代的空间分配，由于整体内存是20G，设置 -XX:NewRatio=2 因此老年代是14G，伊甸园＋S0+S1=7G</span></div><h3 style="font-size: 18px; margin: 1.5rem 0px 1rem; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; white-space: normal;"><span style="font-size: 18px; color: rgb(21, 153, 87); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: 400; line-height: 1.35;">调整GC时间点（成功率抖动问题加重）</span></h3><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">如果GC需要处理的内存量比较大，执行的时间也就比较长，STW （Stop the World）时间也就更长。按照这个思路调整CMS启动的时间点，希望提早GC，也就是让GC变得更加频繁但是期望每次执行的时间较少。添加了下面这两个参数：</span></div><div style="margin: 0px; padding: 8px 0px 6px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background-color: rgb(241, 239, 238); border-radius: 0px; overflow-y: auto; font-size: 10px;"><ol style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">UseCMSInitiatingOccupancyOnly</span></code></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">CMSInitiatingOccupancyFraction</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">=</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(223, 83, 32); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">50</span></code></div></div></div></li></ol></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">意思是说在Old区使用了50%的时候触发GC。实验后发现GC的频率有所增加，但是每次GC造成的陈功率降低现象并没有减弱，因此弃用这两个参数。</span></div><h3 style="font-size: 18px; margin: 1.5rem 0px 1rem; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; white-space: normal;"><span style="font-size: 18px; color: rgb(21, 153, 87); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: 400; line-height: 1.35;">调整对象在年轻代内存中驻留的时间（效果不明显）</span></h3><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">如果能够降低老年代GC的频率也可以达到降低GC影响的目的，因此尝试让对象在年轻代内存中进行更长时间的驻留，提升这些对象在年轻代GC时候被销毁的概率。使用参数 </span><code style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background: rgb(243, 241, 241); font-size: 16px;"><span style="margin: 0px; padding: 0px 2px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background: rgb(243, 241, 241); display: inline-block; font-size: 14px; color: rgb(88, 88, 88); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">-</span><span style="margin: 0px; padding: 0px 2px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background: rgb(243, 241, 241); display: inline-block; font-size: 14px; color: rgb(88, 88, 88); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">XX</span><span style="margin: 0px; padding: 0px 2px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background: rgb(243, 241, 241); display: inline-block; font-size: 14px; color: rgb(88, 88, 88); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">:</span><span style="margin: 0px; padding: 0px 2px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background: rgb(243, 241, 241); display: inline-block; font-size: 14px; color: rgb(88, 88, 88); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">MaxTenuringThreshold</span><span style="margin: 0px; padding: 0px 2px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background: rgb(243, 241, 241); display: inline-block; font-size: 14px; color: rgb(88, 88, 88); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">=</span><span style="margin: 0px; padding: 0px 2px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background: rgb(243, 241, 241); display: inline-block; font-size: 14px; color: rgb(88, 88, 88); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">31</span></code><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">调整以后收效不明显。</span></div><blockquote style="margin: 1em 0px 1.2em; padding: 15px 15px 15px 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-left: 6px solid rgb(220, 230, 240); font-size: 14px; background: rgb(242, 247, 251); white-space: normal;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div><span style="font-size: 14px; color: rgb(129, 145, 152); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">备注：</span></div><div><span style="font-size: 14px; color: rgb(129, 145, 152); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">1、MaxTenuringThreshold 在1.5.0</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px; color: rgb(129, 145, 152); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">05之前最大值可以设置为31 ，1.5.0</span><span style="font-size: 14px; color: rgb(129, 145, 152); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">06以后最大值可以设置为15，超过15会被认为无限大。</span></div><div><span style="font-size: 14px; color: rgb(129, 145, 152); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">2、提升年轻代GC被销毁的概率，只是调整这个参数效果不大，第二次age的值会重新计算。</span></div></div></blockquote><h3 style="font-size: 18px; margin: 1.5rem 0px 1rem; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; white-space: normal;"><span style="font-size: 18px; color: rgb(21, 153, 87); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: 400; line-height: 1.35;">CMS-Remark之前强制进行年轻代的GC</span></h3><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">首先补充一下CMS的相关知识，在CMS整个过程中有两个步骤是STW的，如图红色部分：</span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal; text-align: center;"><span style="font-size: 15px;"><img src="jvm系列(六)Java服务GC参数调优案例_files/cms-remark.webp" type="image/webp" data-filename="cms-remark.webp"/></span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">CMS并非没有暂停，而是用两次短暂停来替代串行标记整理算法的长暂停，它的收集周期是这样：</span></div><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:square;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px; color: rgb(74, 74, 74); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">1、初始标记(CMS-initial-mark),从root对象开始标记存活的对象</span></span></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px; color: rgb(74, 74, 74); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">2、并发标记(CMS-concurrent-mark)</span></span></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px; color: rgb(74, 74, 74); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">3、重新标记(CMS-remark),暂停所有应用程序线程，重新标记并发标记阶段遗漏的对象（在并发标记阶段结束后对象状态的更新导致）</span></span></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px; color: rgb(74, 74, 74); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">4、并发清除(CMS-concurrent-sweep)</span></span></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px; color: rgb(74, 74, 74); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">5、并发重设状态等待下次CMS的触发(CMS-concurrent-reset)。</span></span></div></li></ul><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">通过GC日志和成功率下降的时间点进行比对发现并不是每一次老年代GC都会导致成功率的下降，但是从中发现了一个规律：</span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal; text-align: center;"><span style="font-size: 15px;"><img src="jvm系列(六)Java服务GC参数调优案例_files/gclog01.webp" type="image/webp" data-filename="gclog01.webp"/></span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">前两次GC CMS-Remark过程在4s左右造成了成功率的下降，但是第三次GC并没有对成功率造成明显的影响,CMS-Remark只有0.18s。Java HTTP 服务是通过Nginx进行反向代理的，nginx设置的超时时间是3s，所以如果GC卡顿在3s以内就不会对成功率造成太大的影响。</span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">从GC日志中又发现一个信息：</span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal; text-align: center;"><span style="font-size: 15px;"><img src="jvm系列(六)Java服务GC参数调优案例_files/gclog02.webp" type="image/webp" data-filename="gclog02.webp"/></span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">在文档和相关资料中没有找到蓝色部分的含义，猜测是remark处理的内存量，处理的越多就越慢。添加下面两个参数强制在remark阶段和FULL GC阶段之前先在进行一次年轻代的GC，这样需要进行处理的内存量就</span></div><div style="margin: 0px; padding: 8px 0px 6px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; background-color: rgb(241, 239, 238); border-radius: 0px; overflow-y: auto; font-size: 10px;"><ol style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">ScavengeBeforeFullGC</span></div></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 14px !important; word-break: inherit !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; word-break: inherit !important;"><code style="margin: 0px 0px 0px -20px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; display: flex; overflow: initial; word-wrap: normal; border-width: 0px; border-style: initial; border-color: initial; font-size: 10px; white-space: pre !important;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">-</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">XX</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(27, 25, 24); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">:+</span><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13px; white-space: inherit !important; color: rgb(64, 126, 231); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 20px;">CMSScavengeBeforeRemark</span></code></div></div></div></li></ol></div><blockquote style="margin: 1em 0px 1.2em; padding: 15px 15px 15px 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-left: 6px solid rgb(220, 230, 240); font-size: 14px; background: rgb(242, 247, 251); white-space: normal;"><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><span style="font-size: 14px; color: rgb(129, 145, 152); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">备注：</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><span style="font-size: 14px; color: rgb(129, 145, 152); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">1、蓝色部分的含义：remark标记需要清理对象的容量。</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em;"><span style="font-size: 14px; color: rgb(129, 145, 152); font-family: Helvetica, Arial, sans-serif; line-height: 18px;">2、FULL GC阶段之前先在进行一次年轻代的GC的意义是：Yong区对象引用了Old区的对象，如果在Old区进行清理之前不进行Yong区清理，就会导致Old区被Yong区引用的对象无法释放。</span></div></blockquote><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">调优以后效果很明显，下面是两台配置完全相同的服务器在同一时间段的成功率和响应时间监控图，第一个没有添加强制年轻代GC的参数。</span></div><div style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; text-align: center;"><span style="font-size: 17px;"><img src="jvm系列(六)Java服务GC参数调优案例_files/6dashboard.webp" type="image/webp" data-filename="6dashboard.webp"/></span></div><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal; text-align: center;"><span style="font-size: 15px;"><img src="jvm系列(六)Java服务GC参数调优案例_files/6dashboard02.webp" type="image/webp" data-filename="6dashboard02.webp"/></span></div><h2 style="font-size: 22px; margin: 1.5rem 0px 1rem; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; white-space: normal;"><span style="font-size: 22px; color: rgb(21, 153, 87); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: 400; line-height: 1.35;">结论</span></h2><div style="margin: 15px 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 15px; white-space: normal;"><div><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">1、在CMS-remark阶段需要对堆中所有的内存对象进行处理，如果在这个阶段之前强制执行一次年轻代的GC会大量减少remark需要处理的内存数量，进而降低JVM卡顿对成功率的影响。</span></div><div><span style="font-size: 15px; color: rgb(80, 97, 109); font-family: Helvetica, Arial, sans-serif; line-height: 1.6;">2、对于Java HTTP服务，JVM的卡顿时间应该小于HTTP客户端的调用超时时间，否则JVM卡顿会对成功率造成影响。</span></div></div><div style="margin: 0px; padding: 0px; max-width: 100%; overflow-wrap: break-word; clear: both; min-height: 1em; font-size: 16px; white-space: normal; text-align: center; box-sizing: border-box !important; word-wrap: break-word !important;"><br/></div></div></div></div></div></div><div><br/></div></span>
</div></body></html> 