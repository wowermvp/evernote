<html>
<head>
  <title>Linux系统灾难恢复技术和方法</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1324"/>
<h1>Linux系统灾难恢复技术和方法</h1>

<div>
<span><br/><div style="font-style: normal; font-variant: normal; font-weight: normal;"><div style="background-color: rgb(248, 248, 248); overflow: hidden; background-position: initial initial; background-repeat: initial initial;"><div><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">Linux 发行版本众多，现如今也得到了越来越广泛的应用，同时也面临着系统出现故障的潜在风险，本文将以发行版本 RHEL6 为例详细介绍几种 Linux 灾难恢复技术和方法，以确保 Linux 系统的安全恢复。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">在介绍 Linux 灾难恢复方法之前，我们先来了解下 MBR，其全称为 Master Boot Record，即硬盘的主引导记录。它由三个部分组成，主引导程序、硬盘分区表和硬盘有效标志。在总共 512 字节的主引导扇区里主引导程序（Bootloader）占 446 个字节，第二部分是硬盘分区表，占 64 个字节，硬盘有多少分区以及每一分区的大小都记录在其中。第三部分是硬盘有效标志，占 2 个字节。具体如图示：</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">图 1. MBR</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><img src="Linux系统灾难恢复技术和方法_files/1414130.gif" type="image/gif" data-filename="1414130.gif" border="0" height="469" style="border: 0px; text-align: center; height: auto;" width="479"/></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;">系统硬盘分区表破坏</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">生产环境中的 Linux 服务器可能会因为病毒或者意外断电而引起硬盘分区表被破坏，通常恢复硬盘分区表需要之前我们先备份其分区表的信息，一般我们使用 USB 外接设备来备份主机硬盘的分区表。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">在主机上挂载 USB 设备后我们查看系统当前磁盘设备：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">[root@FCoE ~]# fdisk -l   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sda: 43.0 GB, 42991616000 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">255 heads, 63 sectors/track, 5226 cylinders   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk identifier: 0x00032735   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda1   *           1          17      131072   83  Linux   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Partition 1 does not end on cylinder boundary.   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda2              17         147     1048576   82  Linux swap / Solaris   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Partition 2 does not end on cylinder boundary.   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda3             147        5227    40803328   83  Linux   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sdb: 2147 MB, 2147483648 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">255 heads, 63 sectors/track, 261 cylinders   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk identifier: 0x00000000   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sdb doesn't contain a valid partition table  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">现在我们在 sdb 这个设备上创建一个新的分区：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">[root@FCoE ~]# fdisk /dev/sdb   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Building a new DOS disklabel with disk identifier 0xcdd48395.   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Changes will remain in memory only, until you decide to write them.   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">After that, of course, the previous content won't be recoverable.   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">WARNING: DOS-compatible mode is deprecated. It's strongly recommended to   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        switch off the mode (command 'c') and change display units to   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        sectors (command 'u').   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Command (m for help): n   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Command action   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  e   extended   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  p   primary partition (1-4)   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">p   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Partition number (1-4): 1   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">First cylinder (1-261, default 1):   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Using default value 1   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Last cylinder, +cylinders or +size{K,M,G} (1-261, default 261):   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Using default value 261   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Command (m for help): p   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sdb: 2147 MB, 2147483648 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">255 heads, 63 sectors/track, 261 cylinders   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk identifier: 0xcdd48395   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sdb1               1         261     2096451   83  Linux   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Command (m for help): w   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">The partition table has been altered!   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Calling ioctl() to re-read partition table.   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Syncing disks.  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">在新分区 sdb1 上创建文件系统：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">[root@FCoE ~]# mkfs.ext3 /dev/sdb1   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">mke2fs 1.41.12 (17-May-2010)   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Filesystem </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">label</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">OS</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> type: Linux   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Block </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">size</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">4096</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">log</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">2</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">)   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Fragment </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">size</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">4096</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">log</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">2</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">)   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Stride</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">0</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> blocks, Stripe </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">width</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">0</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> blocks   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">131072 inodes, 524112 blocks   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">26205 blocks (5.00%) reserved for the super user   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">First data </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">block</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">0</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Maximum filesystem </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">blocks</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">536870912</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">16 block groups   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">32768 blocks per group, 32768 fragments per group   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">8192 inodes per group   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Superblock backups stored on blocks:   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">       32768, 98304, 163840, 229376, 294912   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Writing inode tables: done   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Creating journal (8192 blocks): done   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Writing superblocks and filesystem accounting information: done   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">This filesystem will be automatically checked every 24 mounts or   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">180 days, whichever comes first.  Use tune2fs -c or -i to override.  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">挂载新的文件系统：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">[root@FCoE ~]# mount /dev/sdb1 /mnt/  </span></span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">通常我们通过备份硬盘的 MBR 来备份硬盘分区表：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">[root@FCoE ~]# dd </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">if</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=/dev/sda </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">of</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=/mnt/sda.mbr </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">bs</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">count</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">1</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1+0 records in   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1+0 records out   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">512 bytes (512 B) copied, 0.000777948 s, 658 kB/s  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">现在我们来写零硬盘分区表来实现类似分区表被破坏的结果：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">[root@FCoE ~]# dd </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">if</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=/dev/zero </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">of</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=/dev/sda </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">bs</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">1</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">count</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">64</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">skip</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">446</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">seek</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">446</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">64+0 records in   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">64+0 records out   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">64 bytes (64 B) copied, 0.00160668 s, 39.8 kB/s  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">查询硬盘 sda 上的分区信息，发现其已不包含任何分区：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">[root@FCoE ~]# fdisk -l   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sda: 43.0 GB, 42991616000 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">255 heads, 63 sectors/track, 5226 cylinders   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk identifier: 0x00032735   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sdb: 2147 MB, 2147483648 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">255 heads, 63 sectors/track, 261 cylinders   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk identifier: 0xcdd48395   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sdb1               1         261     2096451   83  Linux  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">当主机硬盘分区表丢失了之后，再次启动后 GRUB 会因找不到配置文件而进入命令行模式：</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">图 2. 分区表丢失</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><a href="http://images.51cto.com/files/uploadimg/20120920/1414131.jpg" style="color:rgb(0, 66, 118);text-decoration:underline;" target="_blank"><img src="Linux系统灾难恢复技术和方法_files/1414131.jpg" type="image/jpeg" data-filename="1414131.jpg" border="0" height="433" style="border:0px;text-align:center;" width="498"/></a> </span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:left;"><span style="font-size: 14px;"><span style="font-family: 宋体;">接下来我们挂载 RHEL6 的安装盘，同时也接入我们之前备份的 USB 设备，然后重启主机，选择 CD-ROM 为第一引导设备，启动后选择“Rescue installed system”。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:left;"><span style="font-size: 14px;"><span style="font-family: 宋体;">图 3. 选择援救</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><a href="http://images.51cto.com/files/uploadimg/20120920/1414132.jpg" style="color:rgb(0, 66, 118);text-decoration:underline;" target="_blank"><img src="Linux系统灾难恢复技术和方法_files/1414132.jpg" type="image/jpeg" data-filename="1414132.jpg" border="0" height="436" style="border:0px;text-align:center;" width="498"/></a></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">按照提示，最终我们选择一个 shell。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">图 4. 选择 shell</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><a href="http://images.51cto.com/files/uploadimg/20120920/1414133.jpg" style="color:rgb(0, 66, 118);text-decoration:underline;" target="_blank"><img src="Linux系统灾难恢复技术和方法_files/1414133.jpg" type="image/jpeg" data-filename="1414133.jpg" border="0" height="432" style="border:0px;text-align:center;" width="498"/></a></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">我们查询系统磁盘信息，发现硬盘设备 sda 没有包含任何分区。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# fdik – l   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Disk /dev/sda: 43.0 GB, 42991616000 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> 255 heads, 63 sectors/track, 5226 cylinders   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Disk identifier: 0x00032735   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">   Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Disk /dev/sdb: 2147 MB, 2147483648 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> 255 heads, 63 sectors/track, 261 cylinders   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Disk identifier: 0xcdd48395   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">   Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> /dev/sdb1               1         261     2096451   83  Linux  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">我们来恢复它的硬盘分区表，创建一个目录并且挂载之前备份的 USB 设备，我们看到它的设备名是 /dev/sdb。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# mount /dev/sdb1 /usb   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# ls /usb   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">lost+found  sda.mbr </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">通过原来备份的 sda.mbr 文件来恢复硬盘设备 sda 的硬盘分区表：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# dd </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">if</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=/usb/sda.mbr </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">of</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=/dev/sda </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">bs</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">1</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">count</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">64</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">skip</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">446</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">seek</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">446</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">64+0 records in   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">64+0 records out   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">64 bytes (64 B) copied, 0.038358 s, 4.6 kB/s </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">再次查询系统磁盘信息：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# fdisk -l   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sda: 43.0 GB, 42991616000 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">255 heads, 63 sectors/track, 5226 cylinders   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk identifier: 0x00032735   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda1   *           1          17      131072   83  Linux   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Partition 1 does not end on cylinder boundary.   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda2              17         147     1048576   82  Linux swap / Solaris   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Partition 2 does not end on cylinder boundary.   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda3             147        5227    40803328   83  Linux   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sdb: 2147 MB, 2147483648 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">255 heads, 63 sectors/track, 261 cylinders   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk identifier: 0xcdd48395   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sdb1               1         261     2096451   83  Linux  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">硬盘设备 sda 的分区表已经恢复，重启后系统便可正常引导。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><strong style="font-weight:bold;text-align:center;">系统 GRUB 损坏</strong></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">类似得我们可以来写零 Bootloader 来实现 GRUB 被破坏的结果：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">[root@FCoE grub]# dd </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">if</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=/dev/zero </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">of</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=/dev/sda </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">bs</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">446</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">count</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">1</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1+0 records in   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1+0 records out   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">446 bytes (446 B) copied, 0.0017583 s, 254 kB/s  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">重启后系统会因找不到 GRUB 而卡在“Booting from Hard Disk …”</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">挂载系统安装光盘然后选择进入 Rescue 模式，然后恢复 GRUB：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# chroot /mnt/sysimage   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# grub   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">grub </span><span style="width:635px;margin:0px;border:none;padding:0px;background-color:inherit;margin-bottom:10px;padding-top:7px;padding-bottom:4px;color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> root hd(0,0)   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">grub </span><span style="width:635px;margin:0px;border:none;padding:0px;background-color:inherit;margin-bottom:10px;padding-top:7px;padding-bottom:4px;color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> setup (hd0)   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">grub </span><span style="width:635px;margin:0px;border:none;padding:0px;background-color:inherit;margin-bottom:10px;padding-top:7px;padding-bottom:4px;color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> quit  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">图 5. 恢复 GRUB</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><a href="http://images.51cto.com/files/uploadimg/20120920/1414134.jpg" style="color:rgb(0, 66, 118);text-decoration:underline;" target="_blank"><img src="Linux系统灾难恢复技术和方法_files/1414134.jpg" type="image/jpeg" data-filename="1414134.jpg" border="0" height="433" style="border:0px;text-align:center;" width="498"/></a></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">重启主机后，系统可正常引导。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><strong style="font-weight:bold;text-align:center;">系统内核文件丢失</strong></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">系统丢失内核 kernel 文件，再次启动后会提示找不到文件。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">图 6. 内核丢失</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><a href="http://images.51cto.com/files/uploadimg/20120920/1414135.jpg" style="color:rgb(0, 66, 118);text-decoration:underline;" target="_blank"><img src="Linux系统灾难恢复技术和方法_files/1414135.jpg" type="image/jpeg" data-filename="1414135.jpg" border="0" height="434" style="border:0px;text-align:center;" width="498"/></a></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">挂载系统安装盘进入援救模式，检查 /boot 目录下发现没有 kernel 文件。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# chroot /mnt/sysimage   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# ls /boot   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">ls   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">config-2.6.32-71.el6.x86_64     lost+found   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">efi                                  symvers-2.6.32-71.el6.x86_64.gz   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">grub                                 System.map-2.6.32-71.el6.x86_64   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">initramfs-2.6.32-71.el6.x86_64.img  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">从挂载的系统安装盘强制重新安装内核：</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# mount – o loop /dev/sr0 /media   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# cd /media/Server/Packages   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# rpm -ivh --force kernel-2.6.32-71.el6.x86_64.rpm   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">warning: kernel-2.6.32-71.el6.x86_64.rpm: Header V3 RSA/SHA256 Signature, \   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">key ID fd431d51: NOKEY   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Preparing...                ########################################### [100%]   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  1:kernel                  ########################################### [100%]  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">在 /boot 目录下已经生成新的 kernel 文件 vmlinuz-2.6.32-71.el6.x86_64</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1## ls /boot   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">config-2.6.32-71.el6.x86_64            lost+found   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">efi                                         symvers-2.6.32-71.el6.x86_64.gz   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">grub                                        System.map-2.6.32-71.el6.x86_64   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">initramfs-2.6.32-71.el6.x86_64.img    vmlinuz-2.6.32-71.el6.x86_64  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">重启主机后，系统可正常引导。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">系统镜像文件丢失</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">系统丢失镜像文件，主机启动后黑屏。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">图 7. 镜像丢失</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><a href="http://images.51cto.com/files/uploadimg/20120920/1414136.jpg" style="color:rgb(0, 66, 118);text-decoration:underline;" target="_blank"><img src="Linux系统灾难恢复技术和方法_files/1414136.jpg" type="image/jpeg" data-filename="1414136.jpg" border="0" height="433" style="border:0px;text-align:center;" width="498"/></a></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">挂载系统安装盘进入援救模式 , 检查 /boot 目录下发现没有镜像文件。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# chroot /mnt/sysimage   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# ls /boot   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">config-2.6.32-71.el6.x86_64      symvers-2.6.32-71.el6.x86_64.gz   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">efi                                 System.map-2.6.32-71.el6.x86_64   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">grub                                vmlinuz-2.6.32-71.el6.x86_64   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">lost+found  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">重新生成镜像文件 initramfs-2.6.32-71.el6.x86_64.img。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# cd /boot   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# mkinit   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# ls   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">config-2.6.32-71.el6.x86_64           lost+found   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">efi                                        symvers-2.6.32-71.el6.x86_64.gz   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">grub                                       System.map-2.6.32-71.el6.x86_64   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">initramfs-2.6.32-71.el6.x86_64.img   vmlinuz-2.6.32-71.el6.x86_64  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">重启主机后 , 系统可正常引导。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><strong style="font-weight:bold;text-align:center;">系统 /boot 分区损坏</strong></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">一般来说系统 /boot 分区损坏，我们会先尝试修复文件系统。如果文件系统损坏不能修复，那么我们可以参照前述的方法来依次新建 /boot 分区，重新安装内核和镜像，然后安装 GURB 再手工编辑引导菜单，以最终来恢复系统可正常引导。通常我们需要按照如下的步骤来恢复。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><strong style="font-weight:bold;text-align:center;">创建分区</strong></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">碰到比较严重的情况就是 /boot 分区已经完全损坏，启动时会提示找不到引导设备。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">图 8. 引导分区损坏</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><a href="http://images.51cto.com/files/uploadimg/20120920/1414137.jpg" style="color:rgb(0, 66, 118);text-decoration:underline;" target="_blank"><img src="Linux系统灾难恢复技术和方法_files/1414137.jpg" type="image/jpeg" data-filename="1414137.jpg" border="0" height="433" style="border:0px;text-align:center;" width="498"/></a></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">挂载安装盘后进入援救模式，查看分区情况，发现分区 /dev/sda1 不存在。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1#   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sda: 43.0 GB, 42991616000 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">255 heads, 63 sectors/track, 5226 cylinders   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk identifier: 0x00000000   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda2              17         147     1048576   82  Linux swap / Solaris   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Partition 2 does not end on cylinder boundary.   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda3             147        5227    40803328   83  Linux   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sdb: 2147 MB, 2147483648 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">255 heads, 63 sectors/track, 261 cylinders   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk identifier: 0xcdd48395   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sdb1               1         261     2096451   83  Linux  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">新建一个分区并且设置它为启动分区。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# fdisk /dev/sda   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">WARNING: DOS-compatible mode is deprecated. It's strongly recommended to   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        switch off the mode (command 'c') and change display units to   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        sectors (command 'u').   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Command (m for help): n   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Command action   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  e   extended   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  p   primary partition (1-4)   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">p   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Partition number (1-4): 1   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">First cylinder (1-5226, default 1):   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Using default value 1   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Last cylinder, +cylinders or +size{K,M,G} (1-16, default 16):   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Using default value 16   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Command (m for help): a   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Partition number (1-4): 1   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Command (m for help): p   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk /dev/sda: 43.0 GB, 42991616000 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">255 heads, 63 sectors/track, 5226 cylinders   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Units</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cylinders</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> of 16065 * </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">512</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> = </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">8225280</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Sector size (logical/physical): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">I/O size (minimum/optimal): 512 bytes / 512 bytes   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Disk identifier: 0x00000000   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  Device Boot      Start         End      Blocks   Id  System   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda1   *           1          16      128488+  83  Linux   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda2              17         147     1048576   82  Linux swap / Solaris   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Partition 2 does not end on cylinder boundary.   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda3             147        5227    40803328   83  Linux   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Command (m for help): w   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">The partition table has been altered!  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">重启主机以更新分区表，然后进入援救模式，并在我们新创建的分区上创建文件系统。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# mkfs.ext4 /dev/sda1   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Filesystem </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">label</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">OS</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> type: Linux   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Block </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">size</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">1024</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">log</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">0</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">)   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Fragment </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">size</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">1024</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">log</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">0</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">)   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">Stride</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">0</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> blocks, Stripe </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">width</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">0</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> blocks   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">32128 inodes, 128488 blocks   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">6424 blocks (5.00%) reserved for the super user   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">First data </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">block</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">1</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Maximum filesystem </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">blocks</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">67371008</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">16 block groups   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">8192 blocks per group, 8192 fragments per group   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2008 inodes per group   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Superblock backups stored on blocks:   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">       8193, 24577, 40961, 57345, 73729   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Writing inode tables: done   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Creating journal (4096 blocks): done   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Writing superblocks and filesystem accounting information: done   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">This filesystem will be automatically checked every 38 mounts or   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">180 days, whichever comes first.  Use tune2fs -c or -i to override.  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><strong style="font-weight:bold;text-align:center;">安装内核镜像文件</strong></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">通过前述的方法我们安装内核和镜像文件。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# chroot /mnt/sysimage   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# mount /dev/sda1 /boot   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# mount – o loop /dev/sr0 /media   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# cd /media/Server/Packages   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# rpm -ivh --force kernel-2.6.32-71.el6.x86_64.rpm   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">warning: kernel-2.6.32-71.el6.x86_64.rpm: \   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Header V3 RSA/SHA256 Signature, key ID fd431d51: NOKEY   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Preparing...                ########################################### [100%]   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  1:kernel                  ########################################### [100%]  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><strong style="font-weight:bold;text-align:center;">安装 GRUB</strong></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">我们安装 GRUB 到硬盘设备 sda 上。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sh-4.1# grub-install /dev/sda   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Installation finished. No error reported.   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">This is the contents of the device map /boot/grub/device.map.   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Check if this is correct or not. If any of the lines is incorrect,   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">fix it and re-run the script `grub-install'.   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">(fd0)   /dev/fd0   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">(hd0)   /dev/sda   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">(hd1)   /dev/sdb  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><strong style="font-weight:bold;text-align:center;">编辑引导菜单</strong></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">由于我们创建了新的分区，其对应的 UUID 会发生变化，可以通过命令 blkid 来查询分区的 UUID。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">bash-4.1# blkid   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/loop0: </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">TYPE</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;squashfs&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda2: </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">UUID</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;7b1e0fac-ff06-492c-848d-497e2a38c54e&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">TYPE</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;swap&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda3: </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">UUID</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;ef89764e-04ff-4f26-ae82-dcab267ecc66&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">TYPE</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;ext4&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sdb1: </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">UUID</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;2b824352-df2a-44c6-a547-838d46f526fa&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">SEC_TYPE</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;ext2&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">TYPE</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;ext3&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/loop1: </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">LABEL</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;RHEL_6.0 x86_64 Disc 1&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">TYPE</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;iso9660&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">/dev/sda1: </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">UUID</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;cec964af-1618-48ff-ac33-4ef71b9d3265&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">TYPE</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">&quot;ext4&quot;</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">上述的 sda3 为根分区，编辑 /boot/grub/grub.conf 文件更新其对应的 UUID，其内容如下。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">title Red Hat Enterprise Linux 6   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">root (hd0,0)   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">kernel /vmlinuz-2.6.32-71.el6.x86_64 \   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">root</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">UUID</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=ef89764e-04ff-4f26-ae82-dcab267ecc66 rhgb quiet   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">initrd /initramfs-2.6.32-71.el6.x86_64.img  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><strong style="font-weight:bold;text-align:center;">更新 /etc/fstab</strong></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">类似的我们也需要更新 /etc/fstab 里 /boot 分区对应的新 UUID，其内容如下。</span></span></p><pre style="margin:0px 0px 1em;padding:0px;color:rgb(51, 51, 51);font-family:'Courier New', monospace;font-size:12px;width:99%;overflow:auto;background:rgb(230, 230, 230);"></pre><ol style="word-wrap:break-word;word-break:normal;padding:5px 0px;color:rgb(92, 92, 92);list-style:decimal;border:none;background:rgb(247, 247, 247);margin-left:55px;margin:0px 0px 1px 3em;"><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#   </span></span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"># /etc/fstab   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"># Created by anaconda on Sun Mar 18 04:35:07 2012   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"># Accessible filesystems, by reference, are maintained under '/dev/disk'  </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">UUID</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">ef89764e</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">-04ff-4f26-ae82-dcab267ecc66 /                  ext4    defaults        1 1   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">UUID</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">cec964af</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">-1618-48ff-ac33-4ef71b9d3265 /boot              ext4    defaults        1 2   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">UUID</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">7b1e0fac</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">-ff06-492c-848d-497e2a38c54e swap               swap    defaults        0 0   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">tmpfs                   /dev/shm                tmpfs   defaults        0 0   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">devpts                  /dev/pts                devpts  </span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">gid</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">5</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">,</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:red;">mode</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">=</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;color:blue;">620</span><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  0 0   </span></li><li style="word-break:normal;margin:0px;color:inherit;list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">sysfs                   /sys                     sysfs   defaults        0 0   </span></li><li style="word-break:normal;margin:0px;color:rgb(92, 92, 92);list-style:none outside none;word-wrap:break-word;padding:0px 3px 0px 10px;border:none;background:url(&quot;http://images.51cto.com/images/art1105/images/0.gif&quot;) -498px -70px repeat-y scroll;list-style-type:decimal;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">proc                    /proc                    proc    defaults        0 0  </span></li></ol><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">现在我们的恢复步骤已经完成，重启主机后 GRUB 中可见我们配置的系统列表。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">图 9. GRUB 菜单</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><a href="http://images.51cto.com/files/uploadimg/20120920/1414138.jpg" style="color:rgb(0, 66, 118);text-decoration:underline;" target="_blank"><img src="Linux系统灾难恢复技术和方法_files/1414138.jpg" type="image/jpeg" data-filename="1414138.jpg" border="0" height="438" style="border:0px;text-align:center;" width="498"/></a></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">至此 /boot 分区已恢复，系统可正常引导启动。</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;">图 10. 系统启动</span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;text-align:center;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><a href="http://images.51cto.com/files/uploadimg/20120920/1414139.jpg" style="color:rgb(0, 66, 118);text-decoration:underline;" target="_blank"><img src="Linux系统灾难恢复技术和方法_files/1414139.jpg" type="image/jpeg" data-filename="1414139.jpg" border="0" height="437" style="border:0px;text-align:center;" width="498"/></a></span></span></p><p style="padding:0px;color:rgb(51, 51, 51);background-color:transparent;margin:10px 0px;text-indent:28px;"><span style="font-size: 14px;"><span style="font-family: 宋体;"><strong style="font-weight:bold;text-align:center;">总结</strong></span></span></p><div style="padding: 0px; background-color: transparent; margin: 10px 0px; text-indent: 28px;"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 宋体;">本文阐述了常见的 Linux 灾难恢复技术和方法，及其出现严重灾难时应注意的恢复顺序，以确保 Linux 系统在出现灾难时得以安全恢复。</span></span></span></div></div></div></div></div></span>
</div></body></html> 