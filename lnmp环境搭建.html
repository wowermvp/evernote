<html>
<head>
  <title>lnmp环境搭建</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1456"/>
<h1>lnmp环境搭建</h1>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">
lnmp安装及部署
<div><font color="#DE5700">1）安装支持软件</font></div><div>Nginx的配置及运行需要pcre、zlib等软件包的支持，因此应预先安装这些软件的开发包（devel），以便提供相应的库和头文件，确保Nginx的安装顺利完成。</div><div><img src="lnmp环境搭建_files/Image.png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>2<font color="#DE5700">）创建运行用户、组：</font></div><div>Nginx服务程序默认以nobody身份运行，建议为其创建专门的用户账号，以便更准确地控制其访问权限，增加灵活性、降低安全风险。如：创建一个名为nginx的用户，有建立宿主目录，也禁止登录到shell环境。</div><div><img src="lnmp环境搭建_files/Image [1].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><font color="#DE5700">3）编译安装nginx</font></div><div><font color="#DE5700">释放nginx源码包</font></div><div><img src="lnmp环境搭建_files/Image [2].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><font color="#DE5700">编译前配置</font></div><div><img src="lnmp环境搭建_files/Image [3].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><br/></div><div><img src="lnmp环境搭建_files/Image [4].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>注：配置前可以参考：./configure --help给出说明</div><div>--prefix：设定Nginx的安装目录</div><div>--user和--group：指定Nginx运行用户和组</div><div>--with-http_stub_status_module：启用 http_stub_status_module模块以支持状态统计</div><div>编译：</div><div><img src="lnmp环境搭建_files/Image [5].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>安装：</div><div><img src="lnmp环境搭建_files/Image [6].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>至此Nginx安装完成，为了使Nginx服务器的运行更加方便，可以为主程序nginx创建链接文件，以便管理员直接执行nginx命令就可以调用Nginx的主程序。</div><div><img src="lnmp环境搭建_files/Image [7].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>Nginx的运行控制：</div><div>与apache的主程序httpd类似，Nginx的主程序也提供了“-t”选项用来对配置文件进行检查，以便找出不当或错误的配置。配置文件nginx.conf默认位于安装目录下的conf/子目录中。若要检查位于其他位置的配置文件，可使用“-c”选项来指定路径。</div><div><img src="lnmp环境搭建_files/Image [8].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>启动、停止Nginx：</div><div>直接运行nginx即可启动Nginx服务器，这种方式将使用默认的配置文件，若要改用其他配置文件，需要添加“-c配置文件路径“选项来指定路径。</div><div>需要注意的是！！，若服务器中已经安装有httpd等其他WEB服务软件，应采取措施避免冲突。</div><div><img src="lnmp环境搭建_files/Image [9].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>通过检查Nginx程序的监听状态，或者在浏览器中访问此WEB服务（默认页面将显示”Welcome to nginx！“），可以确认Nginx服务是否正常运行。</div><div><img src="lnmp环境搭建_files/Image [10].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>注意：要在防火墙上允许80端口的通信。</div><div>iptables -l INPUT -p tcp-dport 80-j ACCEPT          <font color="#328712">#允许80端口通信</font></div><div>service iptables save          <font color="#328712">#保存规则</font></div><div>或使用elinks浏览器（需安装elinks软件包。yum -y install elinks）</div><div><img src="lnmp环境搭建_files/Image [11].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>停止Nginx服务：（在没添加脚本之前）</div><div>cat /usr/local/nginx/logs/nginx.pid         <font color="#328712"> #查看nginx进程PID</font></div><div><img src="lnmp环境搭建_files/Image [12].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>#killall -9 nginx</div><div>当nginx进程运行时，PID默认存放在/usr/local/logs/目录下的nginx.pid文件中，因此若改用kill命令，也可以根据nginx.pid文件中的PID号来时行控制。</div><div>为了使Nginx服务的启动、停止、重载等操作更加方便，可以编写Nginx服务脚本，并使用chkconfig和service工具来进行管理，也更加符合RHEL系统的管理习惯。</div><div><img src="lnmp环境搭建_files/Image [13].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>脚本内容如下：（脚本在电脑中，nginx）</div><div><img src="lnmp环境搭建_files/Image [14].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><br/></div><div><img src="lnmp环境搭建_files/Image [15].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>注：通过kill或killall命令发送HUP信号表示重载配置，用新的配置开始新的工作进程，关闭旧的工作进程。QUIT信号退出进程，KILL信号表示杀死进程。通过&quot;-s&quot;选项指定信号种类。</div><div>添加为系统服务</div><div><img src="lnmp环境搭建_files/Image [16].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><img src="lnmp环境搭建_files/Image [17].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>这样，就可以通过nginx脚本来启动、停止、重启、重载Nginx服务器了。</div><div>service nginx start     <font color="#328712">#启动</font></div><div>service nginx stop     <font color="#328712">#停止</font></div><div>service nginx restart  <font color="#328712">#重启</font></div><div>3、配置文件nginx.conf：</div><div>在Nginx服务器的主配置文件nginx.conf中，包括全局配置、I/O事件配置、HTTP配置这三大块内容，配置语句的格式为&quot;关键字值;&quot;(末尾以分号表示结束)，以&quot;#&quot;开始的部分表示注释。</div><div>1）全局配置</div><div>由各种配置语句组成，不使用特定的界定标记。全局配置部分包括运行用户、工作进程数、错误日志、PID存放位置等基本设置。</div><div>常用配置项：</div><div>#user nobody;</div><div><font color="#328712">//运行用户，Nginx的运行用户实际是编译时指定的nginx，若编译时未指定则默认为nobody</font></div><div>#worker processes 2;</div><div><font color="#328712">//指定nginx启动的工作进程数量，建议按照cpu数目来指定，一般为它的倍数。</font></div><div>#worker_cpu_affinity 00000001 00000010;</div><div><font color="#328712">//为每个进程分配cpu，上例中将2个进程分配到两个cpu，当然可以写多个，或者将一个进程分配到多个cpu</font></div><div>#worker_rlimit_nofile 102400;</div><div><font color="#328712">//这处指令是指当一个nginx进程打开的最多文件数目，理论值应该是最多打开文件数（ulimit -n）与nginx进程数相除，但是nginx分配请求并不是那么均匀，所以最好与ulimit -u的值保持一致。（通过&quot;ulimit -n 数值&quot;可以修改打开的最多文件数目）</font></div><div>#error_log logs/error.log;         <font color="#41AD1C"> //全局错误日志文件的位置</font></div><div>#pid logs/nginx.pid;                  <font color="#41AD1C">//PID 文件的位置</font></div><div><img src="lnmp环境搭建_files/Image [18].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;"/></div><div>2）I/O事件配置</div><div>使用&quot;events{}&quot;界定标记，用来指定Nginx进程的I/O响应模型，每个进程的连接数等设置</div><div>enents{</div><div>use epool;     <font color="#41AD1C">//使用epool模型，对于2.6以上的内核，建议使用epool模型以提高性能</font></div><div>worker_connections 4096;     <font color="#41AD1C">//每个进程允许的最多连接数（默认为1024），每个进程的连接数应根据实际需要来定，一般在10000以下，理论上每台nginx服务器的最大连接数为worker_processes*worker_connections具体还要看服务器硬件、带宽等。</font></div><div>}</div><div><img src="lnmp环境搭建_files/Image [19].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;"/></div><div>3）HTTP配置</div><div>使用&quot;http{}&quot;界定标记，包括访问日志、HTTP端口、网页目录、默认字符集、连接保持、以及虚拟主机、PHP解析等一系列的设置。其中大部分配置语句包含在子界定标记&quot;servier{}&quot;内。</div><div>http{</div><div><font color="#DE5700">#设定mime类型，即conf/目录下的mime.types文件中的设定</font></div><div>include mime.types;</div><div>default_type application/octet-stream;</div><div><font color="#DE5700">#设定日志格式</font></div><div>log_format main '$remote_addr-$remote_user[$time_local]'</div><div>'&quot;$request&quot; $status $bytes_sent'</div><div>'&quot;$http_referer&quot; &quot;$http_user_agent&quot;'</div><div>'&quot;$gzip_ratio&quot;';</div><div>log_format download '$remote_addr-$remote_user[$time_local]'</div><div>'&quot;$request&quot; $status $bytes_sent'</div><div>'&quot;$http_referer&quot; &quot;$http_user_agent&quot;'</div><div>'&quot;$http_range&quot; &quot;$sent_http_content_range&quot;';</div><div><font color="#DE5700">#设定accesslog</font></div><div>access_log logs/access.log main;</div><div>sendfile on;     <font color="#41AD1C">//支持文件发送（下载）</font></div><div>keepalive_timeout 65;     <font color="#41AD1C">//连接保持超时</font></div><div><font color="#DE5700">#设定虚拟主机</font></div><div>server{     <font color="#41AD1C">//用来配置虚拟主机</font></div><div>listen 80;     <font color="#41AD1C">//WEB服务的监听设置，可以采用&quot;IP 地址：端口&quot;形式</font></div><div>server_name www.lnmp.com;     <font color="#41AD1C">//网站名称可以写多个名称，用空格分隔</font></div><div>location / {</div><div>index index.html;     <font color="#41AD1C">//默认首页</font></div><div>root html;     <font color="#41AD1C">//网页根目录位置，默认为Nginx安装目录下的html/子目录，root语句用来设置特定访问位置的网页文档路径，根据需要可改为/var/www/html等其他路径</font></div><div>}</div><div>charset gb2312;     <font color="#41AD1C">//网页默认字符集</font></div><div><font color="#DE5700">#设定本虚拟主机的访问日志</font></div><div>access_log logs/www.lnmp.com.access.log main;</div><div>error_page 500 502 503 504 /50x.html;     <font color="#41AD1C">//内部错误的反馈页面</font></div><div>location = /50x.html{</div><div>root html;</div><div>}</div><div>}</div><div>}</div><div><img src="lnmp环境搭建_files/Image [20].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;"/></div><div><br/></div><div><img src="lnmp环境搭建_files/Image [21].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;"/></div><div>Nginx的location</div><div>基本语法：</div><div>location [=|~|~*|^~|] /uri/ { ... }</div><div>=     表示做精确匹配</div><div>~     为区分大小写匹配</div><div>~*    为不区分大小写匹配</div><div>!~     和!~*分别为区分大小写不匹配及不区分大小写不匹配</div><div>正则表达式匹配，其中：</div><div>文件及目录匹配，其中：</div><div>-f 和 !-f 用来判断是否存在文件</div><div>-d 和 !-d 用来判断是否存在目录</div><div>-e 和 !-e 用来判断是否存在文件或目录</div><div>-x 和 !-x 用来判断文件是否可执行</div><div>例1：</div><div>location = / {</div><div><font color="#328712">#只匹配 / 查询</font></div><div>}</div><div>location / {</div><div><font color="#328712">#匹配任何查询，因为所有请求都以 / 开头，但是正则表达式规则和长的块规则将被优先查询匹配</font></div><div>}</div><div>例2：</div><div>location ^~ /images/ {</div><div><font color="#328712">#匹配任何以 /images/ 开头的任何查询并且停止搜索。任何正则表达式将不会被测试</font></div><div>}</div><div>例3：</div><div>location ~*\.(gif|jpg|jpeg)$ {</div><div><font color="#328712">#匹配任何以gif、jpg或jpeg结尾的请求</font></div><div>}</div><div>4、状态统计及虚拟主机应用：</div><div>Nginx内置了HTTP_STUB_STATU状态统计模块，用来反馈当前的WEB访问情况。配置编译参数时可添加--with-http_stub_status_module来启用此模块。要使用Nginx的状态统计功能，除了启用内建模块以外，还需要修改nginx.conf文件，指定访问位置并打开stub_status配置。在http{}配置的serve{}子配置内添加如下配置项</div><div><img src="lnmp环境搭建_files/Image [22].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;"/></div><div>注：location /tongji     <font color="#328712">//匹配任何包含/tongji的任何查询</font></div><div>stub_status on     <a><font color="#328712">//打开状态统计功能</font></a></div><div>Access_log off     <a><font color="#328712">//关闭此位置的日志记录</font></a></div><div><font color="#DE5700">Nginx支持为目录添加密码认证，使用apache的htpasswd来创建密码文件</font></div><div>auth_basic&quot;nginx status&quot;     <a><font color="#328712">//登录提示</font></a></div><div>auth_basic_user_file /usr/local/nginx/.htpasswd     <a><font color="#328712">//存用户密码的文件</font></a></div><div>htpasswd -c /usr/local/nginx/.htpasswd 用户名     <font color="#328712"><a>//</a>-c 为创建文件，以后将不用创建</font></div><div>在客户端通过http://ip地址/tongji访问</div><div><img src="lnmp环境搭建_files/Image [23].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;"/></div><div>保存修改过的nginx.conf文件并重启nginx服务使生效</div><div><img src="lnmp环境搭建_files/Image [24].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;"/></div><div>nginx -t     <a><font color="#328712">//检查语法错误</font></a></div><div><img src="lnmp环境搭建_files/Image [25].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;"/></div><div>新配置生效后，在浏览器访问Nginx服务器的/tongti网站位置（http://web服务器IP/tongji）可以看到状态统计信息</div><div><img src="lnmp环境搭建_files/Image [26].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;"/></div><div><img src="lnmp环境搭建_files/Image [27].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;cursor: default;"/></div><div>如上图所示：其中&quot;Active connections&quot;表示当前的活动连接数；而&quot;server accepts handled request&quot;表示已经处理连接信息，三个数字依次表示已处理的连接数、成功的TCP握手次数、已处理的请求数</div><div>客户端地址访问控制：</div><div><img src="lnmp环境搭建_files/Image [28].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;"/></div><div>注：allow允许规则，deny拒绝规则；规则的执行是按从上向下执行，匹配某条规则后将不再检查其他规则。</div><div>2）虚拟主机</div><div>使用Nginx搭建虚拟主机服务器时，每个虚拟WEB站点拥有独立的&quot;server{}&quot;配置段，各自监听的IP地址、端口号可以单独指定，当然网站名称也是不同的。</div><div>例如：要创建两个站点www.bennet.com和www.accp.com</div><div>为两个虚拟WEB主机分别建立根目录，并准备测试首页</div><div><img src="lnmp环境搭建_files/Image [29].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;"/></div><div>调整nginx.conf配置文件--域名虚拟主机</div><div>配置两个&quot;server{}&quot;区域，分别对应两个WEB站点，指定各自的网站名称、监听地址、网站根目录、访问日志等信息，然后重载配置</div><div><img src="lnmp环境搭建_files/Image [30].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;"/></div><div><br/></div><div><img src="lnmp环境搭建_files/Image [31].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;"/></div><div>测试：使用浏览器分别通过www.benet.com和www.accp.com访问两个WEB站点（注意域名解析。测试时没有dns服务器，可以在客户机的hosts文件中添加主机IP FQDN C:\Windows\System32\Drivers\etc\hosts）</div><div><img src="lnmp环境搭建_files/Image [32].png" type="image/png" data-filename="Image.png" style="cursor: default;cursor: default;"/></div><div><img src="lnmp环境搭建_files/Image [33].png" type="image/png" data-filename="Image.png" style="cursor: default;"/><img src="lnmp环境搭建_files/Image [34].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div>5、LEMP架构及应用部署</div><div>就像构建LAMP平台一样，构建LEMP平台也需要LINUX服务器、MYSQL数据库、PHP解析环境，区别主要在于Nginx与PHP的协作配置上</div><div>以编译方式安装Nginx（过程参照上面相关介绍完成）</div><div>安装MYSQL数据库------以编译方式安装</div><div>释放MYSQL的源码包：</div><div><img src="lnmp环境搭建_files/Image [35].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div>编译前配置：</div><div><img src="lnmp环境搭建_files/Image [36].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div>注：--with-charset：指定默认使用的字符集编码；</div><div>--with-collation：指定默认使用的字符集校对规则，utf8_general_ci是适用于UTF-8字符集的通用规则；</div><div>--with-extra-charset：指定额外支持的其他字符集编码</div><div>编译并安装MYSQL：</div><div><img src="lnmp环境搭建_files/Image [37].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div>优化调整：</div><div><img src="lnmp环境搭建_files/Image [38].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div><br/></div><div><img src="lnmp环境搭建_files/Image [39].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div>初始化数据库：</div><div><img src="lnmp环境搭建_files/Image [40].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div><img src="lnmp环境搭建_files/Image [41].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div>启动MYSQL服务及为root用户设置密码：</div><div><img src="lnmp环境搭建_files/Image [42].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div>安装PHP解析环境：</div><div>较新版本（如5.3）的PHP已经自带FPM(fastCGI process manager,FastCGI 进程管理器)模块，用来对PHP解析实例进行管理，优化解析效率，因此在配置PHP编译选项时应添加&quot;--enable-fpm&quot;以启用此模块。</div><div>为了提高PHP解析效率，建议将相应版本的ZendGuardLander也装上</div><div>释放PHP源码包：</div><div><img src="lnmp环境搭建_files/Image [43].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div>编译前配置：</div><div><img src="lnmp环境搭建_files/Image [44].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div>注：在REHL6的64系统中按上面的配置项配置可能会报以下错误，如果是报错的话请按如下方法解决：</div><div><img src="lnmp环境搭建_files/Image [45].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div>解决方法：</div><div>根据报错发现是因为libpng.so和libpng.a找不到，但libpng的相关软件包已经安装了，如下图查询结果，发现libpng的包都安装了。</div><div><img src="lnmp环境搭建_files/Image [46].png" type="image/png" data-filename="Image.png" style="cursor: default;"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">那为什么还报</span></font> <font color="#010101" size="2"><span style="font-size:10pt">libpng.so</span></font><font color="#010101" size="2"><span style="font-size:10pt">和</span></font><font color="#010101" size="2"><span style="font-size:10pt">libpng.a</span></font> <font color="#010101" size="2"><span style="font-size:10pt">找不到呢？</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">要解决的问题就是它没找到</span></font> <font color="#010101" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" size="2"><span style="font-size:10pt">我安装了的</span></font><font color="#010101" size="2"><span style="font-size:10pt">,</span></font> <font color="#010101" size="2"><span style="font-size:10pt">那我得去找找看它到底是放那里去了。执行下列命令，可以查找</span></font> <font color="#010101" size="2"><span style="font-size:10pt">libpng.so</span></font><font color="#010101" size="2"><span style="font-size: 10pt;">在那里。</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [47].png" type="image/png" data-filename="Image.png" alt="http://s6.sinaimg.cn/middle/c2a66b494e1a2a57f9c45&amp;690" border="0" height="36" style="cursor: default;" width="401"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [48].png" type="image/png" data-filename="Image.png" alt="http://s12.sinaimg.cn/middle/c2a66b494e1a2a56eba2b&amp;690" border="0" height="64" style="cursor: default;" width="386"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">通过上面的搜索其实就知道一些原因了</span></font> <font color="#010101" size="2"><span style="font-size:10pt">,configure</span></font><font color="#010101" size="2"><span style="font-size:10pt">一般的搜索编译路径为</span></font><font color="#010101" size="2"><span style="font-size:10pt">/usr/lib/</span></font><font color="#010101" size="2"><span style="font-size:10pt">下</span></font> <font color="#010101" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" size="2"><span style="font-size:10pt">因为</span></font><font color="#010101" size="2"><span style="font-size:10pt">php</span></font> <font color="#010101" size="2"><span style="font-size:10pt">默认就在</span></font> <font color="#010101" size="2"><span style="font-size:10pt">/usr/lib/</span></font><font color="#010101" size="2"><span style="font-size:10pt">下找相关库文件</span></font><font color="#010101" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" size="2"><span style="font-size:10pt">而</span></font> <font color="#010101" size="2"><span style="font-size:10pt">x64</span></font><font color="#010101" size="2"><span style="font-size:10pt">机器上是在</span></font><font color="#010101" size="2"><span style="font-size:10pt">:/usr/lib64.</span></font> <font color="#010101" size="2"><span style="font-size:10pt">这时你就可以直接把需要的库文件从</span></font> <font color="#010101" size="2"><span style="font-size:10pt">/usr/lib64</span></font><font color="#010101" size="2"><span style="font-size:10pt">中拷贝到</span></font><font color="#010101" size="2"><span style="font-size:10pt">/usr/lib/</span></font> <font color="#010101" size="2"><span style="font-size: 10pt;">中去就可以了</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [49].png" type="image/png" data-filename="Image.png" alt="http://s13.sinaimg.cn/middle/c2a66b494e1a2a58fed8c&amp;690" border="0" height="19" style="cursor: default;" width="544"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">解决完后重新执行</span></font> <font color="#010101" size="2"><span style="font-size:10pt">./configure</span></font><font color="#010101" size="2"><span style="font-size:10pt">进行编译前的配置</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">如果报</span></font> <font color="#010101" size="2"><span style="font-size:10pt">configure: error: libjpeg.(a|so) not found</span></font> <font color="#010101" size="2"><span style="font-size:10pt">错误解决方法和上面的解决方法类似。具体操作如下：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [50].png" type="image/png" data-filename="Image.png" alt="http://s14.sinaimg.cn/middle/c2a66b494e1a2a577999d&amp;690" border="0" height="21" style="cursor: default;" width="417"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [51].png" type="image/png" data-filename="Image.png" alt="http://s14.sinaimg.cn/middle/c2a66b494e1a2a59ee7ed&amp;690" border="0" height="19" style="cursor: default;" width="553"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">如果报下面错误</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">usr/bin/install: cannot create regular file `/usr/local/man/man1/cjpeg.1': No such file or directory<br/>
make: *** [install] Error 1<br/></span></font><font color="#010101" size="2"><span style="font-size:10pt">提示找不到目录。既然电脑找不到，咱们人脑可以找嘛，自己先创建先</span></font> <font color="#010101" size="2"><span style="font-size:10pt"><br/>
mkdir /usr/local/man<br/>
mkdir /usr/local/man1</span></font> <font color="#010101" size="2"><span style="font-size:10pt">创建完了再来</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">类似错误很多</span></font> <font color="#010101" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" size="2"><span style="font-size:10pt">方法也很多</span></font><font color="#010101" size="2"><span style="font-size:10pt">,</span></font> <font color="#010101" size="2"><span style="font-size:10pt">我们得灵活应变</span></font> <font color="#010101" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" size="2"><span style="font-size:10pt">具体问题具体分析</span></font><font color="#010101" size="2"><span style="font-size:10pt">!</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">编译并安装</span></font> <font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size: 10pt;">：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [52].png" type="image/png" data-filename="Image.png" alt="http://s14.sinaimg.cn/middle/c2a66b494e1a2a57c42fd&amp;690" border="0" height="18" style="cursor: default;" width="392"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">注：</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">安装后的调整：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [53].png" type="image/png" data-filename="Image.png" alt="http://s1.sinaimg.cn/middle/c2a66b494e1a2a5b38db0&amp;690" border="0" height="50" style="cursor: default;" width="553"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">安装</span></font> <font color="#010101" size="2"><span style="font-size:10pt">ZendGuardLander</span></font><font color="#010101" size="2"><span style="font-size:10pt">：</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">(</span></font><font color="#010101" size="2"><span style="font-size:10pt">注：若</span></font><font color="#010101" size="2"><span style="font-size:10pt">RHEL6</span></font> <font color="#010101" size="2"><span style="font-size:10pt">是</span></font><font color="#010101" size="2"><span style="font-size:10pt">64</span></font><font color="#010101" size="2"><span style="font-size:10pt">位系统，该软件得到其官网下载</span></font> <font color="#010101" size="2"><span style="font-size:10pt">64</span></font><font color="#010101" size="2"><span style="font-size:10pt">位的相应软件包，若用</span></font><font color="#010101" size="2"><span style="font-size:10pt">32</span></font><font color="#010101" size="2"><span style="font-size:10pt">位的就会报错。下载地址：</span></font> <font color="#010101" size="2"><span style="font-size: 10pt;">http://www.zend.com/en/products/guard/downloads)</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [54].png" type="image/png" data-filename="Image.png" alt="http://s15.sinaimg.cn/middle/c2a66b494e1a2a5cd3d1e&amp;690" border="0" height="64" style="cursor: default;" width="553"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">修改</span></font> <font color="#010101" size="2"><span style="font-size:10pt">php.ini</span></font><font color="#010101" size="2"><span style="font-size: 10pt;">文件：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [55].png" type="image/png" data-filename="Image.png" alt="http://s14.sinaimg.cn/middle/c2a66b494e1a2a5b3df8d&amp;690" border="0" height="17" style="cursor: default;" width="548"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">在</span></font><font color="#010101" size="2"><span style="font-size:10pt">php.ini</span></font><font color="#010101" size="2"><span style="font-size: 10pt;">中添加如下配置</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [56].png" type="image/png" data-filename="Image.png" alt="http://s10.sinaimg.cn/middle/c2a66b494e1a2a5d907b9&amp;690" border="0" height="31" style="cursor: default;" width="553"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">配置</span></font> <font color="#010101" size="2"><span style="font-size:10pt">Nginx</span></font><font color="#010101" size="2"><span style="font-size:10pt">支持</span></font><font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font> <font color="#010101" size="2"><span style="font-size:10pt">环境：</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">若要让</span></font> <font color="#010101" size="2"><span style="font-size:10pt">Nginx</span></font><font color="#010101" size="2"><span style="font-size:10pt">能够解析</span></font><font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font> <font color="#010101" size="2"><span style="font-size:10pt">网页，有两种方法可以选择；其一</span></font> <font color="#010101" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" size="2"><span style="font-size:10pt">充当中介，将访问</span></font><font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size:10pt">页面的</span></font> <font color="#010101" size="2"><span style="font-size:10pt">WEB</span></font><font color="#010101" size="2"><span style="font-size:10pt">请求转交给其他服务器（</span></font> <font color="#010101" size="2"><span style="font-size:10pt">LAMP</span></font><font color="#010101" size="2"><span style="font-size:10pt">）去处理；其二，通过使用</span></font> <font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size:10pt">的</span></font><font color="#010101" size="2"><span style="font-size:10pt">FPM</span></font> <font color="#010101" size="2"><span style="font-size:10pt">模块来调用本机的</span></font> <font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size:10pt">环境</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">如果选用</span></font> <font color="#010101" size="2"><span style="font-size:10pt">FPM</span></font><font color="#010101" size="2"><span style="font-size:10pt">方式，则需要先启动</span></font><font color="#010101" size="2"><span style="font-size:10pt">php-fpm</span></font><font color="#010101" size="2"><span style="font-size:10pt">进程，以便监听</span></font> <font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size:10pt">解析请求。参考范例建立</span></font> <font color="#010101" size="2"><span style="font-size:10pt">php-fpm.conf</span></font><font color="#010101" size="2"><span style="font-size:10pt">配置文件，并修改其中的</span></font> <font color="#010101" size="2"><span style="font-size:10pt">PID</span></font><font color="#010101" size="2"><span style="font-size:10pt">文件、运行用户、服务数（进程数量）等相关设置，然后启动</span></font> <font color="#010101" size="2"><span style="font-size:10pt">php-fpm</span></font><font color="#010101" size="2"><span style="font-size:10pt">程序即可（默认监听本机的</span></font> <font color="#010101" size="2"><span style="font-size:10pt">9000</span></font><font color="#010101" size="2"><span style="font-size: 10pt;">端口）</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [57].png" type="image/png" data-filename="Image.png" alt="http://s11.sinaimg.cn/middle/c2a66b494e1a2a5c2605a&amp;690" border="0" height="21" style="cursor: default;" width="486"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [58].png" type="image/png" data-filename="Image.png" alt="http://s14.sinaimg.cn/middle/c2a66b494e1a2a5df34dd&amp;690" border="0" height="28" style="cursor: default;" width="554"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">修改内容如下：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [59].png" type="image/png" data-filename="Image.png" alt="http://s10.sinaimg.cn/middle/c2a66b494e1a2a5d34f09&amp;690" border="0" height="19" style="cursor: default;" width="359"/></div><div align="justify"><font color="#328712"><font size="2"><span style="font-size: 10pt;">//</span></font><font size="2"><span style="font-size:10pt">确认</span></font><font size="2"><span style="font-size:10pt">pid</span></font> <font size="2"><span style="font-size: 10pt;">文件位置</span></font></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [60].png" type="image/png" data-filename="Image.png" alt="http://s6.sinaimg.cn/middle/c2a66b494e1a2a5f0bb95&amp;690" border="0" height="33" style="cursor: default;" width="553"/></div><div align="justify"><font color="#328712"><font size="2"><span style="font-size: 10pt;">//</span></font><font size="2"><span style="font-size: 10pt;">运行用户和运行组</span></font></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [61].png" type="image/png" data-filename="Image.png" alt="http://s16.sinaimg.cn/middle/c2a66b494e1a2a5ffb1ff&amp;690" border="0" height="160" style="cursor: default;" width="553"/></div><div align="justify"><font color="#328712"><font size="2"><span style="font-size: 10pt;">//</span></font><font size="2"><span style="font-size: 10pt;">启动时开启的进程数、最少空闲进程数、最多空闲进程数</span></font></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">按以上提示修改</span></font> <font color="#010101" size="2"><span style="font-size:10pt">php-fpm.conf</span></font><font color="#010101" size="2"><span style="font-size:10pt">文件，改完后保存退出。</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">启动</span></font> <font color="#010101" size="2"><span style="font-size:10pt">php-fpm</span></font><font color="#010101" size="2"><span style="font-size:10pt">并查看地址监听。（默认监听端口</span></font> <font color="#010101" size="2"><span style="font-size:10pt">9000</span></font><font color="#010101" size="2"><span style="font-size: 10pt;">）</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [62].png" type="image/png" data-filename="Image.png" alt="http://s9.sinaimg.cn/middle/c2a66b494e1a2a60e6a88&amp;690" border="0" height="51" style="cursor: default;" width="553"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size: 10pt;">在</span></font><font color="#010101" size="2"><span style="font-size:10pt">php-fpm.conf</span></font><font color="#010101" size="2"><span style="font-size:10pt">文件中，</span></font> <font color="#010101" size="2"><span style="font-size:10pt">pid</span></font><font color="#010101" size="2"><span style="font-size:10pt">配置行指出了</span></font><font color="#010101" size="2"><span style="font-size:10pt">PID</span></font><font color="#010101" size="2"><span style="font-size:10pt">信息的存放位置，对应的实际路径为</span></font> <font color="#010101" size="2"><span style="font-size:10pt">/usr/local/php5/var/run/php-fpm.pid</span></font><font color="#010101" size="2"><span style="font-size:10pt">，根据上述信息，可以修改</span></font> <font color="#010101" size="2"><span style="font-size:10pt">Nginx</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务脚本，以便在启动</span></font><font color="#010101" size="2"><span style="font-size:10pt">/</span></font><font color="#010101" size="2"><span style="font-size:10pt">停止</span></font> <font color="#010101" size="2"><span style="font-size:10pt">Nginx</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务器时将</span></font><font color="#010101" size="2"><span style="font-size:10pt">php-fpm</span></font> <font color="#010101" size="2"><span style="font-size:10pt">进程也自动启动</span></font> <font color="#010101" size="2"><span style="font-size:10pt">/</span></font><font color="#010101" size="2"><span style="font-size:10pt">停止。</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [63].png" type="image/png" data-filename="Image.png" alt="http://s2.sinaimg.cn/middle/c2a66b494e1a2a6304441&amp;690" border="0" height="19" style="cursor: default;" width="349"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">在</span></font><font color="#010101" size="2"><span style="font-size:10pt">nginx</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务脚本中添加如下内容：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [64].png" type="image/png" data-filename="Image.png" alt="http://s16.sinaimg.cn/middle/c2a66b494e1a2a64c5d5f&amp;690" border="0" height="317" style="cursor: default;" width="553"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">这样一来，一旦启动或关闭</span></font> <font color="#010101" size="2"><span style="font-size:10pt">nginx</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务，</span></font><font color="#010101" size="2"><span style="font-size:10pt">php-fpm</span></font> <font color="#010101" size="2"><span style="font-size:10pt">程序也会随之启动或关闭，不需要额外再启动或关闭</span></font> <font color="#010101" size="2"><span style="font-size:10pt">php-fpm.</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">配置</span></font> <font color="#010101" size="2"><span style="font-size:10pt">Nginx</span></font><font color="#010101" size="2"><span style="font-size:10pt">支持</span></font><font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font> <font color="#010101" size="2"><span style="font-size:10pt">解析：</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">无论是将</span></font> <font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size:10pt">页面交给</span></font><font color="#010101" size="2"><span style="font-size:10pt">LAMP</span></font> <font color="#010101" size="2"><span style="font-size:10pt">服务器去解析，还是调用本机的</span></font> <font color="#010101" size="2"><span style="font-size:10pt">php-fpm</span></font><font color="#010101" size="2"><span style="font-size:10pt">进程进行解析，都需要在</span></font> <font color="#010101" size="2"><span style="font-size:10pt">&quot;server{}&quot;</span></font><font color="#010101" size="2"><span style="font-size:10pt">配置段中添加</span></font><font color="#010101" size="2"><span style="font-size:10pt">location</span></font><font color="#010101" size="2"><span style="font-size:10pt">设置，以便指定当访问</span></font> <font color="#010101" size="2"><span style="font-size:10pt">.php</span></font><font color="#010101" size="2"><span style="font-size:10pt">面页时采取何种操作。</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt"> </span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">对于第一种方法（转交给其他</span></font> <font color="#010101" size="2"><span style="font-size:10pt">WEB</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务器处理），使用的配置语句如下所示，例如，交给</span></font> <font color="#010101" size="2"><span style="font-size:10pt">IP</span></font><font color="#010101" size="2"><span style="font-size:10pt">地址为</span></font><font color="#010101" size="2"><span style="font-size:10pt">192.168.0.200</span></font> <font color="#010101" size="2"><span style="font-size:10pt">的</span></font><font color="#010101" size="2"><span style="font-size:10pt">LAMP</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务器处理，从而实现由</span></font> <font color="#010101" size="2"><span style="font-size:10pt">Nginx</span></font><font color="#010101" size="2"><span style="font-size:10pt">负责静态页面，</span></font><font color="#010101" size="2"><span style="font-size:10pt">LAMP</span></font><font color="#010101" size="2"><span style="font-size:10pt">负责动态页面的分离效果。</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">server {</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">……</span></font> <font color="#010101" size="2"><span style="font-size:10pt">//</span></font><font color="#010101" size="2"><span style="font-size:10pt">省略部分信息</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">location ~ \.php$ { //</span></font> <font color="#010101" size="2"><span style="font-size:10pt">访问</span></font><font color="#010101" size="2"><span style="font-size:10pt">.php</span></font><font color="#010101" size="2"><span style="font-size:10pt">页面的配置段</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">proxy_pass</span></font> <font color="#010101" size="2"><span style="font-size:10pt">http://192.168.0.200:80</span></font><font color="#010101" size="2"><span style="font-size:10pt">; //APACHE</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务器的监听地址</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">}</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">上面这种写法只是发送以</span></font> <font color="#010101" size="2"><span style="font-size:10pt">.php</span></font><font color="#010101" size="2"><span style="font-size:10pt">为后缀的页面访问请求给其他</span></font> <font color="#010101" size="2"><span style="font-size:10pt">WEB</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务器，如果有其格式的文件访问（如：</span></font> <font color="#010101" size="2"><span style="font-size:10pt">html</span></font><font color="#010101" size="2"><span style="font-size:10pt">、</span></font><font color="#010101" size="2"><span style="font-size:10pt">jpg</span></font> <font color="#010101" size="2"><span style="font-size:10pt">等）就会出问题。访问不了了。</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">或者</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">location / { //</span></font><font color="#010101" size="2"><span style="font-size:10pt">访问</span></font><font color="#010101" size="2"><span style="font-size:10pt">.php</span></font> <font color="#010101" size="2"><span style="font-size:10pt">页面的配置段</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">proxy_pass</span></font> <font color="#010101" size="2"><span style="font-size:10pt">http://192.168.0.200:80</span></font><font color="#010101" size="2"><span style="font-size:10pt">; //APACHE</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务器的监听地址</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">}</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt"> </span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">}</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">对于第二种方法（调用本机的</span></font> <font color="#010101" size="2"><span style="font-size:10pt">php-fpm</span></font><font color="#010101" size="2"><span style="font-size:10pt">进程），使用的配置语句如下所示。在</span></font> <font color="#010101" size="2"><span style="font-size:10pt">conf/</span></font><font color="#010101" size="2"><span style="font-size:10pt">目录下的</span></font><font color="#010101" size="2"><span style="font-size:10pt">fastcgi.conf</span></font> <font color="#010101" size="2"><span style="font-size:10pt">文件中已经包含必需的宏设置，可通过</span></font> <font color="#010101" size="2"><span style="font-size:10pt">include</span></font><font color="#010101" size="2"><span style="font-size:10pt">语句添加进来。</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">server {</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">……</span></font> <font color="#328712"><font size="2"><span style="font-size: 10pt;">//</span></font><font size="2"><span style="font-size: 10pt;">省略部分信息</span></font></font></div><div align="justify"><font size="2"><span style="font-size: 10pt;"><font color="#010101">location ~ \.php$ {</font> <font color="#328712">//</font></span></font><font color="#328712"><font size="2"><span style="font-size:10pt">访问</span></font><font size="2"><span style="font-size:10pt">php</span></font><font size="2"><span style="font-size: 10pt;">页面的配置段</span></font></font></div><div align="justify"><font size="2"><span style="font-size: 10pt;"><font color="#010101">root /var/www/benet;</font> <font color="#328712">//PHP</font></span></font><font color="#328712"><font size="2"><span style="font-size: 10pt;">网页文档根目录</span></font></font></div><div align="justify"><font size="2"><span style="font-size: 10pt;"><font color="#010101">fastcgi_pass 127.0.0.1:9000;</font> <font color="#328712">//php-fpm</font></span></font><font color="#328712"><font size="2"><span style="font-size: 10pt;">的监听地址</span></font></font></div><div align="justify"><font size="2"><span style="font-size: 10pt;"><font color="#010101">fastcgi_index index.php;</font> <font color="#328712">//PHP</font></span></font><font color="#328712"><font size="2"><span style="font-size: 10pt;">首页文件</span></font></font></div><div align="justify"><font size="2"><span style="font-size: 10pt;"><font color="#010101">include fastcgi.conf;</font> <font color="#328712">//</font></span></font><font color="#328712"><font size="2"><span style="font-size:10pt">包括</span></font><font size="2"><span style="font-size:10pt">fastcgi.conf</span></font><font size="2"><span style="font-size: 10pt;">样本配置</span></font></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">}</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">}</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">本文档中我选择的是第二种方法，完成修改后重新加载</span></font> <font color="#010101" size="2"><span style="font-size:10pt">nginx</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务即可生效。</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [65].png" type="image/png" data-filename="Image.png" alt="http://s8.sinaimg.cn/middle/c2a66b494e1a2a665af67&amp;690" border="0" height="105" style="cursor: default;" width="327"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size:10pt">页面访问测试：</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">在</span></font><font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size:10pt">文档根目录下创建一个测试网页，以便测试</span></font> <font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size:10pt">语名能否正常解析，以及能否访问</span></font> <font color="#010101" size="2"><span style="font-size:10pt">MYSQL</span></font><font color="#010101" size="2"><span style="font-size:10pt">数据库。测试页内容如下：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [66].png" type="image/png" data-filename="Image.png" alt="http://s14.sinaimg.cn/middle/c2a66b4930d05a7e8e61d&amp;690" border="0" height="20" style="cursor: default;" width="427"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [67].png" type="image/png" data-filename="Image.png" alt="http://s6.sinaimg.cn/middle/c2a66b494e1a2a65ae525&amp;690" border="0" height="83" style="cursor: default;" width="543"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">然后访测试页如</span></font> <font color="#010101" size="2"><span style="font-size:10pt">:http://www.benet.com/test.php</span></font><font color="#010101" size="2"><span style="font-size:10pt">若能看到成功提示信息表示一切正常。</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [68].png" type="image/png" data-filename="Image.png" alt="http://s7.sinaimg.cn/middle/c2a66b494e1a2a684b516&amp;690" border="0" height="183" style="cursor: default;" width="405"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">在</span></font><font color="#010101" size="2"><span style="font-size:10pt">LEMP</span></font><font color="#010101" size="2"><span style="font-size:10pt">平台中部署</span></font> <font color="#010101" size="2"><span style="font-size:10pt">WEB</span></font><font color="#010101" size="2"><span style="font-size:10pt">应用：</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">LEMP</span></font><font color="#010101" size="2"><span style="font-size:10pt">平台与</span></font><font color="#010101" size="2"><span style="font-size:10pt">LAMP</span></font> <font color="#010101" size="2"><span style="font-size:10pt">平台是非常相似的，区别主要在于所用</span></font> <font color="#010101" size="2"><span style="font-size:10pt">WEB</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务软件的不同，而这与使用</span></font> <font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size:10pt">开发的</span></font><font color="#010101" size="2"><span style="font-size:10pt">WEB</span></font> <font color="#010101" size="2"><span style="font-size:10pt">应用程序并无太大关系，因此</span></font> <font color="#010101" size="2"><span style="font-size:10pt">PHP</span></font><font color="#010101" size="2"><span style="font-size:10pt">应用的部署方法也是类似的，</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">下面以</span></font> <font color="#010101" size="2"><span style="font-size:10pt">&quot;</span></font><font color="#010101" size="2"><span style="font-size:10pt">天空网络电影系统（简称</span></font> <font color="#010101" size="2"><span style="font-size:10pt">SKYUC</span></font><font color="#010101" size="2"><span style="font-size:10pt">）</span></font><font color="#010101" size="2"><span style="font-size:10pt">&quot;</span></font> <font color="#010101" size="2"><span style="font-size:10pt">为例介绍在</span></font> <font color="#010101" size="2"><span style="font-size:10pt">LEMP</span></font><font color="#010101" size="2"><span style="font-size:10pt">平台中的部署过程。</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">释放并部署程序代码：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [69].png" type="image/png" data-filename="Image.png" alt="http://s13.sinaimg.cn/middle/c2a66b494e1a2a67aab3c&amp;690" border="0" height="68" style="cursor: default;" width="553"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">创建数据库：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [70].png" type="image/png" data-filename="Image.png" alt="http://s16.sinaimg.cn/middle/c2a66b494e1a2a6bff39f&amp;690" border="0" height="214" style="cursor: default;" width="553"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">安装</span></font> <font color="#010101" size="2"><span style="font-size:10pt">WEB</span></font><font color="#010101" size="2"><span style="font-size:10pt">应用：</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">访问</span></font> <font color="#010101" size="2"><span style="font-size:10pt">http://www.benet.com/skyuc/install/index.php</span></font> <font color="#010101" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" size="2"><span style="font-size:10pt">将会打开</span></font><font color="#010101" size="2"><span style="font-size:10pt">SKYUC</span></font> <font color="#010101" size="2"><span style="font-size:10pt">的安装程序，根据页面提示，只需三步即可完成安装。要注意适当调整权限，最简单方法是：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [71].png" type="image/png" data-filename="Image.png" alt="http://s12.sinaimg.cn/middle/c2a66b494e1a2a6af415b&amp;690" border="0" height="20" style="cursor: default;" width="554"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">完成安装后，注意将</span></font> <font color="#010101" size="2"><span style="font-size:10pt">install/</span></font><font color="#010101" size="2"><span style="font-size:10pt">目录转移，以避免重复安装，降低安全风险。</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [72].png" type="image/png" data-filename="Image.png" alt="http://s3.sinaimg.cn/middle/c2a66b494e1a2a6d05122&amp;690" border="0" height="35" style="cursor: default;" width="411"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">访问</span></font> <font color="#010101" size="2"><span style="font-size:10pt">WEB</span></font><font color="#010101" size="2"><span style="font-size:10pt">应用系统：</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">通过访问</span></font> <font color="#010101" size="2"><span style="font-size:10pt">http://www.benet.com/skyuc</span></font> <font color="#010101" size="2"><span style="font-size:10pt">就可以访问了。</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">欢迎页面</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [73].png" type="image/png" data-filename="Image.png" alt="http://s14.sinaimg.cn/middle/c2a66b494e1a2a73adafd&amp;690" border="0" height="305" style="cursor: default;" width="576"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">检测系统环境</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [74].png" type="image/png" data-filename="Image.png" alt="http://s11.sinaimg.cn/middle/c2a66b494e1a2a7938cea&amp;690" border="0" height="315" style="cursor: default;" width="576"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">配置系统</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [75].png" type="image/png" data-filename="Image.png" alt="http://s14.sinaimg.cn/middle/c2a66b494e1a2a7bbab8d&amp;690" border="0" height="280" style="cursor: default;" width="576"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">立即安装</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [76].png" type="image/png" data-filename="Image.png" alt="http://s1.sinaimg.cn/middle/c2a66b494e1a2a7f79f00&amp;690" border="0" height="198" style="cursor: default;" width="576"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [77].png" type="image/png" data-filename="Image.png" alt="http://s10.sinaimg.cn/middle/c2a66b494e1a2a8301809&amp;690" border="0" height="312" style="cursor: default;" width="576"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">架设</span></font> <font color="#010101" size="2"><span style="font-size:10pt">Discuz</span></font><font color="#010101" size="2"><span style="font-size:10pt">论坛：</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">建立用于</span></font> <font color="#010101" size="2"><span style="font-size:10pt">bbs</span></font><font color="#010101" size="2"><span style="font-size:10pt">论坛的数据库及用户：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [78].png" type="image/png" data-filename="Image.png" alt="http://s7.sinaimg.cn/middle/c2a66b494e1a2a85333f6&amp;690" border="0" height="235" style="cursor: default;" width="553"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">解压下载的软件包，上传程序文件：</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [79].png" type="image/png" data-filename="Image.png" alt="http://s16.sinaimg.cn/middle/c2a66b494e1a2a874283f&amp;690" border="0" height="18" style="cursor: default;" width="554"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [80].png" type="image/png" data-filename="Image.png" alt="http://s5.sinaimg.cn/middle/c2a66b4930d05a9403904&amp;690" border="0" height="81" style="cursor: default;" width="554"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [81].png" type="image/png" data-filename="Image.png" alt="http://s5.sinaimg.cn/middle/c2a66b494e1a2a88031c4&amp;690" border="0" height="50" style="cursor: default;" width="553"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">在浏览器中访问</span></font> <font color="#010101" size="2"><span style="font-size:10pt">http://www.benet.com/bbs/install</span></font> <font color="#010101" size="2"><span style="font-size:10pt">根据向导页面的提示进行安装</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [82].png" type="image/png" data-filename="Image.png" alt="http://s15.sinaimg.cn/middle/c2a66b494e1a2a899bf0e&amp;690" border="0" height="222" style="cursor: default;" width="576"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">注：请将</span></font> <font color="#010101" size="2"><span style="font-size:10pt">/usr/local/php5/php.ini</span></font> <font color="#010101" size="2"><span style="font-size:10pt">文件中的</span></font> <font color="#010101" size="2"><span style="font-size:10pt">short_open_tag</span></font> <font color="#010101" size="2"><span style="font-size:10pt">设置为</span></font> <font color="#010101" size="2"><span style="font-size:10pt">On</span></font><font color="#010101" size="2"><span style="font-size:10pt">，然后重启</span></font> <font color="#010101" size="2"><span style="font-size:10pt">WEB</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务，否则程序无法正常运行</span></font> <font color="#010101" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" size="2"><span style="font-size:10pt">修改后要重启</span></font><font color="#010101" size="2"><span style="font-size:10pt">nginx</span></font><font color="#010101" size="2"><span style="font-size:10pt">服务。</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [83].png" type="image/png" data-filename="Image.png" alt="http://s13.sinaimg.cn/middle/c2a66b494e1a2a8cdc39c&amp;690" border="0" height="169" style="cursor: default;" width="576"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">通过访问</span></font> <font color="#010101" size="2"><span style="font-size:10pt">http://www.benet.com/bbs/install</span></font><font color="#010101" size="2"><span style="font-size:10pt">就可以访问了。</span></font></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">安装向导</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [84].png" type="image/png" data-filename="Image.png" alt="http://s6.sinaimg.cn/middle/c2a66b494e1a2a9333c15&amp;690" border="0" height="355" style="cursor: default;" width="576"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">检测运行环境</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [85].png" type="image/png" data-filename="Image.png" alt="http://s8.sinaimg.cn/middle/c2a66b494e1a2a96d2a87&amp;690" border="0" height="337" style="cursor: default;" width="576"/></div><div align="justify"><font color="#010101" size="2"><span style="font-size:10pt">chmod -R 777 ./uc_server/data/</span></font></div><div align="justify"><img src="lnmp环境搭建_files/Image [86].png" type="image/png" data-filename="Image.png" alt="http://s5.sinaimg.cn/middle/c2a66b494e1a2a98d2e14&amp;690" border="0" height="41" style="cursor: default;" width="540"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [87].png" type="image/png" data-filename="Image.png" alt="http://s15.sinaimg.cn/middle/c2a66b494e1a2a9b79a8e&amp;690" border="0" height="284" style="cursor: default;" width="576"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [88].png" type="image/png" data-filename="Image.png" alt="http://s5.sinaimg.cn/middle/c2a66b494e1a2aa0dc764&amp;690" border="0" height="479" style="cursor: default;" width="576"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [89].png" type="image/png" data-filename="Image.png" alt="http://s16.sinaimg.cn/middle/c2a66b494e1a2aa96f90f&amp;690" border="0" height="432" style="cursor: default;" width="576"/></div><div align="justify"><img src="lnmp环境搭建_files/Image [90].png" type="image/png" data-filename="Image.png" alt="http://s8.sinaimg.cn/middle/c2a66b494e1a2aaa5e6b7&amp;690" border="0" height="326" style="cursor: default;" width="576"/></div></span>
</div></body></html> 