<html>
<head>
  <title>k8s&amp;CKA</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2283"/>
<h1>k8s&amp;CKA</h1>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">Kubernetes基本概念</h2>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Pod
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">一组功能相关的Container的封装</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">共享存储和Network Namespace</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">K8S调度和作业运行的基本单位（Scheduler调度，Kubelet运行）</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">容易“走失”，需要Workload和Service的“呵护”</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Workloads（Deployment, StatefulSet, DaemonSet, Job...）
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">一组功能相关的Pod的封装</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Service
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Pod“防失联”</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">给一组pod设置反向代理</li>
</ul>
</li>
</ul>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">Kubernetes API对象的基本构成</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="k8s&CKA_files/api.png" type="image/png" data-filename="api.png"/></p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">使用kubelet与集群交互</h2>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">create            从文件或stdin创建资源</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">expose           为deployment，pod创建Service</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">run                Run a particular image on the cluster</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">set                Set specific features on objects</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">get                最基本的查询命令。如kubectl get rs, kubectl get deploy, kubectl get svc, kubectl get rs/foo</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">explain           查看资源定义。如kubectl explain replicaset</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">edit               使用系统编辑器编辑资源。如kubectl edit deploy/foo</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">delete            删除指定资源，支持文件名、资源名、label selector。如kubectl delete po -l foo=bar</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Deploy Commands:</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">rollout           Deployment, Daemonset的升级过程管理（查看状态、操作历史、暂停升级、恢复升级、回滚等）</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">rolling-update            客户端滚动升级，仅限ReplicationController</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">scale             修改Deployment, ReplicaSet, ReplicationController, Job的实例数</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">autoscale       为Deploy, RS, RC配置自动伸缩规则（依赖heapster和hpa）</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Cluster Management Commands:</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">certificate      Modify certificate resources.</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">cluster-info    查看集群信息</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">top              查看资源占用率（依赖heapster）</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">cordon         标记节点为unschedulable</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">uncordon      标记节点为schedulable</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">drain            驱逐节点上的应用，准备下线维护</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">taint            修改节点taint标记</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Troubleshooting and Debugging Commands:</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">describe       查看资源详情</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">logs            查看pod内容器的日志</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">attach         Attach到pod内的一个容器</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">exec           在指定容器内执行命令</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">port-forward            为pod创建本地端口映射</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">proxy          为kubernetes API server创建代理</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">cp              容器内外/容器间文件拷贝</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Advanced Commands:</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">apply          从文件或stdin创建/更新资源</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">patch          使用strategic merge patch语法更新对象的某些字段</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">replace        从文件或stdin更新资源</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">convert        在不同API版本之间转换对象定义</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Settings Commands:</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">label          给资源设置label</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">annotate     给资源设置annotation</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">completion  获取shell自动补全脚本（支持bash和zsh）</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Other Commands:</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">api-versions  Print the supported API versions on the server, in the form of &quot;group/version&quot;</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">config         修改kubectl配置（kubeconfig文件），如context</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">help           Help about any command</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">version       查看客户端和Server端k8s版本</li>
</ul>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">kubectl实用技巧</h2>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">配置kubectl自动完成<br/>
<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">source &lt;(kubectl completion bash)</code></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">用run命令生成yaml文件<br/>
<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">kubectl run --image=nginx my-nginx -o yaml --dry-run &gt; my-nginx-deploy.yaml</code></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">用get命令导出（针对已经存在的资源）<br/>
<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">kubectl get statefulset/foo -o=yaml --export &gt; new.yaml</code></li>
</ul>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">K8S调度器的资源分配机制</h2>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">基于Pod中容器request资源“总和”调度</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">resources.limits影响pod的运行资源上限，不影响调度</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">initContainer取最大值，container取累加值，最后取大者即Max( Max(initContainers.requests)，Sum(containers.request) )</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">未指定request资源时，按0资源需求进行搜索</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">基于资源声明量的调度，而非实际占用</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">不依赖监控，系统不会过于敏感</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">能否调度成功：<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">pod.request &lt; node.allocatable - node.requested</code></li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">Kubernetes node资源的盒子模型<br/>
<img src="k8s&CKA_files/resources.png" type="image/png" data-filename="resources.png"/></p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">资源分配相关算法</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">GeneralPredicates（主要是PodFitResources）</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">LeastRequestedPriority</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">BalancedResourceAllocation，平衡cpu/mem的消耗比例</li>
</ul>
</li>
</ul>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">Kubernetes中的高级调度及用法</h2>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">nodeSelector：将Pod调度到特定的Node上</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">语法格式：map[string]string</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">作用：
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">匹配node.labels</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">排除不包含nodeSelector中指定label的所有node</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">匹配机制---完全匹配</li>
</ul>
</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: v1
kind: Pod
metadata:
  labels:
    pod-template-hash: &quot;4173307778&quot;
    run: my-pod
  name: my-pod
  namespace: default
spec:
  containers:
  - image: nginx
    imagePullPolicy: Always
    name: my-pod
    ports:
    - containerPort: 80
      protocol: TCP
    resources: {}
  nodeSelector:
    disktype: ssd
    node-flavor: s3.large.2
</code></pre>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">nodeAffinity：nodeSelector升级版</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">与nodeSelector关键差异
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">引入运算符：</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">支持枚举label可能的取值，如zone in [az1, az2, az3...]</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">支持<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">硬性过滤</code>和<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">软性评分</code></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">硬性过滤规则支持指定<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">多条件之间的逻辑或运算</code></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">软性评分规则支持<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">设置条件权重值</code></li>
</ul>
</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: v1
kind: Pod
metadata:
  name: with-node-affinity
spec:
  affinity:
    nodeAffinity:
    #硬性过滤：排除不具备指定label的node
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: node-flavor
            operator: In
            values:
            - s3.large.2
            - s3.large.3
      #软性评分：不具备指定label的node打低分，降低node被选中的几率
      preferredDuringSchedulingIgnoredDuringExpression:
      - weight: 1
        preference:
          matchExpressions:
          - key: node-flavor
            operator: In
            values:
            - s3.large.2
  containers:
  - name: with-node-affinity
    image: k8s.gcr.io/pause:2.0
</code></pre>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">podAffinity：让某些Pod分布在同一组Node上</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">与nodeAffinity的关键差异
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">定义在PodSpec中，亲和与反亲和规则具有对称性</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">labelSelector的匹配对象为Pod</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">对node分组，依据label-key = topologyKey，每个label-value取值为一组</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">硬性过滤规则，条件间只有逻辑与运算</li>
</ul>
</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: v1
kind: pod
metadata:
  name: with-pod-affinity
spec:
  affinity:
    podAffinity:
      #硬性过滤：排除不具备指定pod的node组
      requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
        matchExpressions:
        - key: security
          operator: In
          values:
          - S1
        topologyKey: kubernetes.io/zone
      #软性评分：不具备指定pod的node组打低分，降低该组node被选中的几率
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
            - key: security
              operator: In
              values:
              - S2
          topologyKey: kubernetes.io/hostname
  containers:
  - name: with-pod-affinity
    image: k8s.gcr.io/pause:2.0
</code></pre>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">podAntiAffinity：避免某些Pod分布在同一组Node上</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">与podAffinity的差异
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">匹配过程相同</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">最终处理调度结果时取反<br/>
即</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">podAffinity中可调度节点，在podAntiAffinity中为不可调度</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">podAffinity中高分节点，在podAntiAffinity中为低分</li>
</ul>
</li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">Taints：避免Pod调度到特定Node上</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">带effect的特殊label，对Pod有排斥性
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">硬性排斥NoSchedule</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">软性排斥PreferNoshedule</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">系统创建的taint附带时间戳
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">effect为NoExecute</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">便于触发对Pod的超时驱逐</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">典型用法：预留特殊节点做特殊用途<br/>
给node添加taint</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">kubectl taint node node-n1 foo=bar:NoSchedule
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">删除taint</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">kubectl taint node node-n1 foo:NoSchedule-
</code></pre>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: v1
kind: Node
metadata:
  labels:
    beta.kubernetes.io/arch: amd64
    beta.kubernetes.io/os: linux
    kubernetes.io/hostname: node-n1
  name: node-n1
spec:
  externalID: node-n1
  taints:
  - effect: NoSchedule
    key: accelerator
    timeAdded: null
    value: gpu
status: {...}
</code></pre>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">kubernetes网络</h2>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">Pod网络</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">一个Pod一个IP
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">每个Pod独立IP，Pod内所有容器共享网络namespace（同一个IP）</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">容器之间直接通信，不需要NAT</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Node和容器直接通信，不需要NAT</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">其他容器和容器自身看到的IP是一样的</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">集群内访问走Service，集群外访问走Ingress</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">CNI（container network interface）用于配置Pod网络
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">不支持docker网络<br/>
<img src="k8s&CKA_files/k8s-run.png" type="image/png" data-filename="k8s-run.png"/></li>
</ul>
</li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">CNI：Container Network Interface</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">容器网络的标准化</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">使用JSON来描述网络配置</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">两类接口：
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">配置网络--创建容器时调用<br/>
AddNetwork(net NetworkConfig, rt RuntimeConf) (types.Result, error)</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">清理网络--删除容器时调用<br/>
DelNetwork(net NetworkConfig, rt RuntimeConf)</li>
</ul>
</li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">CNI插件：host-local + bridge</h3>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">$ cat /etc/cni/net.d/10-mynet.conf
{
    &quot;name&quot;: &quot;mynet&quot;,
    &quot;type&quot;: &quot;bridge&quot;,
    &quot;ipam&quot;: {
        &quot;type&quot;: &quot;host-local&quot;
        &quot;subnet&quot;: &quot;10.10.0.0/16&quot;
    }
}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">CNI plugin二进制文件：/opt/cni/bin/{host-local, bridge...}</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">Kubernetes Service</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="k8s&CKA_files/service.png" type="image/png" data-filename="service.png"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">Service和Endpoints定义</h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: v1
kind: Service
metadata:
  name: nginx-service
  namespace: default
spec:
  clusterIP: 10.101.28.148
  ports:
  - name: http
    port: 80
    protocol: TCP
    targetPort: 8080
  selector:
    app: nginx
    
---
apiVersion: v1
kind: EndPoints
metadata:
  name: nginx-service
  namespace: default
subnets:
- addresses:
  - ip: 172.17.0.2
    nodeName: 100-106-179-237.node
    targetRef:
      kind: Pod
      name: nginx-rc-c8tw2
      namespace: default
  - ip: 172.17.0.3
    nodeName: 100-106-179-238.node
    targetRef:
      kind: Pod
      name: nginx-rc-x14tv
      namespace: default
  ports:
  - name: http
    port: 8080
    protocol: TCP
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">LoadBalancer类型Service</h4>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">同时是ClusterIP类型</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">需要跑在特定的cloud provider上
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Service Controller自动创建一个外部LB并配置安全组</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">对集群内访问，kube-proxy用iptables或ipvs实现了云服务提供商LB部分功能：L4转发，安全组规则等。</li>
</ul>
</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: v1
kind: Service
metadata:
  name: my-service
spec:
  selector:
    app: MyApp
  ports:
  - protocol: TCP
    port: 80
    targetPort: 9376
  clusterIP: 10.0.171.239
  loadBalancerIP: 78.11.24.19       #外部LB IP
  type: LoadBalancer
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">Ingress</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Ingress是授权入站连接到达集群服务的规则集合</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">支持通过URL方式将Service暴露到K8S集群外，Service之上的L7访问入口</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">支持自定义Service的访问策略</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">提供按域名访问的虚拟主机功能</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">支持TLS<br/>
<img src="k8s&CKA_files/ingress.png" type="image/png" data-filename="ingress.png"/></li>
</ul>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">K8S存储管理</h2>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">持久化存储卷（PersistentVolume）</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">存储系统与应用系统区分开，单独资源对象，它不直接和Pod发生关系，通过另一个资源对象PersistentVolumeClaim来绑定关联</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">PV生命周期<br/>
<img src="k8s&CKA_files/pvlivecycle.png" type="image/png" data-filename="pvlivecycle.png"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Provisioning：PV的预制创建有两种模式：静态模式和动态模式<br/>
静态模式：队创建PVC外，还需手动创建PV<br/>
<img src="k8s&CKA_files/staticpv.png" type="image/png" data-filename="staticpv.png"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">动态模式：只需创建PVC，系统根据PVC自动创建PV<br/>
<img src="k8s&CKA_files/dynamicpv.png" type="image/png" data-filename="dynamicpv.png"/></p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">持久化存储卷声明（PersistentVolumeClaim）</h3>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mongodb-pv-claim
  labels:
    app: mongodb
spec:
  accessModes:                  #存储访问模式，此能力依赖存储厂商的能力
  - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi              #存储大小
  storageClassName: sata    #存储类型，适配不同场景
</code></pre>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">K8S安全管理</h2>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">部署态的安全控制
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">认证</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">鉴权</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Admission（准入控制）</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Pod SecurityContext</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">运行态的安全控制
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Network policy</li>
</ul>
</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">安全全景图<br/>
<img src="k8s&CKA_files/security.png" type="image/png" data-filename="security.png"/></p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">认证（Authentication）和鉴权（Authorization）</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">认证支持多种方式，其中一种认证方式认证通过即通过，输出userinfo</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">基于认证输出的userinfo进行鉴权，鉴权也支持多种方式，常用方式为RBAC</li>
</ul>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">认证（Authentication）</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">认证方式有：X509、service account、Authenticating Proxy、WebHook、username/password...<br/>
常用认证方式介绍：</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">X509：
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">kube-apiserver的启动参数<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">‘--client-ca-file=ca.crt’</code>指定X509根证书，请求中需带有由该根证书签名的证书，才能认证通过</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">客户端签署的证书里包含user、group信息，具体为证书的subject.CommonName（username）以及subject.Organization（group）<br/>
<img src="k8s&CKA_files/authentication.png" type="image/png" data-filename="authentication.png"/></li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Service account（为k8s必选的认证方式）：
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">kube-apiserver的启动参数<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">‘--service-account-key-file=key.pem’</code>指定pem文件，用以生成kearer token；<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">‘--service-account-lookup=true/fasle’</code>表示在删除service acount后其token是否被吊销</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Serviceaccount Admission默认给Pod打上service account，当然用户也可以自行指定所需要的service account<br/>
<img src="k8s&CKA_files/serviceaccount.png" type="image/png" data-filename="serviceaccount.png"/><br/>
<img src="k8s&CKA_files/serviceaccountdefault.png" type="image/png" data-filename="serviceaccountdefault.png"/></li>
</ul>
</li>
</ul>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">鉴权（Authorization）</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">鉴权分为以下几种：RBAC、ABAC、Node以及Webhook<br/>
常用RBAC介绍：<br/>
<img src="k8s&CKA_files/authorizationrbac.png" type="image/png" data-filename="authorizationrbac.png"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">Admission(PodSecurityPolicy)</h4>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Kube-apiserver的启动参数<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">‘--admission-control=PodSecurityPolicy’</code>新增PodSecurityPolicy admisson</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Admin用户创建PodSecurityPolicy策略，决定能创建什么样的Pod</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">创建Pod的用户也必须赋予它能使用PodSecurityPolicy策略的权限</li>
</ul>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">安全的持久化保存键值（etcd）</h4>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">etcd支持备份恢复机制，防止数据被误删除导致数据丢失</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">用户敏感信息建议存放在secret类型的资源中，该类型资源是加密存储在etcd中</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">etcd支持https，kube-apiserver访问etcd使用https协议</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">具体配置方式：<br/>
<img src="k8s&CKA_files/etcd.png" type="image/png" data-filename="etcd.png"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">安全上下文（Pod SecurityContext）</h4>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">分为Pod级别和容器级别，容器级别的会覆盖Pod级别的相同设置。</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">在PodSecurityPolicy策略的情况下，两者需要配合使用。</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: v1
kind: Pod
metadata:
  name: wangbo
spec:
  securityContext:
    privileged: false               #是否使用特权容器
    runAsUser: 1000              #指定容器启动UID
    fsGroup: 2000                 #指定Pod中容器文件所属组GID
  volumes:
  - name: test
    emptyDir: {}
  containers:
  - name: test
    image: gcr.io/google-samples/node-hello:1.0
    volumeMounts:
    - name: test
      mountPath: /data/test
    securityContext:
      readOnlyRootFilesystem: false             #容器的文件系统是否是只读
      runAsUser: 1001
      privileged: false
      capabilities:                                     #容器系统调用能力配置
        add: [&quot;NET_ADMIN&quot;, &quot;SYS_TIME&quot;]
        drop: [&quot;SYS_BOOT&quot;]
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">Network Policy</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">分为Ingress和Engress策略控制，都为白名单</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Ingress为入口请求控制</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Egress为出品请求控制</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: test-network-policy
  namespace: default
spec:
  podSelector:
    matchLabels:                        #规则匹配器，选择匹配的Pod
      role: db
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from
    - ipBlock:
      cidr: 172.17.0.0/16               #远端（访问端）IP白名单开放
      except:
      - 172.17.1.0/24
    - namespaceSelector:
      matchLabels:                      #远端（访问端）namespace白名单开放
        project: myproject
    - podSelector:
      matchLabels:                      #远端（访问端）pod白名单开放
        role: frontend
    ports:                                  #本端（被访问端）允许被访问的端口和协议
    - protocol: TCP
      port: 6379
  egress:
  - to:
    - ipBlock:
      cidr: 10.0.0.0/24
    ports:
    - protocol: TCP
      port: 5978
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">禁止所有入口请求</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny
spec:
  podSelector: {}
  policyTypes:
  - Ingress
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">禁止所有出口请求</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny
spec:
  podSelector: {}
  policyTypes:
  - Egress
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">允许所有入口请求</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-all
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  ingress:
  - {}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">允许所有出口请求</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-all
spec:
  podSelector: {}
  policyTypes:
  - Egress
  egress:
  - {}
</code></pre>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%23%20Kubernetes%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%0A-%20Pod%0A%20%20%20%20-%20%E4%B8%80%E7%BB%84%E5%8A%9F%E8%83%BD%E7%9B%B8%E5%85%B3%E7%9A%84Container%E7%9A%84%E5%B0%81%E8%A3%85%0A%20%20%20%20-%20%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8%E5%92%8CNetwork%20Namespace%0A%20%20%20%20-%20K8S%E8%B0%83%E5%BA%A6%E5%92%8C%E4%BD%9C%E4%B8%9A%E8%BF%90%E8%A1%8C%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8D%95%E4%BD%8D%EF%BC%88Scheduler%E8%B0%83%E5%BA%A6%EF%BC%8CKubelet%E8%BF%90%E8%A1%8C%EF%BC%89%0A%20%20%20%20-%20%E5%AE%B9%E6%98%93%E2%80%9C%E8%B5%B0%E5%A4%B1%E2%80%9D%EF%BC%8C%E9%9C%80%E8%A6%81Workload%E5%92%8CService%E7%9A%84%E2%80%9C%E5%91%B5%E6%8A%A4%E2%80%9D%0A-%20Workloads%EF%BC%88Deployment%2C%20StatefulSet%2C%20DaemonSet%2C%20Job...%EF%BC%89%0A%20%20%20%20-%20%E4%B8%80%E7%BB%84%E5%8A%9F%E8%83%BD%E7%9B%B8%E5%85%B3%E7%9A%84Pod%E7%9A%84%E5%B0%81%E8%A3%85%0A-%20Service%0A%20%20%20%20-%20Pod%E2%80%9C%E9%98%B2%E5%A4%B1%E8%81%94%E2%80%9D%0A%20%20%20%20-%20%E7%BB%99%E4%B8%80%E7%BB%84pod%E8%AE%BE%E7%BD%AE%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%0A%0A%23%23%20Kubernetes%20API%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9E%84%E6%88%90%0A!%5B7a6c07368d23907f79b59b010ca212ab.png%5D(en-resource%3A%2F%2Fdatabase%2F2285%3A1)%0A%0A%23%23%20%E4%BD%BF%E7%94%A8kubelet%E4%B8%8E%E9%9B%86%E7%BE%A4%E4%BA%A4%E4%BA%92%0A-%20create%20%20%20%20%20%20%20%20%20%20%20%20%E4%BB%8E%E6%96%87%E4%BB%B6%E6%88%96stdin%E5%88%9B%E5%BB%BA%E8%B5%84%E6%BA%90%0A-%20expose%20%20%20%20%20%20%20%20%20%20%20%E4%B8%BAdeployment%EF%BC%8Cpod%E5%88%9B%E5%BB%BAService%0A-%20run%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Run%20a%20particular%20image%20on%20the%20cluster%0A-%20set%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Set%20specific%20features%20on%20objects%0A-%20get%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4%E3%80%82%E5%A6%82kubectl%20get%20rs%2C%20kubectl%20get%20deploy%2C%20kubectl%20get%20svc%2C%20kubectl%20get%20rs%2Ffoo%0A-%20explain%20%20%20%20%20%20%20%20%20%20%20%E6%9F%A5%E7%9C%8B%E8%B5%84%E6%BA%90%E5%AE%9A%E4%B9%89%E3%80%82%E5%A6%82kubectl%20explain%20replicaset%0A-%20edit%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E4%BD%BF%E7%94%A8%E7%B3%BB%E7%BB%9F%E7%BC%96%E8%BE%91%E5%99%A8%E7%BC%96%E8%BE%91%E8%B5%84%E6%BA%90%E3%80%82%E5%A6%82kubectl%20edit%20deploy%2Ffoo%0A-%20delete%20%20%20%20%20%20%20%20%20%20%20%20%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E8%B5%84%E6%BA%90%EF%BC%8C%E6%94%AF%E6%8C%81%E6%96%87%E4%BB%B6%E5%90%8D%E3%80%81%E8%B5%84%E6%BA%90%E5%90%8D%E3%80%81label%20selector%E3%80%82%E5%A6%82kubectl%20delete%20po%20-l%20foo%3Dbar%0A%0ADeploy%20Commands%3A%0A-%20rollout%20%20%20%20%20%20%20%20%20%20%20Deployment%2C%20Daemonset%E7%9A%84%E5%8D%87%E7%BA%A7%E8%BF%87%E7%A8%8B%E7%AE%A1%E7%90%86%EF%BC%88%E6%9F%A5%E7%9C%8B%E7%8A%B6%E6%80%81%E3%80%81%E6%93%8D%E4%BD%9C%E5%8E%86%E5%8F%B2%E3%80%81%E6%9A%82%E5%81%9C%E5%8D%87%E7%BA%A7%E3%80%81%E6%81%A2%E5%A4%8D%E5%8D%87%E7%BA%A7%E3%80%81%E5%9B%9E%E6%BB%9A%E7%AD%89%EF%BC%89%0A-%20rolling-update%20%20%20%20%20%20%20%20%20%20%20%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%BB%9A%E5%8A%A8%E5%8D%87%E7%BA%A7%EF%BC%8C%E4%BB%85%E9%99%90ReplicationController%0A-%20scale%20%20%20%20%20%20%20%20%20%20%20%20%20%E4%BF%AE%E6%94%B9Deployment%2C%20ReplicaSet%2C%20ReplicationController%2C%20Job%E7%9A%84%E5%AE%9E%E4%BE%8B%E6%95%B0%0A-%20autoscale%20%20%20%20%20%20%20%E4%B8%BADeploy%2C%20RS%2C%20RC%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E4%BC%B8%E7%BC%A9%E8%A7%84%E5%88%99%EF%BC%88%E4%BE%9D%E8%B5%96heapster%E5%92%8Chpa%EF%BC%89%0A%0ACluster%20Management%20Commands%3A%0A-%20certificate%20%20%20%20%20%20Modify%20certificate%20resources.%0A-%20cluster-info%20%20%20%20%E6%9F%A5%E7%9C%8B%E9%9B%86%E7%BE%A4%E4%BF%A1%E6%81%AF%0A-%20top%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E6%9F%A5%E7%9C%8B%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8%E7%8E%87%EF%BC%88%E4%BE%9D%E8%B5%96heapster%EF%BC%89%0A-%20cordon%20%20%20%20%20%20%20%20%20%E6%A0%87%E8%AE%B0%E8%8A%82%E7%82%B9%E4%B8%BAunschedulable%0A-%20uncordon%20%20%20%20%20%20%E6%A0%87%E8%AE%B0%E8%8A%82%E7%82%B9%E4%B8%BAschedulable%0A-%20drain%20%20%20%20%20%20%20%20%20%20%20%20%E9%A9%B1%E9%80%90%E8%8A%82%E7%82%B9%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%8C%E5%87%86%E5%A4%87%E4%B8%8B%E7%BA%BF%E7%BB%B4%E6%8A%A4%0A-%20taint%20%20%20%20%20%20%20%20%20%20%20%20%E4%BF%AE%E6%94%B9%E8%8A%82%E7%82%B9taint%E6%A0%87%E8%AE%B0%0A%0ATroubleshooting%20and%20Debugging%20Commands%3A%0A-%20describe%20%20%20%20%20%20%20%E6%9F%A5%E7%9C%8B%E8%B5%84%E6%BA%90%E8%AF%A6%E6%83%85%0A-%20logs%20%20%20%20%20%20%20%20%20%20%20%20%E6%9F%A5%E7%9C%8Bpod%E5%86%85%E5%AE%B9%E5%99%A8%E7%9A%84%E6%97%A5%E5%BF%97%0A-%20attach%20%20%20%20%20%20%20%20%20Attach%E5%88%B0pod%E5%86%85%E7%9A%84%E4%B8%80%E4%B8%AA%E5%AE%B9%E5%99%A8%0A-%20exec%20%20%20%20%20%20%20%20%20%20%20%E5%9C%A8%E6%8C%87%E5%AE%9A%E5%AE%B9%E5%99%A8%E5%86%85%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%0A-%20port-forward%20%20%20%20%20%20%20%20%20%20%20%20%E4%B8%BApod%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%0A-%20proxy%20%20%20%20%20%20%20%20%20%20%E4%B8%BAkubernetes%20API%20server%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%90%86%0A-%20cp%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E5%AE%B9%E5%99%A8%E5%86%85%E5%A4%96%2F%E5%AE%B9%E5%99%A8%E9%97%B4%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D%0A%0AAdvanced%20Commands%3A%0A-%20apply%20%20%20%20%20%20%20%20%20%20%E4%BB%8E%E6%96%87%E4%BB%B6%E6%88%96stdin%E5%88%9B%E5%BB%BA%2F%E6%9B%B4%E6%96%B0%E8%B5%84%E6%BA%90%0A-%20patch%20%20%20%20%20%20%20%20%20%20%E4%BD%BF%E7%94%A8strategic%20merge%20patch%E8%AF%AD%E6%B3%95%E6%9B%B4%E6%96%B0%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9F%90%E4%BA%9B%E5%AD%97%E6%AE%B5%0A-%20replace%20%20%20%20%20%20%20%20%E4%BB%8E%E6%96%87%E4%BB%B6%E6%88%96stdin%E6%9B%B4%E6%96%B0%E8%B5%84%E6%BA%90%0A-%20convert%20%20%20%20%20%20%20%20%E5%9C%A8%E4%B8%8D%E5%90%8CAPI%E7%89%88%E6%9C%AC%E4%B9%8B%E9%97%B4%E8%BD%AC%E6%8D%A2%E5%AF%B9%E8%B1%A1%E5%AE%9A%E4%B9%89%0A%0ASettings%20Commands%3A%0A-%20label%20%20%20%20%20%20%20%20%20%20%E7%BB%99%E8%B5%84%E6%BA%90%E8%AE%BE%E7%BD%AElabel%0A-%20annotate%20%20%20%20%20%E7%BB%99%E8%B5%84%E6%BA%90%E8%AE%BE%E7%BD%AEannotation%0A-%20completion%20%20%E8%8E%B7%E5%8F%96shell%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%E8%84%9A%E6%9C%AC%EF%BC%88%E6%94%AF%E6%8C%81bash%E5%92%8Czsh%EF%BC%89%0A%0AOther%20Commands%3A%0A-%20api-versions%20%20Print%20the%20supported%20API%20versions%20on%20the%20server%2C%20in%20the%20form%20of%20%22group%2Fversion%22%0A-%20config%20%20%20%20%20%20%20%20%20%E4%BF%AE%E6%94%B9kubectl%E9%85%8D%E7%BD%AE%EF%BC%88kubeconfig%E6%96%87%E4%BB%B6%EF%BC%89%EF%BC%8C%E5%A6%82context%0A-%20help%20%20%20%20%20%20%20%20%20%20%20Help%20about%20any%20command%0A-%20version%20%20%20%20%20%20%20%E6%9F%A5%E7%9C%8B%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%92%8CServer%E7%AB%AFk8s%E7%89%88%E6%9C%AC%0A%0A%23%23%20kubectl%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7%0A-%20%E9%85%8D%E7%BD%AEkubectl%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%0A%60source%20%3C(kubectl%20completion%20bash)%60%0A-%20%E7%94%A8run%E5%91%BD%E4%BB%A4%E7%94%9F%E6%88%90yaml%E6%96%87%E4%BB%B6%0A%60kubectl%20run%20--image%3Dnginx%20my-nginx%20-o%20yaml%20--dry-run%20%3E%20my-nginx-deploy.yaml%60%0A-%20%E7%94%A8get%E5%91%BD%E4%BB%A4%E5%AF%BC%E5%87%BA%EF%BC%88%E9%92%88%E5%AF%B9%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E7%9A%84%E8%B5%84%E6%BA%90%EF%BC%89%0A%60kubectl%20get%20statefulset%2Ffoo%20-o%3Dyaml%20--export%20%3E%20new.yaml%60%0A%0A%23%23%20K8S%E8%B0%83%E5%BA%A6%E5%99%A8%E7%9A%84%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D%E6%9C%BA%E5%88%B6%0A-%20%E5%9F%BA%E4%BA%8EPod%E4%B8%AD%E5%AE%B9%E5%99%A8request%E8%B5%84%E6%BA%90%E2%80%9C%E6%80%BB%E5%92%8C%E2%80%9D%E8%B0%83%E5%BA%A6%0A%20%20%20%20-%20resources.limits%E5%BD%B1%E5%93%8Dpod%E7%9A%84%E8%BF%90%E8%A1%8C%E8%B5%84%E6%BA%90%E4%B8%8A%E9%99%90%EF%BC%8C%E4%B8%8D%E5%BD%B1%E5%93%8D%E8%B0%83%E5%BA%A6%0A%20%20%20%20-%20initContainer%E5%8F%96%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BC%8Ccontainer%E5%8F%96%E7%B4%AF%E5%8A%A0%E5%80%BC%EF%BC%8C%E6%9C%80%E5%90%8E%E5%8F%96%E5%A4%A7%E8%80%85%E5%8D%B3Max(%20Max(initContainers.requests)%EF%BC%8CSum(containers.request)%20)%0A%20%20%20%20-%20%E6%9C%AA%E6%8C%87%E5%AE%9Arequest%E8%B5%84%E6%BA%90%E6%97%B6%EF%BC%8C%E6%8C%890%E8%B5%84%E6%BA%90%E9%9C%80%E6%B1%82%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%0A-%20%E5%9F%BA%E4%BA%8E%E8%B5%84%E6%BA%90%E5%A3%B0%E6%98%8E%E9%87%8F%E7%9A%84%E8%B0%83%E5%BA%A6%EF%BC%8C%E8%80%8C%E9%9D%9E%E5%AE%9E%E9%99%85%E5%8D%A0%E7%94%A8%0A%20%20%20%20-%20%E4%B8%8D%E4%BE%9D%E8%B5%96%E7%9B%91%E6%8E%A7%EF%BC%8C%E7%B3%BB%E7%BB%9F%E4%B8%8D%E4%BC%9A%E8%BF%87%E4%BA%8E%E6%95%8F%E6%84%9F%0A%20%20%20%20-%20%E8%83%BD%E5%90%A6%E8%B0%83%E5%BA%A6%E6%88%90%E5%8A%9F%EF%BC%9A%60pod.request%20%3C%20node.allocatable%20-%20node.requested%60%0A-%20Kubernetes%20node%E8%B5%84%E6%BA%90%E7%9A%84%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B%0A!%5B7686fa8cea5f4e1340f6b6be48d0b7a1.png%5D(en-resource%3A%2F%2Fdatabase%2F2287%3A1)%0A%0A-%20%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D%E7%9B%B8%E5%85%B3%E7%AE%97%E6%B3%95%0A%20%20%20%20-%20GeneralPredicates%EF%BC%88%E4%B8%BB%E8%A6%81%E6%98%AFPodFitResources%EF%BC%89%0A%20%20%20%20-%20LeastRequestedPriority%0A%20%20%20%20-%20BalancedResourceAllocation%EF%BC%8C%E5%B9%B3%E8%A1%A1cpu%2Fmem%E7%9A%84%E6%B6%88%E8%80%97%E6%AF%94%E4%BE%8B%0A%0A%23%23%20Kubernetes%E4%B8%AD%E7%9A%84%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E5%8F%8A%E7%94%A8%E6%B3%95%0A%23%23%23%20nodeSelector%EF%BC%9A%E5%B0%86Pod%E8%B0%83%E5%BA%A6%E5%88%B0%E7%89%B9%E5%AE%9A%E7%9A%84Node%E4%B8%8A%0A-%20%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F%EF%BC%9Amap%5Bstring%5Dstring%0A-%20%E4%BD%9C%E7%94%A8%EF%BC%9A%0A%20%20%20%20-%20%E5%8C%B9%E9%85%8Dnode.labels%0A%20%20%20%20-%20%E6%8E%92%E9%99%A4%E4%B8%8D%E5%8C%85%E5%90%ABnodeSelector%E4%B8%AD%E6%8C%87%E5%AE%9Alabel%E7%9A%84%E6%89%80%E6%9C%89node%0A%20%20%20%20-%20%E5%8C%B9%E9%85%8D%E6%9C%BA%E5%88%B6---%E5%AE%8C%E5%85%A8%E5%8C%B9%E9%85%8D%0A%0A%60%60%60%0AapiVersion%3A%20v1%0Akind%3A%20Pod%0Ametadata%3A%0A%20%20labels%3A%0A%20%20%20%20pod-template-hash%3A%20%224173307778%22%0A%20%20%20%20run%3A%20my-pod%0A%20%20name%3A%20my-pod%0A%20%20namespace%3A%20default%0Aspec%3A%0A%20%20containers%3A%0A%20%20-%20image%3A%20nginx%0A%20%20%20%20imagePullPolicy%3A%20Always%0A%20%20%20%20name%3A%20my-pod%0A%20%20%20%20ports%3A%0A%20%20%20%20-%20containerPort%3A%2080%0A%20%20%20%20%20%20protocol%3A%20TCP%0A%20%20%20%20resources%3A%20%7B%7D%0A%20%20nodeSelector%3A%0A%20%20%20%20disktype%3A%20ssd%0A%20%20%20%20node-flavor%3A%20s3.large.2%0A%60%60%60%0A%0A%23%23%23%20nodeAffinity%EF%BC%9AnodeSelector%E5%8D%87%E7%BA%A7%E7%89%88%0A-%20%E4%B8%8EnodeSelector%E5%85%B3%E9%94%AE%E5%B7%AE%E5%BC%82%0A%20%20%20%20-%20%E5%BC%95%E5%85%A5%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%9A%0A%20%20%20%20-%20%E6%94%AF%E6%8C%81%E6%9E%9A%E4%B8%BElabel%E5%8F%AF%E8%83%BD%E7%9A%84%E5%8F%96%E5%80%BC%EF%BC%8C%E5%A6%82zone%20in%20%5Baz1%2C%20az2%2C%20az3...%5D%0A%20%20%20%20-%20%E6%94%AF%E6%8C%81%60%E7%A1%AC%E6%80%A7%E8%BF%87%E6%BB%A4%60%E5%92%8C%60%E8%BD%AF%E6%80%A7%E8%AF%84%E5%88%86%60%0A%20%20%20%20-%20%E7%A1%AC%E6%80%A7%E8%BF%87%E6%BB%A4%E8%A7%84%E5%88%99%E6%94%AF%E6%8C%81%E6%8C%87%E5%AE%9A%60%E5%A4%9A%E6%9D%A1%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%BB%E8%BE%91%E6%88%96%E8%BF%90%E7%AE%97%60%0A%20%20%20%20-%20%E8%BD%AF%E6%80%A7%E8%AF%84%E5%88%86%E8%A7%84%E5%88%99%E6%94%AF%E6%8C%81%60%E8%AE%BE%E7%BD%AE%E6%9D%A1%E4%BB%B6%E6%9D%83%E9%87%8D%E5%80%BC%60%0A%0A%60%60%60%0AapiVersion%3A%20v1%0Akind%3A%20Pod%0Ametadata%3A%0A%20%20name%3A%20with-node-affinity%0Aspec%3A%0A%20%20affinity%3A%0A%20%20%20%20nodeAffinity%3A%0A%20%20%20%20%23%E7%A1%AC%E6%80%A7%E8%BF%87%E6%BB%A4%EF%BC%9A%E6%8E%92%E9%99%A4%E4%B8%8D%E5%85%B7%E5%A4%87%E6%8C%87%E5%AE%9Alabel%E7%9A%84node%0A%20%20%20%20%20%20requiredDuringSchedulingIgnoredDuringExecution%3A%0A%20%20%20%20%20%20%20%20nodeSelectorTerms%3A%0A%20%20%20%20%20%20%20%20-%20matchExpressions%3A%0A%20%20%20%20%20%20%20%20%20%20-%20key%3A%20node-flavor%0A%20%20%20%20%20%20%20%20%20%20%20%20operator%3A%20In%0A%20%20%20%20%20%20%20%20%20%20%20%20values%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20-%20s3.large.2%0A%20%20%20%20%20%20%20%20%20%20%20%20-%20s3.large.3%0A%20%20%20%20%20%20%23%E8%BD%AF%E6%80%A7%E8%AF%84%E5%88%86%EF%BC%9A%E4%B8%8D%E5%85%B7%E5%A4%87%E6%8C%87%E5%AE%9Alabel%E7%9A%84node%E6%89%93%E4%BD%8E%E5%88%86%EF%BC%8C%E9%99%8D%E4%BD%8Enode%E8%A2%AB%E9%80%89%E4%B8%AD%E7%9A%84%E5%87%A0%E7%8E%87%0A%20%20%20%20%20%20preferredDuringSchedulingIgnoredDuringExpression%3A%0A%20%20%20%20%20%20-%20weight%3A%201%0A%20%20%20%20%20%20%20%20preference%3A%0A%20%20%20%20%20%20%20%20%20%20matchExpressions%3A%0A%20%20%20%20%20%20%20%20%20%20-%20key%3A%20node-flavor%0A%20%20%20%20%20%20%20%20%20%20%20%20operator%3A%20In%0A%20%20%20%20%20%20%20%20%20%20%20%20values%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20-%20s3.large.2%0A%20%20containers%3A%0A%20%20-%20name%3A%20with-node-affinity%0A%20%20%20%20image%3A%20k8s.gcr.io%2Fpause%3A2.0%0A%60%60%60%20%0A%0A%23%23%23%20podAffinity%EF%BC%9A%E8%AE%A9%E6%9F%90%E4%BA%9BPod%E5%88%86%E5%B8%83%E5%9C%A8%E5%90%8C%E4%B8%80%E7%BB%84Node%E4%B8%8A%0A-%20%E4%B8%8EnodeAffinity%E7%9A%84%E5%85%B3%E9%94%AE%E5%B7%AE%E5%BC%82%0A%20%20%20%20-%20%E5%AE%9A%E4%B9%89%E5%9C%A8PodSpec%E4%B8%AD%EF%BC%8C%E4%BA%B2%E5%92%8C%E4%B8%8E%E5%8F%8D%E4%BA%B2%E5%92%8C%E8%A7%84%E5%88%99%E5%85%B7%E6%9C%89%E5%AF%B9%E7%A7%B0%E6%80%A7%0A%20%20%20%20-%20labelSelector%E7%9A%84%E5%8C%B9%E9%85%8D%E5%AF%B9%E8%B1%A1%E4%B8%BAPod%0A%20%20%20%20-%20%E5%AF%B9node%E5%88%86%E7%BB%84%EF%BC%8C%E4%BE%9D%E6%8D%AElabel-key%20%3D%20topologyKey%EF%BC%8C%E6%AF%8F%E4%B8%AAlabel-value%E5%8F%96%E5%80%BC%E4%B8%BA%E4%B8%80%E7%BB%84%0A%20%20%20%20-%20%E7%A1%AC%E6%80%A7%E8%BF%87%E6%BB%A4%E8%A7%84%E5%88%99%EF%BC%8C%E6%9D%A1%E4%BB%B6%E9%97%B4%E5%8F%AA%E6%9C%89%E9%80%BB%E8%BE%91%E4%B8%8E%E8%BF%90%E7%AE%97%0A%0A%60%60%60%0AapiVersion%3A%20v1%0Akind%3A%20pod%0Ametadata%3A%0A%20%20name%3A%20with-pod-affinity%0Aspec%3A%0A%20%20affinity%3A%0A%20%20%20%20podAffinity%3A%0A%20%20%20%20%20%20%23%E7%A1%AC%E6%80%A7%E8%BF%87%E6%BB%A4%EF%BC%9A%E6%8E%92%E9%99%A4%E4%B8%8D%E5%85%B7%E5%A4%87%E6%8C%87%E5%AE%9Apod%E7%9A%84node%E7%BB%84%0A%20%20%20%20%20%20requiredDuringSchedulingIgnoredDuringExecution%3A%0A%20%20%20%20%20%20-%20labelSelector%3A%0A%20%20%20%20%20%20%20%20matchExpressions%3A%0A%20%20%20%20%20%20%20%20-%20key%3A%20security%0A%20%20%20%20%20%20%20%20%20%20operator%3A%20In%0A%20%20%20%20%20%20%20%20%20%20values%3A%0A%20%20%20%20%20%20%20%20%20%20-%20S1%0A%20%20%20%20%20%20%20%20topologyKey%3A%20kubernetes.io%2Fzone%0A%20%20%20%20%20%20%23%E8%BD%AF%E6%80%A7%E8%AF%84%E5%88%86%EF%BC%9A%E4%B8%8D%E5%85%B7%E5%A4%87%E6%8C%87%E5%AE%9Apod%E7%9A%84node%E7%BB%84%E6%89%93%E4%BD%8E%E5%88%86%EF%BC%8C%E9%99%8D%E4%BD%8E%E8%AF%A5%E7%BB%84node%E8%A2%AB%E9%80%89%E4%B8%AD%E7%9A%84%E5%87%A0%E7%8E%87%0A%20%20%20%20%20%20preferredDuringSchedulingIgnoredDuringExecution%3A%0A%20%20%20%20%20%20-%20weight%3A%20100%0A%20%20%20%20%20%20%20%20podAffinityTerm%3A%0A%20%20%20%20%20%20%20%20%20%20labelSelector%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20matchExpressions%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20-%20key%3A%20security%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20operator%3A%20In%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20values%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20S2%0A%20%20%20%20%20%20%20%20%20%20topologyKey%3A%20kubernetes.io%2Fhostname%0A%20%20containers%3A%0A%20%20-%20name%3A%20with-pod-affinity%0A%20%20%20%20image%3A%20k8s.gcr.io%2Fpause%3A2.0%0A%60%60%60%0A%0A%23%23%23%20podAntiAffinity%EF%BC%9A%E9%81%BF%E5%85%8D%E6%9F%90%E4%BA%9BPod%E5%88%86%E5%B8%83%E5%9C%A8%E5%90%8C%E4%B8%80%E7%BB%84Node%E4%B8%8A%0A-%20%E4%B8%8EpodAffinity%E7%9A%84%E5%B7%AE%E5%BC%82%0A%20%20%20%20-%20%E5%8C%B9%E9%85%8D%E8%BF%87%E7%A8%8B%E7%9B%B8%E5%90%8C%0A%20%20%20%20-%20%E6%9C%80%E7%BB%88%E5%A4%84%E7%90%86%E8%B0%83%E5%BA%A6%E7%BB%93%E6%9E%9C%E6%97%B6%E5%8F%96%E5%8F%8D%0A%20%20%20%20%E5%8D%B3%0A%20%20%20%20-%20podAffinity%E4%B8%AD%E5%8F%AF%E8%B0%83%E5%BA%A6%E8%8A%82%E7%82%B9%EF%BC%8C%E5%9C%A8podAntiAffinity%E4%B8%AD%E4%B8%BA%E4%B8%8D%E5%8F%AF%E8%B0%83%E5%BA%A6%0A%20%20%20%20-%20podAffinity%E4%B8%AD%E9%AB%98%E5%88%86%E8%8A%82%E7%82%B9%EF%BC%8C%E5%9C%A8podAntiAffinity%E4%B8%AD%E4%B8%BA%E4%BD%8E%E5%88%86%0A%0A%23%23%23%20Taints%EF%BC%9A%E9%81%BF%E5%85%8DPod%E8%B0%83%E5%BA%A6%E5%88%B0%E7%89%B9%E5%AE%9ANode%E4%B8%8A%0A-%20%E5%B8%A6effect%E7%9A%84%E7%89%B9%E6%AE%8Alabel%EF%BC%8C%E5%AF%B9Pod%E6%9C%89%E6%8E%92%E6%96%A5%E6%80%A7%0A%20%20%20%20-%20%E7%A1%AC%E6%80%A7%E6%8E%92%E6%96%A5NoSchedule%0A%20%20%20%20-%20%E8%BD%AF%E6%80%A7%E6%8E%92%E6%96%A5PreferNoshedule%0A-%20%E7%B3%BB%E7%BB%9F%E5%88%9B%E5%BB%BA%E7%9A%84taint%E9%99%84%E5%B8%A6%E6%97%B6%E9%97%B4%E6%88%B3%0A%20%20%20%20-%20effect%E4%B8%BANoExecute%0A%20%20%20%20-%20%E4%BE%BF%E4%BA%8E%E8%A7%A6%E5%8F%91%E5%AF%B9Pod%E7%9A%84%E8%B6%85%E6%97%B6%E9%A9%B1%E9%80%90%0A-%20%E5%85%B8%E5%9E%8B%E7%94%A8%E6%B3%95%EF%BC%9A%E9%A2%84%E7%95%99%E7%89%B9%E6%AE%8A%E8%8A%82%E7%82%B9%E5%81%9A%E7%89%B9%E6%AE%8A%E7%94%A8%E9%80%94%0A%E7%BB%99node%E6%B7%BB%E5%8A%A0taint%0A%60%60%60%0Akubectl%20taint%20node%20node-n1%20foo%3Dbar%3ANoSchedule%0A%60%60%60%0A%0A%E5%88%A0%E9%99%A4taint%0A%60%60%60%0Akubectl%20taint%20node%20node-n1%20foo%3ANoSchedule-%0A%60%60%60%0A%0A%60%60%60%0AapiVersion%3A%20v1%0Akind%3A%20Node%0Ametadata%3A%0A%20%20labels%3A%0A%20%20%20%20beta.kubernetes.io%2Farch%3A%20amd64%0A%20%20%20%20beta.kubernetes.io%2Fos%3A%20linux%0A%20%20%20%20kubernetes.io%2Fhostname%3A%20node-n1%0A%20%20name%3A%20node-n1%0Aspec%3A%0A%20%20externalID%3A%20node-n1%0A%20%20taints%3A%0A%20%20-%20effect%3A%20NoSchedule%0A%20%20%20%20key%3A%20accelerator%0A%20%20%20%20timeAdded%3A%20null%0A%20%20%20%20value%3A%20gpu%0Astatus%3A%20%7B...%7D%0A%60%60%60%0A%0A%23%23%20kubernetes%E7%BD%91%E7%BB%9C%0A%23%23%23%20Pod%E7%BD%91%E7%BB%9C%0A-%20%E4%B8%80%E4%B8%AAPod%E4%B8%80%E4%B8%AAIP%0A%20%20%20%20-%20%E6%AF%8F%E4%B8%AAPod%E7%8B%AC%E7%AB%8BIP%EF%BC%8CPod%E5%86%85%E6%89%80%E6%9C%89%E5%AE%B9%E5%99%A8%E5%85%B1%E4%BA%AB%E7%BD%91%E7%BB%9Cnamespace%EF%BC%88%E5%90%8C%E4%B8%80%E4%B8%AAIP%EF%BC%89%0A%20%20%20%20-%20%E5%AE%B9%E5%99%A8%E4%B9%8B%E9%97%B4%E7%9B%B4%E6%8E%A5%E9%80%9A%E4%BF%A1%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81NAT%0A%20%20%20%20-%20Node%E5%92%8C%E5%AE%B9%E5%99%A8%E7%9B%B4%E6%8E%A5%E9%80%9A%E4%BF%A1%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81NAT%0A%20%20%20%20-%20%E5%85%B6%E4%BB%96%E5%AE%B9%E5%99%A8%E5%92%8C%E5%AE%B9%E5%99%A8%E8%87%AA%E8%BA%AB%E7%9C%8B%E5%88%B0%E7%9A%84IP%E6%98%AF%E4%B8%80%E6%A0%B7%E7%9A%84%0A-%20%E9%9B%86%E7%BE%A4%E5%86%85%E8%AE%BF%E9%97%AE%E8%B5%B0Service%EF%BC%8C%E9%9B%86%E7%BE%A4%E5%A4%96%E8%AE%BF%E9%97%AE%E8%B5%B0Ingress%0A-%20CNI%EF%BC%88container%20network%20interface%EF%BC%89%E7%94%A8%E4%BA%8E%E9%85%8D%E7%BD%AEPod%E7%BD%91%E7%BB%9C%0A%20%20%20%20-%20%E4%B8%8D%E6%94%AF%E6%8C%81docker%E7%BD%91%E7%BB%9C%0A!%5Bb742d1148a847340e841c328d2c274b4.png%5D(en-resource%3A%2F%2Fdatabase%2F2289%3A1)%0A%0A%23%23%23%20CNI%EF%BC%9AContainer%20Network%20Interface%0A-%20%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C%E7%9A%84%E6%A0%87%E5%87%86%E5%8C%96%0A-%20%E4%BD%BF%E7%94%A8JSON%E6%9D%A5%E6%8F%8F%E8%BF%B0%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%0A-%20%E4%B8%A4%E7%B1%BB%E6%8E%A5%E5%8F%A3%EF%BC%9A%0A%20%20%20%20-%20%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C--%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8%E6%97%B6%E8%B0%83%E7%94%A8%0A%20%20%20%20AddNetwork(net%20NetworkConfig%2C%20rt%20RuntimeConf)%20(types.Result%2C%20error)%0A%20%20%20%20-%20%E6%B8%85%E7%90%86%E7%BD%91%E7%BB%9C--%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8%E6%97%B6%E8%B0%83%E7%94%A8%0A%20%20%20%20DelNetwork(net%20NetworkConfig%2C%20rt%20RuntimeConf)%0A%0A%23%23%23%20CNI%E6%8F%92%E4%BB%B6%EF%BC%9Ahost-local%20%2B%20bridge%0A%60%60%60%0A%24%20cat%20%2Fetc%2Fcni%2Fnet.d%2F10-mynet.conf%0A%7B%0A%20%20%20%20%22name%22%3A%20%22mynet%22%2C%0A%20%20%20%20%22type%22%3A%20%22bridge%22%2C%0A%20%20%20%20%22ipam%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22host-local%22%0A%20%20%20%20%20%20%20%20%22subnet%22%3A%20%2210.10.0.0%2F16%22%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0ACNI%20plugin%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%EF%BC%9A%2Fopt%2Fcni%2Fbin%2F%7Bhost-local%2C%20bridge...%7D%0A%0A%23%23%23%20Kubernetes%20Service%0A!%5B2ea5b3ca1c881a651c56363fc51422ba.png%5D(en-resource%3A%2F%2Fdatabase%2F2291%3A1)%0A%0A%23%23%23%23%20Service%E5%92%8CEndpoints%E5%AE%9A%E4%B9%89%0A%60%60%60%0AapiVersion%3A%20v1%0Akind%3A%20Service%0Ametadata%3A%0A%20%20name%3A%20nginx-service%0A%20%20namespace%3A%20default%0Aspec%3A%0A%20%20clusterIP%3A%2010.101.28.148%0A%20%20ports%3A%0A%20%20-%20name%3A%20http%0A%20%20%20%20port%3A%2080%0A%20%20%20%20protocol%3A%20TCP%0A%20%20%20%20targetPort%3A%208080%0A%20%20selector%3A%0A%20%20%20%20app%3A%20nginx%0A%20%20%20%20%0A---%0AapiVersion%3A%20v1%0Akind%3A%20EndPoints%0Ametadata%3A%0A%20%20name%3A%20nginx-service%0A%20%20namespace%3A%20default%0Asubnets%3A%0A-%20addresses%3A%0A%20%20-%20ip%3A%20172.17.0.2%0A%20%20%20%20nodeName%3A%20100-106-179-237.node%0A%20%20%20%20targetRef%3A%0A%20%20%20%20%20%20kind%3A%20Pod%0A%20%20%20%20%20%20name%3A%20nginx-rc-c8tw2%0A%20%20%20%20%20%20namespace%3A%20default%0A%20%20-%20ip%3A%20172.17.0.3%0A%20%20%20%20nodeName%3A%20100-106-179-238.node%0A%20%20%20%20targetRef%3A%0A%20%20%20%20%20%20kind%3A%20Pod%0A%20%20%20%20%20%20name%3A%20nginx-rc-x14tv%0A%20%20%20%20%20%20namespace%3A%20default%0A%20%20ports%3A%0A%20%20-%20name%3A%20http%0A%20%20%20%20port%3A%208080%0A%20%20%20%20protocol%3A%20TCP%0A%60%60%60%0A%0A%23%23%23%23%20LoadBalancer%E7%B1%BB%E5%9E%8BService%0A-%20%E5%90%8C%E6%97%B6%E6%98%AFClusterIP%E7%B1%BB%E5%9E%8B%0A-%20%E9%9C%80%E8%A6%81%E8%B7%91%E5%9C%A8%E7%89%B9%E5%AE%9A%E7%9A%84cloud%20provider%E4%B8%8A%0A%20%20%20%20-%20Service%20Controller%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%A4%96%E9%83%A8LB%E5%B9%B6%E9%85%8D%E7%BD%AE%E5%AE%89%E5%85%A8%E7%BB%84%0A%20%20%20%20-%20%E5%AF%B9%E9%9B%86%E7%BE%A4%E5%86%85%E8%AE%BF%E9%97%AE%EF%BC%8Ckube-proxy%E7%94%A8iptables%E6%88%96ipvs%E5%AE%9E%E7%8E%B0%E4%BA%86%E4%BA%91%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E5%95%86LB%E9%83%A8%E5%88%86%E5%8A%9F%E8%83%BD%EF%BC%9AL4%E8%BD%AC%E5%8F%91%EF%BC%8C%E5%AE%89%E5%85%A8%E7%BB%84%E8%A7%84%E5%88%99%E7%AD%89%E3%80%82%0A%60%60%60%0AapiVersion%3A%20v1%0Akind%3A%20Service%0Ametadata%3A%0A%20%20name%3A%20my-service%0Aspec%3A%0A%20%20selector%3A%0A%20%20%20%20app%3A%20MyApp%0A%20%20ports%3A%0A%20%20-%20protocol%3A%20TCP%0A%20%20%20%20port%3A%2080%0A%20%20%20%20targetPort%3A%209376%0A%20%20clusterIP%3A%2010.0.171.239%0A%20%20loadBalancerIP%3A%2078.11.24.19%20%20%20%20%20%20%20%23%E5%A4%96%E9%83%A8LB%20IP%0A%20%20type%3A%20LoadBalancer%0A%60%60%60%0A%0A%23%23%23%23%20Ingress%0AIngress%E6%98%AF%E6%8E%88%E6%9D%83%E5%85%A5%E7%AB%99%E8%BF%9E%E6%8E%A5%E5%88%B0%E8%BE%BE%E9%9B%86%E7%BE%A4%E6%9C%8D%E5%8A%A1%E7%9A%84%E8%A7%84%E5%88%99%E9%9B%86%E5%90%88%0A-%20%E6%94%AF%E6%8C%81%E9%80%9A%E8%BF%87URL%E6%96%B9%E5%BC%8F%E5%B0%86Service%E6%9A%B4%E9%9C%B2%E5%88%B0K8S%E9%9B%86%E7%BE%A4%E5%A4%96%EF%BC%8CService%E4%B9%8B%E4%B8%8A%E7%9A%84L7%E8%AE%BF%E9%97%AE%E5%85%A5%E5%8F%A3%0A-%20%E6%94%AF%E6%8C%81%E8%87%AA%E5%AE%9A%E4%B9%89Service%E7%9A%84%E8%AE%BF%E9%97%AE%E7%AD%96%E7%95%A5%0A-%20%E6%8F%90%E4%BE%9B%E6%8C%89%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E7%9A%84%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E5%8A%9F%E8%83%BD%0A-%20%E6%94%AF%E6%8C%81TLS%0A!%5Bb19337231260d6d55898a470f70c0fa4.png%5D(en-resource%3A%2F%2Fdatabase%2F2293%3A1)%0A%0A%23%23%20K8S%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%0A%23%23%23%20%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8%E5%8D%B7%EF%BC%88PersistentVolume%EF%BC%89%0A%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E4%B8%8E%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E5%8C%BA%E5%88%86%E5%BC%80%EF%BC%8C%E5%8D%95%E7%8B%AC%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AE%83%E4%B8%8D%E7%9B%B4%E6%8E%A5%E5%92%8CPod%E5%8F%91%E7%94%9F%E5%85%B3%E7%B3%BB%EF%BC%8C%E9%80%9A%E8%BF%87%E5%8F%A6%E4%B8%80%E4%B8%AA%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1PersistentVolumeClaim%E6%9D%A5%E7%BB%91%E5%AE%9A%E5%85%B3%E8%81%94%0A%0APV%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%0A!%5B493f2f85f49ac5d598f763883f929ec1.png%5D(en-resource%3A%2F%2Fdatabase%2F2295%3A1)%0A%0AProvisioning%EF%BC%9APV%E7%9A%84%E9%A2%84%E5%88%B6%E5%88%9B%E5%BB%BA%E6%9C%89%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%BC%8F%EF%BC%9A%E9%9D%99%E6%80%81%E6%A8%A1%E5%BC%8F%E5%92%8C%E5%8A%A8%E6%80%81%E6%A8%A1%E5%BC%8F%0A%E9%9D%99%E6%80%81%E6%A8%A1%E5%BC%8F%EF%BC%9A%E9%98%9F%E5%88%9B%E5%BB%BAPVC%E5%A4%96%EF%BC%8C%E8%BF%98%E9%9C%80%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BAPV%0A!%5B8d9f126c9415edf8183cfe926b1e13ba.png%5D(en-resource%3A%2F%2Fdatabase%2F2297%3A1)%0A%0A%E5%8A%A8%E6%80%81%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%8F%AA%E9%9C%80%E5%88%9B%E5%BB%BAPVC%EF%BC%8C%E7%B3%BB%E7%BB%9F%E6%A0%B9%E6%8D%AEPVC%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BAPV%0A!%5Be8a785796963cf72fd59fa3da20cfd44.png%5D(en-resource%3A%2F%2Fdatabase%2F2299%3A1)%0A%0A%23%23%23%20%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8%E5%8D%B7%E5%A3%B0%E6%98%8E%EF%BC%88PersistentVolumeClaim%EF%BC%89%0A%60%60%60%0AapiVersion%3A%20v1%0Akind%3A%20PersistentVolumeClaim%0Ametadata%3A%0A%20%20name%3A%20mongodb-pv-claim%0A%20%20labels%3A%0A%20%20%20%20app%3A%20mongodb%0Aspec%3A%0A%20%20accessModes%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E5%AD%98%E5%82%A8%E8%AE%BF%E9%97%AE%E6%A8%A1%E5%BC%8F%EF%BC%8C%E6%AD%A4%E8%83%BD%E5%8A%9B%E4%BE%9D%E8%B5%96%E5%AD%98%E5%82%A8%E5%8E%82%E5%95%86%E7%9A%84%E8%83%BD%E5%8A%9B%0A%20%20-%20ReadWriteOnce%0A%20%20resources%3A%0A%20%20%20%20requests%3A%0A%20%20%20%20%20%20storage%3A%205Gi%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E5%AD%98%E5%82%A8%E5%A4%A7%E5%B0%8F%0A%20%20storageClassName%3A%20sata%20%20%20%20%23%E5%AD%98%E5%82%A8%E7%B1%BB%E5%9E%8B%EF%BC%8C%E9%80%82%E9%85%8D%E4%B8%8D%E5%90%8C%E5%9C%BA%E6%99%AF%0A%60%60%60%0A%0A%23%23%20K8S%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%0A-%20%E9%83%A8%E7%BD%B2%E6%80%81%E7%9A%84%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%0A%20%20%20%20-%20%E8%AE%A4%E8%AF%81%0A%20%20%20%20-%20%E9%89%B4%E6%9D%83%0A%20%20%20%20-%20Admission%EF%BC%88%E5%87%86%E5%85%A5%E6%8E%A7%E5%88%B6%EF%BC%89%0A%20%20%20%20-%20Pod%20SecurityContext%0A-%20%E8%BF%90%E8%A1%8C%E6%80%81%E7%9A%84%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%0A%20%20%20%20-%20Network%20policy%0A%0A%E5%AE%89%E5%85%A8%E5%85%A8%E6%99%AF%E5%9B%BE%0A!%5Bc3843590a0587f6e5eca22eba75b022b.png%5D(en-resource%3A%2F%2Fdatabase%2F2301%3A1)%0A%0A%23%23%23%20%E8%AE%A4%E8%AF%81%EF%BC%88Authentication%EF%BC%89%E5%92%8C%E9%89%B4%E6%9D%83%EF%BC%88Authorization%EF%BC%89%0A-%20%E8%AE%A4%E8%AF%81%E6%94%AF%E6%8C%81%E5%A4%9A%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%85%B6%E4%B8%AD%E4%B8%80%E7%A7%8D%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F%E8%AE%A4%E8%AF%81%E9%80%9A%E8%BF%87%E5%8D%B3%E9%80%9A%E8%BF%87%EF%BC%8C%E8%BE%93%E5%87%BAuserinfo%0A-%20%E5%9F%BA%E4%BA%8E%E8%AE%A4%E8%AF%81%E8%BE%93%E5%87%BA%E7%9A%84userinfo%E8%BF%9B%E8%A1%8C%E9%89%B4%E6%9D%83%EF%BC%8C%E9%89%B4%E6%9D%83%E4%B9%9F%E6%94%AF%E6%8C%81%E5%A4%9A%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%B8%B8%E7%94%A8%E6%96%B9%E5%BC%8F%E4%B8%BARBAC%0A%0A%23%23%23%23%20%E8%AE%A4%E8%AF%81%EF%BC%88Authentication%EF%BC%89%0A%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F%E6%9C%89%EF%BC%9AX509%E3%80%81service%20account%E3%80%81Authenticating%20Proxy%E3%80%81WebHook%E3%80%81username%2Fpassword...%0A%E5%B8%B8%E7%94%A8%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F%E4%BB%8B%E7%BB%8D%EF%BC%9A%0A-%20X509%EF%BC%9A%0A%20%20%20%20-%20kube-apiserver%E7%9A%84%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%60%E2%80%98--client-ca-file%3Dca.crt%E2%80%99%60%E6%8C%87%E5%AE%9AX509%E6%A0%B9%E8%AF%81%E4%B9%A6%EF%BC%8C%E8%AF%B7%E6%B1%82%E4%B8%AD%E9%9C%80%E5%B8%A6%E6%9C%89%E7%94%B1%E8%AF%A5%E6%A0%B9%E8%AF%81%E4%B9%A6%E7%AD%BE%E5%90%8D%E7%9A%84%E8%AF%81%E4%B9%A6%EF%BC%8C%E6%89%8D%E8%83%BD%E8%AE%A4%E8%AF%81%E9%80%9A%E8%BF%87%0A%20%20%20%20-%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%AD%BE%E7%BD%B2%E7%9A%84%E8%AF%81%E4%B9%A6%E9%87%8C%E5%8C%85%E5%90%ABuser%E3%80%81group%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%85%B7%E4%BD%93%E4%B8%BA%E8%AF%81%E4%B9%A6%E7%9A%84subject.CommonName%EF%BC%88username%EF%BC%89%E4%BB%A5%E5%8F%8Asubject.Organization%EF%BC%88group%EF%BC%89%0A!%5B72ab2f06eea0dfc7b6271e36b7defdca.png%5D(en-resource%3A%2F%2Fdatabase%2F2303%3A1)%0A-%20Service%20account%EF%BC%88%E4%B8%BAk8s%E5%BF%85%E9%80%89%E7%9A%84%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F%EF%BC%89%EF%BC%9A%0A%20%20%20%20-%20kube-apiserver%E7%9A%84%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%60%E2%80%98--service-account-key-file%3Dkey.pem%E2%80%99%60%E6%8C%87%E5%AE%9Apem%E6%96%87%E4%BB%B6%EF%BC%8C%E7%94%A8%E4%BB%A5%E7%94%9F%E6%88%90kearer%20token%EF%BC%9B%60%E2%80%98--service-account-lookup%3Dtrue%2Ffasle%E2%80%99%60%E8%A1%A8%E7%A4%BA%E5%9C%A8%E5%88%A0%E9%99%A4service%20acount%E5%90%8E%E5%85%B6token%E6%98%AF%E5%90%A6%E8%A2%AB%E5%90%8A%E9%94%80%0A%20%20%20%20-%20Serviceaccount%20Admission%E9%BB%98%E8%AE%A4%E7%BB%99Pod%E6%89%93%E4%B8%8Aservice%20account%EF%BC%8C%E5%BD%93%E7%84%B6%E7%94%A8%E6%88%B7%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%87%AA%E8%A1%8C%E6%8C%87%E5%AE%9A%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84service%20account%0A!%5B7dfc80bae9e62f7c63a1db8ce33237d3.png%5D(en-resource%3A%2F%2Fdatabase%2F2305%3A1)%0A!%5B99efcfe9327ca33ae93192f586cef16f.png%5D(en-resource%3A%2F%2Fdatabase%2F2307%3A1)%0A%0A%23%23%23%23%20%E9%89%B4%E6%9D%83%EF%BC%88Authorization%EF%BC%89%0A%E9%89%B4%E6%9D%83%E5%88%86%E4%B8%BA%E4%BB%A5%E4%B8%8B%E5%87%A0%E7%A7%8D%EF%BC%9ARBAC%E3%80%81ABAC%E3%80%81Node%E4%BB%A5%E5%8F%8AWebhook%0A%E5%B8%B8%E7%94%A8RBAC%E4%BB%8B%E7%BB%8D%EF%BC%9A%0A!%5B4dca371e718fae4dff735215d5e7e3d1.png%5D(en-resource%3A%2F%2Fdatabase%2F2309%3A1)%0A%0A%23%23%23%23%20Admission(PodSecurityPolicy)%0A-%20Kube-apiserver%E7%9A%84%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%60%E2%80%98--admission-control%3DPodSecurityPolicy%E2%80%99%60%E6%96%B0%E5%A2%9EPodSecurityPolicy%20admisson%0A-%20Admin%E7%94%A8%E6%88%B7%E5%88%9B%E5%BB%BAPodSecurityPolicy%E7%AD%96%E7%95%A5%EF%BC%8C%E5%86%B3%E5%AE%9A%E8%83%BD%E5%88%9B%E5%BB%BA%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84Pod%0A-%20%E5%88%9B%E5%BB%BAPod%E7%9A%84%E7%94%A8%E6%88%B7%E4%B9%9F%E5%BF%85%E9%A1%BB%E8%B5%8B%E4%BA%88%E5%AE%83%E8%83%BD%E4%BD%BF%E7%94%A8PodSecurityPolicy%E7%AD%96%E7%95%A5%E7%9A%84%E6%9D%83%E9%99%90%0A%0A%23%23%23%23%20%E5%AE%89%E5%85%A8%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E4%BF%9D%E5%AD%98%E9%94%AE%E5%80%BC%EF%BC%88etcd%EF%BC%89%0A-%20etcd%E6%94%AF%E6%8C%81%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E6%9C%BA%E5%88%B6%EF%BC%8C%E9%98%B2%E6%AD%A2%E6%95%B0%E6%8D%AE%E8%A2%AB%E8%AF%AF%E5%88%A0%E9%99%A4%E5%AF%BC%E8%87%B4%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%0A-%20%E7%94%A8%E6%88%B7%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E5%BB%BA%E8%AE%AE%E5%AD%98%E6%94%BE%E5%9C%A8secret%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%B5%84%E6%BA%90%E4%B8%AD%EF%BC%8C%E8%AF%A5%E7%B1%BB%E5%9E%8B%E8%B5%84%E6%BA%90%E6%98%AF%E5%8A%A0%E5%AF%86%E5%AD%98%E5%82%A8%E5%9C%A8etcd%E4%B8%AD%0A-%20etcd%E6%94%AF%E6%8C%81https%EF%BC%8Ckube-apiserver%E8%AE%BF%E9%97%AEetcd%E4%BD%BF%E7%94%A8https%E5%8D%8F%E8%AE%AE%0A%0A%E5%85%B7%E4%BD%93%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%9A%0A!%5B32f0039a3c8ce26d10c6b322a737dbc8.png%5D(en-resource%3A%2F%2Fdatabase%2F2311%3A1)%0A%0A%23%23%23%23%20%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87%EF%BC%88Pod%20SecurityContext%EF%BC%89%0A-%20%E5%88%86%E4%B8%BAPod%E7%BA%A7%E5%88%AB%E5%92%8C%E5%AE%B9%E5%99%A8%E7%BA%A7%E5%88%AB%EF%BC%8C%E5%AE%B9%E5%99%A8%E7%BA%A7%E5%88%AB%E7%9A%84%E4%BC%9A%E8%A6%86%E7%9B%96Pod%E7%BA%A7%E5%88%AB%E7%9A%84%E7%9B%B8%E5%90%8C%E8%AE%BE%E7%BD%AE%E3%80%82%0A-%20%E5%9C%A8PodSecurityPolicy%E7%AD%96%E7%95%A5%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E4%B8%A4%E8%80%85%E9%9C%80%E8%A6%81%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8%E3%80%82%0A%60%60%60%0AapiVersion%3A%20v1%0Akind%3A%20Pod%0Ametadata%3A%0A%20%20name%3A%20wangbo%0Aspec%3A%0A%20%20securityContext%3A%0A%20%20%20%20privileged%3A%20false%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E6%98%AF%E5%90%A6%E4%BD%BF%E7%94%A8%E7%89%B9%E6%9D%83%E5%AE%B9%E5%99%A8%0A%20%20%20%20runAsUser%3A%201000%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E6%8C%87%E5%AE%9A%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8UID%0A%20%20%20%20fsGroup%3A%202000%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E6%8C%87%E5%AE%9APod%E4%B8%AD%E5%AE%B9%E5%99%A8%E6%96%87%E4%BB%B6%E6%89%80%E5%B1%9E%E7%BB%84GID%0A%20%20volumes%3A%0A%20%20-%20name%3A%20test%0A%20%20%20%20emptyDir%3A%20%7B%7D%0A%20%20containers%3A%0A%20%20-%20name%3A%20test%0A%20%20%20%20image%3A%20gcr.io%2Fgoogle-samples%2Fnode-hello%3A1.0%0A%20%20%20%20volumeMounts%3A%0A%20%20%20%20-%20name%3A%20test%0A%20%20%20%20%20%20mountPath%3A%20%2Fdata%2Ftest%0A%20%20%20%20securityContext%3A%0A%20%20%20%20%20%20readOnlyRootFilesystem%3A%20false%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E5%AE%B9%E5%99%A8%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%98%AF%E5%90%A6%E6%98%AF%E5%8F%AA%E8%AF%BB%0A%20%20%20%20%20%20runAsUser%3A%201001%0A%20%20%20%20%20%20privileged%3A%20false%0A%20%20%20%20%20%20capabilities%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E5%AE%B9%E5%99%A8%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E8%83%BD%E5%8A%9B%E9%85%8D%E7%BD%AE%0A%20%20%20%20%20%20%20%20add%3A%20%5B%22NET_ADMIN%22%2C%20%22SYS_TIME%22%5D%0A%20%20%20%20%20%20%20%20drop%3A%20%5B%22SYS_BOOT%22%5D%0A%60%60%60%0A%0A%23%23%23%23%20Network%20Policy%0A%E5%88%86%E4%B8%BAIngress%E5%92%8CEngress%E7%AD%96%E7%95%A5%E6%8E%A7%E5%88%B6%EF%BC%8C%E9%83%BD%E4%B8%BA%E7%99%BD%E5%90%8D%E5%8D%95%0A-%20Ingress%E4%B8%BA%E5%85%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%E6%8E%A7%E5%88%B6%0A-%20Egress%E4%B8%BA%E5%87%BA%E5%93%81%E8%AF%B7%E6%B1%82%E6%8E%A7%E5%88%B6%0A%60%60%60%0AapiVersion%3A%20networking.k8s.io%2Fv1%0Akind%3A%20NetworkPolicy%0Ametadata%3A%0A%20%20name%3A%20test-network-policy%0A%20%20namespace%3A%20default%0Aspec%3A%0A%20%20podSelector%3A%0A%20%20%20%20matchLabels%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%A7%84%E5%88%99%E5%8C%B9%E9%85%8D%E5%99%A8%EF%BC%8C%E9%80%89%E6%8B%A9%E5%8C%B9%E9%85%8D%E7%9A%84Pod%0A%20%20%20%20%20%20role%3A%20db%0A%20%20policyTypes%3A%0A%20%20-%20Ingress%0A%20%20-%20Egress%0A%20%20ingress%3A%0A%20%20-%20from%0A%20%20%20%20-%20ipBlock%3A%0A%20%20%20%20%20%20cidr%3A%20172.17.0.0%2F16%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%BF%9C%E7%AB%AF%EF%BC%88%E8%AE%BF%E9%97%AE%E7%AB%AF%EF%BC%89IP%E7%99%BD%E5%90%8D%E5%8D%95%E5%BC%80%E6%94%BE%0A%20%20%20%20%20%20except%3A%0A%20%20%20%20%20%20-%20172.17.1.0%2F24%0A%20%20%20%20-%20namespaceSelector%3A%0A%20%20%20%20%20%20matchLabels%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%BF%9C%E7%AB%AF%EF%BC%88%E8%AE%BF%E9%97%AE%E7%AB%AF%EF%BC%89namespace%E7%99%BD%E5%90%8D%E5%8D%95%E5%BC%80%E6%94%BE%0A%20%20%20%20%20%20%20%20project%3A%20myproject%0A%20%20%20%20-%20podSelector%3A%0A%20%20%20%20%20%20matchLabels%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%BF%9C%E7%AB%AF%EF%BC%88%E8%AE%BF%E9%97%AE%E7%AB%AF%EF%BC%89pod%E7%99%BD%E5%90%8D%E5%8D%95%E5%BC%80%E6%94%BE%0A%20%20%20%20%20%20%20%20role%3A%20frontend%0A%20%20%20%20ports%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%E6%9C%AC%E7%AB%AF%EF%BC%88%E8%A2%AB%E8%AE%BF%E9%97%AE%E7%AB%AF%EF%BC%89%E5%85%81%E8%AE%B8%E8%A2%AB%E8%AE%BF%E9%97%AE%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%92%8C%E5%8D%8F%E8%AE%AE%0A%20%20%20%20-%20protocol%3A%20TCP%0A%20%20%20%20%20%20port%3A%206379%0A%20%20egress%3A%0A%20%20-%20to%3A%0A%20%20%20%20-%20ipBlock%3A%0A%20%20%20%20%20%20cidr%3A%2010.0.0.0%2F24%0A%20%20%20%20ports%3A%0A%20%20%20%20-%20protocol%3A%20TCP%0A%20%20%20%20%20%20port%3A%205978%0A%60%60%60%0A%0A%E7%A6%81%E6%AD%A2%E6%89%80%E6%9C%89%E5%85%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%0A%60%60%60%0AapiVersion%3A%20networking.k8s.io%2Fv1%0Akind%3A%20NetworkPolicy%0Ametadata%3A%0A%20%20name%3A%20default-deny%0Aspec%3A%0A%20%20podSelector%3A%20%7B%7D%0A%20%20policyTypes%3A%0A%20%20-%20Ingress%0A%60%60%60%0A%E7%A6%81%E6%AD%A2%E6%89%80%E6%9C%89%E5%87%BA%E5%8F%A3%E8%AF%B7%E6%B1%82%0A%60%60%60%0AapiVersion%3A%20networking.k8s.io%2Fv1%0Akind%3A%20NetworkPolicy%0Ametadata%3A%0A%20%20name%3A%20default-deny%0Aspec%3A%0A%20%20podSelector%3A%20%7B%7D%0A%20%20policyTypes%3A%0A%20%20-%20Egress%0A%60%60%60%0A%E5%85%81%E8%AE%B8%E6%89%80%E6%9C%89%E5%85%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%0A%60%60%60%0AapiVersion%3A%20networking.k8s.io%2Fv1%0Akind%3A%20NetworkPolicy%0Ametadata%3A%0A%20%20name%3A%20allow-all%0Aspec%3A%0A%20%20podSelector%3A%20%7B%7D%0A%20%20policyTypes%3A%0A%20%20-%20Ingress%0A%20%20ingress%3A%0A%20%20-%20%7B%7D%0A%60%60%60%0A%E5%85%81%E8%AE%B8%E6%89%80%E6%9C%89%E5%87%BA%E5%8F%A3%E8%AF%B7%E6%B1%82%0A%60%60%60%0AapiVersion%3A%20networking.k8s.io%2Fv1%0Akind%3A%20NetworkPolicy%0Ametadata%3A%0A%20%20name%3A%20allow-all%0Aspec%3A%0A%20%20podSelector%3A%20%7B%7D%0A%20%20policyTypes%3A%0A%20%20-%20Egress%0A%20%20egress%3A%0A%20%20-%20%7B%7D%0A%60%60%60%0A%0A%0A%23%23%20Kubernetes%E9%9B%86%E7%BE%A4%0A%23%23%23%20K8S%E9%9B%86%E7%BE%A4%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%0A!%5B37934b5d808b8f381bc773b3fa5aa94e.png%5D(en-resource%3A%2F%2Fdatabase%2F2313%3A0)%0A%0AMaster%E8%8A%82%E7%82%B9%EF%BC%9A%E8%B4%9F%E8%B4%A3%E6%95%B4%E4%B8%AA%E9%9B%86%E7%BE%A4%E7%9A%84%E7%AE%A1%E7%90%86%E5%92%8C%E6%8E%A7%E5%88%B6%0A-%20etcd%0A-%20kube-apiserver%0A-%20kube-controller-manager%0A-%20kube-scheduler%0A%0ANode%E8%8A%82%E7%82%B9%EF%BC%9A%0A-%20kubelet%0A-%20kube-proxy%0A-%20docker%0A-%20cni%E6%8F%92%E4%BB%B6%0A%23%23%23%20%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2%E5%8F%8A%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE%0AKubelet%20manifest%E9%83%A8%E7%BD%B2%E6%8E%A7%E5%88%B6%E8%8A%82%E7%82%B9%E7%BB%84%E4%BB%B6%0A!%5B7dc786353ff38f255bd9e98cda09bbd7.png%5D(en-resource%3A%2F%2Fdatabase%2F2315%3A0)%0A%0A!%5B94ee41c1446f487426155b2669934df8.png%5D(en-resource%3A%2F%2Fdatabase%2F2317%3A0)%0ASystem%E7%AE%A1%E7%90%86docker%E3%80%81kubelet%E8%BF%9B%E7%A8%8B%EF%BC%8CDaemonset%E6%96%B9%E5%BC%8F%E9%83%A8%E7%BD%B2%E6%8F%92%E4%BB%B6%0A%0A%E5%AE%89%E8%A3%85CNI%E6%8F%92%E4%BB%B6%0A-%20%E4%B8%BApod%E5%88%86%E9%85%8DIP%0A-%20%E8%8A%82%E7%82%B9%E9%97%B4podIP%E4%BA%92%E9%80%9A%0A%0A!%5Bf724baf542268b054bdedc082831d886.png%5D(en-resource%3A%2F%2Fdatabase%2F2319%3A0)%0A%0A%23%23%23%23%20%E7%94%9F%E6%88%90kubecfg%E6%96%87%E4%BB%B6%0A-%20%E4%BF%AE%E6%94%B9cluster%0Akubectl%20config%20set-cluster%20kubernetes%20--certificate-authority%3D%2Fpath%2Fto%2Fca%20--embed-certs%3Dtrue%20--server%3D%24%7BKUBE_APISERVER%7D%20--kubeconfig%3D%2Fkubeconfig%2Ffilename%0A-%20%E4%BF%AE%E6%94%B9user%0Akubectl%20config%20set-credentials%20testuser%20--client-certificate%3D%2Fpath%2Fto%2Fcert%20--client-key%3D%2Fpath%2Fto%2Fprivate_key%20--embed-certs%3Dtrue%20--kubeconfig%3D%2Fkubeconfig%2Ffilename%0A-%20%E4%BF%AE%E6%94%B9context%0Akubectl%20config%20set-context%20default%20--cluster%3Dkubernetes%20--user%3Dtestuser%20--kubeconfig%3Dtest.kubeconfig%0A-%20%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4context%0Akubectl%20config%20user-context%20default%20--kubeconfig%3D%2Fkubeconfig%2Ffilename%0A%0A%23%23%23%20%E8%8A%82%E7%82%B9%E8%AF%81%E4%B9%A6%E7%AD%BE%E5%8F%91%0A%23%23%23%23%20tls%20bootstrap%E4%B8%8E%E8%8A%82%E7%82%B9%E8%AF%81%E4%B9%A6%E7%AD%BE%E5%8F%91%0A!%5Be5f78ca2f5b3e382bac0ad3977041465.png%5D(en-resource%3A%2F%2Fdatabase%2F2321%3A0)%0A%0A-%20kubelet%E5%90%AF%E5%8A%A8%E6%97%B6%E4%BD%BF%E7%94%A8%E4%BD%8E%E6%9D%83%E9%99%90token%E5%83%8Fkube-apiserver%E5%8F%91%E9%80%81csr%E8%AF%B7%E6%B1%82%0A-%20RBAC%E5%85%81%E8%AE%B8%E7%9A%84CRS%E8%AF%B7%E6%B1%82%E7%B1%BB%E5%9E%8B%EF%BC%9A%0Anodeclient%EF%BC%9A%E7%AD%BE%E5%8F%91%E8%AF%81%E4%B9%A6%0Aselfnodeclient%EF%BC%9A%E6%9B%B4%E6%96%B0%E8%AF%81%E4%B9%A6%0Aselfnodeserver%EF%BC%9A%E6%9B%B4%E6%96%B0kubelet%20sserver%E8%AF%81%E4%B9%A6%0A-%20kube-controller-manager%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%8F%91%E8%AF%81%E4%B9%A6%0A-%20kubelet%E4%BD%BF%E7%94%A8%E7%AD%BE%E5%8F%91%E7%9A%84%E8%AF%81%E4%B9%A6%E3%80%81%E7%A7%81%E9%92%A5%E8%AE%BF%E9%97%AEkube-apiserver%0A%0A%23%23%23%20%E9%9B%86%E7%BE%A4%E5%8D%87%E7%BA%A7%E4%B8%8E%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%0A!%5Bde31c666cc4df842bb2ea037e67029a3.png%5D(en-resource%3A%2F%2Fdatabase%2F2323%3A0)%0A%0A-%20%E6%8E%A7%E5%88%B6%E8%8A%82%E7%82%B9%E6%BB%9A%E5%8A%A8%E5%8D%87%E7%BA%A7%0A%E5%8D%87%E7%BA%A7kubelet%0A%E9%80%9A%E8%BF%87%E6%9B%B4%E6%96%B0manifest%E5%8D%87%E7%BA%A7%E6%8E%A7%E5%88%B6%E7%BB%84%E4%BB%B6%0A-%20%E8%AE%A1%E7%AE%97%E8%8A%82%E7%82%B9%E5%8D%87%E7%BA%A7%0Akubectl%20drain%0Akubectl%20uncordn%0A%0A%23%23%20K8S%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5</center></span>
</div></body></html> 