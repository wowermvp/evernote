<html>
<head>
  <title>Python2.x与3​​.x版本区别 | 菜鸟教程</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1739"/>
<h1>Python2.x与3​​.x版本区别 | 菜鸟教程</h1>

<div><span><br/><div style="font-size: 16px"><div style="overflow-y:scroll;"><div style="font-size:12px;color:rgb(0, 0, 0);background-color:rgb(246, 244, 240);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"><div><div style="background-color:rgb(255, 255, 255);"><div style="overflow:hidden;background-color:rgb(255, 255, 255);"><div> <h1 style="font-size:210%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:0px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">Python2.x与3​​.x版本区别</h1> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> Python的3​​.0版本，常被称为Python 3000，或简称Py3k。相对于Python的早期版本，这是一个较大的升级。 </p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">为了不带入过多的累赘，Python 3.0在设计的时候没有考虑向下相容。</p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> 许多针对早期Python版本设计的程式都无法在Python 3.0上正常执行。</p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> 为了照顾现有程式，Python 2.6作为一个过渡版本，基本使用了Python 2.x的语法和库，同时考虑了向Python 3.0的迁移，允许使用部分Python 3.0的语法与函数。</p> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"></p> 新的Python程式建议使用Python 3.0版本的语法。<p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"></p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> 除非执行环境无法安装Python 3.0或者程式本身使用了不支援Python 3.0的第三方库。目前不支援Python 3.0的第三方库有Twisted, py2exe, PIL等。</p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> 大多数第三方库都正在努力地相容Python 3.0版本。即使无法立即使用Python 3.0，也建议编写相容Python 3.0版本的程式，然后使用Python 2.6, Python 2.7来执行。</p> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/> <h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">主要变化</h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">Python 3.0的变化主要在以下几个方面:</p> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">print语句没有了，取而代之的是print()函数。 Python 2.6与Python 2.7部分地支持这种形式的print语法。在Python 2.6与Python 2.7里面，以下三种形式是等价的： </p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;fish&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">&quot;fish&quot;</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(136, 0, 0);">#注意print后面有个空格</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">&quot;fish&quot;</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(136, 0, 0);">#print()不能带有任何其它参数</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">然而，Python 2.6实际已经支持新的print()语法：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">from</span><span style="color:rgb(0, 0, 0);"> __future__ </span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> print_function
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">&quot;fish&quot;</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;panda&quot;</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> sep</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">', '</span><span style="color:rgb(102, 102, 0);">)</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">新的str类别表示一个Unicode字串，相当于Python 2.x版本的unicode类别。而位元组序列则用类似b&quot;abc&quot;的语法表示，用bytes类表示，相当于Python 2.x的str类别。</p> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">现在两种类别不能再隐式地自动转换，因此在Python 3.x里面&quot;fish&quot;+b&quot;panda&quot;是错误。正确的写法是&quot;fish&quot;+b&quot;panda&quot;.decode(&quot;utf-8&quot;)。 Python 2.6可以自动地将位元组序列识别为Unicode字串，方法是： </p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">from</span><span style="color:rgb(0, 0, 0);"> __future__ </span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> unicode_literals
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">repr</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">&quot;fish&quot;</span><span style="color:rgb(102, 102, 0);">))</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">除法运算符&quot;/&quot;在Python 3.x内总是返回浮点数。而在Python 2.6内会判断被除数与除数是否是整数。如果是整数会返回整数值，相当于整除;浮点数则返回浮点数值。</p> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">为了让Python 2.6统一返回浮点数值，可以： </p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">from</span><span style="color:rgb(0, 0, 0);"> __future__ </span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> division
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 102, 102);">3</span><span style="color:rgb(102, 102, 0);">/</span><span style="color:rgb(0, 102, 102);">2</span><span style="color:rgb(102, 102, 0);">)</span></pre> <ul style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> <li style="padding:2px 0px;"> 捕获异常的语法由except exc, var改为except exc as var。使用语法except (exc1, exc2) as var可以同时捕获多种类别的异常。 Python 2.6已经支援这两种语法。</li> <li style="padding:2px 0px;"> 集合(set) 的新写法：{1,2,3,4}。注意{}仍然表示空的字典(dict) 。 </li> <li style="padding:2px 0px;"> 字典推导式(Dictionary comprehensions) {expr1: expr2 for k, v in d}，这个语法等价于</li> </ul> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 0);">result</span><span style="color:rgb(102, 102, 0);">={}</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> k</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> v </span><span style="color:rgb(0, 0, 136);">in</span><span style="color:rgb(0, 0, 0);"> d</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">items</span><span style="color:rgb(102, 102, 0);">():</span><span style="color:rgb(0, 0, 0);">
    result</span><span style="color:rgb(102, 102, 0);">[</span><span style="color:rgb(0, 0, 0);">expr1</span><span style="color:rgb(102, 102, 0);">]=</span><span style="color:rgb(0, 0, 0);">expr2
</span><span style="color:rgb(0, 0, 136);">return</span><span style="color:rgb(0, 0, 0);"> result</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> 集合推导式(Set Comprehensions) {expr1 for x in stuff}。这个语法等价于： </p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 0);">result </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">set</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> x </span><span style="color:rgb(0, 0, 136);">in</span><span style="color:rgb(0, 0, 0);"> stuff</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
    result</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">add</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">expr1</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">return</span><span style="color:rgb(0, 0, 0);"> result</span></pre> <ul style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> <li style="padding:2px 0px;"> 八进制数必须写成0o777，原来的形式0777不能用了；二进制必须写成0b111。新增了一个bin()函数用于将一个整数转换成二进制字串。 Python 2.6已经支援这两种语法。</li> <li style="padding:2px 0px;"> dict.keys(), dict.values​​(), dict.items(), map(), filter(), range(), zip()不再返回列表，而是迭代器。</li> <li style="padding:2px 0px;"> 如果两个物件之间没有定义明确的有意义的顺序。使用&lt;, &gt;, &lt;=, &gt;=比较它们会投掷异常。比如1 &lt; &quot;&quot;在Python 2.6里面会返回True，而在Python 3.0里面会投掷异常。现在cmp(), instance.__cmp__()函数已经被删除。 </li> <li style="padding:2px 0px;"> 可以注释函数的参数与返回值。此特性可方便IDE对原始码进行更深入的分析。例如给参数增加类别讯息： </li> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">def</span><span style="color:rgb(0, 0, 0);"> sendMail</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">from_</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);"> str</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> to</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);"> str</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> title</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);"> str</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> body</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);"> str</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">-&gt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">bool</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
    </span><span style="color:rgb(0, 0, 136);">pass</span></pre> <li style="padding:2px 0px;">合并int与long类型。</li> <li style="padding:2px 0px;">多个模块被改名（根据PEP8）：</li> <table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border-collapse:collapse;width:100%;"> <tbody><tr style="background-color:rgb(246, 244, 240);"> <th style="font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:12px;color:rgb(255, 255, 255);border:1px solid rgb(85, 85, 85);padding:3px;vertical-align:top;text-align:left;background-color:rgb(85, 85, 85);">旧的名字</th> <th style="font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:12px;color:rgb(255, 255, 255);border:1px solid rgb(85, 85, 85);padding:3px;vertical-align:top;text-align:left;background-color:rgb(85, 85, 85);">新的名字</th> </tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">_winreg</td> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">winreg</td> </tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">ConfigParser</td> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">configparser</td> </tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">copy_reg</td> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">copyreg</td> </tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">Queue</td> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">queue</td> </tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">SocketServer</td> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">socketserver</td> </tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">repr</td> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">reprlib</td> </tr> </tbody></table> <li style="padding:2px 0px;"> StringIO模块现在被合并到新的io模组内。 new, md5, gopherlib等模块被删除。 Python 2.6已经支援新的io模组。</li><li style="padding:2px 0px;"> httplib, BaseHTTPServer, CGIHTTPServer, SimpleHTTPServer, Cookie, cookielib被合并到http包内。</li><li style="padding:2px 0px;"> 取消了exec语句，只剩下exec()函数。 Python 2.6已经支援exec()函数。</li></ul> </div></div></div></div></div></div></div><br/></span>
</div></body></html> 