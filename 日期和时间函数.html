<html>
<head>
  <title>日期和时间函数</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="577"/>
<h1>日期和时间函数</h1>

<div>
<span><div><font style="font-size: 16pt;">日期和时间函数</font></div><div><font style="font-size: 16pt;"><br/></font></div><div>CURDATE()函数：返回当前日期，只包含年月日</div><div>mysql&gt; select CURDATE();</div><div>+-------------+</div><div>|  CURDATE()  |</div><div><span style="font-size: 9pt;">+-------------+</span></div><div>|  2017-10-27 |</div><div><span style="font-size: 9pt;">+-------------+</span></div><div><span style="font-size: 9pt;">1 row in set (0.03 sec)</span></div><div><br/></div><div><span style="line-height: 13.600000381469727px;">CURTIME()函数：返回当前时间，只包含时分秒</span></div><div><span style="line-height: 13.600000381469727px;">mysql&gt; select CURTIME();</span></div><div>+-------------+</div><div>|  CURTIME()  |</div><div><span style="font-size: 9pt;">+-------------+</span></div><div>|  15:48:00   |</div><div><span style="font-size: 9pt;">+-------------+</span></div><div><span style="font-size: 9pt;">1 row in set (0.00 sec)</span></div><div><br/></div><div><span style="font-size: 9pt;">NOW()函数：返回当前的日期和时间，年月日时分秒全都包含</span></div><div><span style="font-size: 12px; line-height: 13.600000381469727px;">mysql&gt; select NOW();</span></div><div>+----------------------+</div><div>|  NOW()               |</div><div><span style="font-size: 9pt;">+----------------------+</span></div><div>|  <span style="font-size: 9pt;">2017-10-27 <span style="font-size: 9pt;">15:50:00</span></span> |</div><div><span style="font-size: 9pt;">+----------------------+</span></div><div><span style="font-size: 9pt;">1 row in set (0.00 sec)</span></div><div><br/></div><div><span style="font-size: 9pt;">UNIX_TIMESTAMP(date)函数：返回日期date的unix时间戳</span></div><div><span style="font-size: 9pt;">FROM_UNIXTIME(unixtime)函数：返回unixtime时间戳的日期，和UNIX_TIMESTAMP(date)互为逆操作</span></div><div><br/></div><div><span style="font-size: 9pt;">WEEK(DATE)和YEAR(DATE)函数：前者返回所给的日期是一年中的第几周，后者返回所给的日期是哪一年</span></div><div><span style="font-size: 9pt;">HOUR(time）和MINUTE(time)函数：前者返回所给时间的小时，后者返回所给时间的分钟</span></div><div><span style="font-size: 9pt;">MONTHNAME(date)函数：返回date的英文月份名称</span></div><div><span style="font-size: 9pt;">DATE_FORMAT(date,fmt)函数：按字符串fmt格式化日期date值，此函数能够按指定的格式显示日期，可以用的的格式符如下表</span></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 413px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><br/></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>MySQl中的日期时间格式</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;">格式符</td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>格式说明</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%S,%s</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>两位数字形式的秒（00,01,...,59）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%i</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>两位数字形式的分（00,01,...,59）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%H</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div><span style="font-size: 9pt;">两位数字形式的小时，24小时（00,01,...,23）</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%h,%I</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div><span style="font-size: 9pt;">两位数字形式的小时，12小时（00,01,...,12）</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%k</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>数字形式的小时，24小时（0,1,...,23）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%l</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div><span style="font-size: 9pt;">数字形式的小时，12小时（0,1,...,12）</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%T</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>24小时的时间形式（hh:mm:ss）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%r</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div><span style="font-size: 9pt;">12小时的时间形式（hh:mm:ssAM或hh:mm:ssPM）</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%p</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>AM或PM</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%W</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>一周中每一天的名称（Sunday,Monday,...,Saturday）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%a</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>一周中每一天名称的缩写（Sun,Mon,...,Sat）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%d</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>两位数字表示月中的天数（00,01,...,31）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%e</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div><span style="font-size: 9pt;">两位数字表示月中的天数（0,1,...,31）</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%D</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>英文后缀表示月中的天数（1st,2nd,3rd,...）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%w</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>以数字形式表示周中的天数（0=Sunday,1=Monday,...,6=Saturday）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%j</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>以三位数字表示年中的天数（001,002,...,366）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%U</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>周（0,1,52），其中Sunday为周中的第一天</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%u</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div><span style="font-size: 9pt;">周（0,1,52），其中Monday为周中的第一天</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%M</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>月名（January,February,...,December）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%b</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>缩写的月名（Jan,Feb,...,Dec）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%m</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>两位数字表示的月份（01,02,...,12）</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%c</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div><span style="font-size: 9pt;">数字表示的月份（1,2,...,12）</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%Y</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>4位数字表示年份</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%y</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>两位数字表示年份</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>%%</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 413px; padding: 8px;"><div>直接值“%”</div></td></tr></tbody></table><div><br/></div><div>DATE_ADD(date,INTERVAL expr type)函数：返回与所给日期date差INTERVAL时间段的日期。其中INTERVAL是间隔类型关键字，expr是一个表达式，这个表达式对应后面的类型，type是间隔类型，MySQL提供了13间隔日期类型，如下表</div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 138px;"></col><col style="width: 130px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><br/></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div><span style="font-size: 9pt;">MySQl的日期间隔类型</span></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><br/></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>表达式类型</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>描述</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>格式</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>HOUR</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>小时</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>hh</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>MINUTE</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>分</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>mm</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>SECOND</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>秒</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>ss</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>YEAR</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>年</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>YY</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>MONTH</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>月</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>MM</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>DAY</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>日</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>DD</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>YEAR_MONTH</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>年和月</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>YY-MM</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>DAY_HOUR</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>日和小时</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>DD hh</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>DAY_MINUTE</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div><span style="font-size: 9pt;">日和分钟</span></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>DD hh:mm</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>DAY_SECOND</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>日和秒</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>DD hh:mm:ss</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>HOUR_MINUTE</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>小时和分钟</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>hh:mm</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>HOUR_SECOND</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>小时和秒</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>hh:ss</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>MINUTE_SECOND</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 138px; padding: 8px;"><div>分钟和秒</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>mm:ss</div></td></tr></tbody></table><div><br/></div></div><div>例：该例中第1列返回了当前日期时间，第2列返回距离当前日期31天后的日期时间，第3列返回距离当前日期一年两个月后的日期时间</div><div>mysql&gt; select now() current,date_add(now(), INTERVAL 31day) after31days, date_add(now(), INTERVAL '1_2' year_month) after_oneyear_twomonth;</div><div>+----------------------+---------------------+-------------------------+</div><div>|  current             | after31days         | after_oneyear_twomonth  |</div><div><span style="font-size: 9pt;">+----------------------+---------------------+-------------------------+</span></div><div>|  <span style="font-size: 9pt;">2007-09-03 </span><span style="font-size: 9pt;">11:30:48</span> | <span style="font-size: 9pt;">2007-10-04 </span><span style="font-size: 9pt;">11:30:48 | <span style="font-size: 9pt;">2008-11-03 </span><span style="font-size: 9pt;">11:30:48     |</span></span></div><div><span style="font-size: 9pt;">+----------------------+<span style="font-size: 9pt;">---------------------+-------------------------+</span></span></div><div><span style="font-size: 9pt;"><span style="font-size: 9pt;">1 row in set (0.01 sec)</span></span></div><div><br/></div><div><span style="font-size: 9pt;"><span style="font-size: 9pt;">DATEDIFF(date1, date2)函数，用来计算两个日期之间相差的天数</span></span></div></div><div><br/></div></span>
</div></body></html> 