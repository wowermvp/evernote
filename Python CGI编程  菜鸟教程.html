<html>
<head>
  <title>Python CGI编程 | 菜鸟教程</title>
  <basefont face="宋体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 宋体;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1746"/>
<h1>Python CGI编程 | 菜鸟教程</h1>

<div><span><br/><div style="font-size: 16px"><div style="overflow-y:scroll;"><div style="font-size:12px;color:rgb(0, 0, 0);background-color:rgb(246, 244, 240);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"><div><div style="background-color:rgb(255, 255, 255);"><div style="overflow:hidden;background-color:rgb(255, 255, 255);"><div> <h1 style="font-size:210%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:0px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">Python CGI编程</h1> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/> <h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">什么是CGI</h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">CGI 目前由NCSA维护，NCSA定义CGI如下：</p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> CGI(Common Gateway Interface),通用网关接口,它是一段程序,运行在服务器上如：HTTP服务器，提供同客户端HTML页面的接口。</p> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/><h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">网页浏览</h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">为了更好的了解CGI是如何工作的，我们可以从在网页上点击一个链接或URL的流程：</p> <ul style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> <li style="padding:2px 0px;"> 1、使用你的浏览器访问URL并连接到HTTP web 服务器。</li><li style="padding:2px 0px;"> 2、Web服务器接收到请求信息后会解析URL，并查找访问的文件在服务器上是否存在，如果存在返回文件的内容，否则返回错误信息。</li><li style="padding:2px 0px;"> 3、浏览器从服务器上接收信息，并显示接收的文件或者错误信息。</li></ul> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">CGI程序可以是Python脚本，PERL脚本，SHELL脚本，C或者C++程序等。</p> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/> <h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;"> CGI架构图 </h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"><img src="Python CGI编程  菜鸟教程_files/cgiarch1.gif" type="image/gif" data-filename="cgiarch1.gif" alt="cgiarch" height="473" style="border:0px;max-width:705px;padding:2px;" width="411"/></p> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/> <h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">Web服务器支持及配置</h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">在你进行CGI编程前，确保您的Web服务器支持CGI及已经配置了CGI的处理程序。</p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> 所有的HTTP服务器执行CGI程序都保存在一个预先配置的目录。这个目录被称为CGI目录，并按照惯例，它被命名为/var/www/cgi-bin目录。</p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> CGI文件的扩展名为.cgi，python也可以使用.py扩展名。</p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> 默认情况下，Linux服务器配置运行的cgi-bin目录中为/var/www。</p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> 如果你想指定其他运行CGI脚本的目录，可以修改httpd.conf配置文件，如下所示：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">&lt;Directory</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;/var/www/cgi-bin&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
   AllowOverride None
   Options ExecCGI
   Order allow,deny
   Allow from all
</span><span style="color:rgb(0, 0, 136);">&lt;/Directory&gt;</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">&lt;Directory</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;/var/www/cgi-bin&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
Options All
</span><span style="color:rgb(0, 0, 136);">&lt;/Directory&gt;</span></pre> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/><h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">第一个CGI程序</h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">我们使用Python创建第一个CGI程序，文件名为hellp.py，文件位于/var/www/cgi-bin目录中，内容如下，修改文件的权限为755：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Content-type:text/html\r\n\r\n&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'&lt;html&gt;'</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'&lt;head&gt;'</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'&lt;title&gt;Hello Word - First CGI Program&lt;/title&gt;'</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'&lt;/head&gt;'</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'&lt;body&gt;'</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'&lt;h2&gt;Hello Word! This is my first CGI program&lt;/h2&gt;'</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'&lt;/body&gt;'</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'&lt;/html&gt;'</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以上程序在浏览器访问显示结果如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(102, 0, 102);">Hello</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Word</span><span style="color:rgb(102, 102, 0);">!</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">This</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">is</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">my</span><span style="color:rgb(0, 0, 0);"> first CGI program</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">这个的hello.py脚本是一个简单的Python脚本，脚本第一行的输出内容&quot;Content-type:text/html\r\n\r\n&quot;发送到浏览器并告知浏览器显示的内容类型为&quot;text/html&quot;。</p> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/><h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">HTTP头部</h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">hello.py文件内容中的&quot; Content-type:text/html\r\n\r\n&quot;即为HTTP头部的一部分，它会发送给浏览器告诉浏览器文件的内容类型。</p> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">HTTP头部的格式如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 0);">HTTP </span><span style="color:rgb(102, 102, 0);">字段名:</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">字段内容</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(102, 102, 0);">例如</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(102, 0, 102);">Content</span><span style="color:rgb(102, 102, 0);">-</span><span style="color:rgb(0, 0, 0);">type</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);"> text</span><span style="color:rgb(102, 102, 0);">/</span><span style="color:rgb(0, 0, 0);">html\r\n\r\n</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以下表格介绍了CGI程序中HTTP头部经常使用的信息：</p> <table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border-collapse:collapse;width:100%;"> <tbody><tr style="background-color:rgb(246, 244, 240);"> <th style="font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:12px;color:rgb(255, 255, 255);border:1px solid rgb(85, 85, 85);padding:3px;vertical-align:top;text-align:left;background-color:rgb(85, 85, 85);width:30%;">头</th><th style="font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:12px;color:rgb(255, 255, 255);border:1px solid rgb(85, 85, 85);padding:3px;vertical-align:top;text-align:left;background-color:rgb(85, 85, 85);">描述</th> </tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">Content-type: </td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">请求的与实体对应的MIME信息。例如: Content-type:text/html</td></tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">Expires: Date </td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">响应过期的日期和时间</td> </tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">Location: URL </td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">用来重定向接收方到非请求URL的位置来完成请求或标识新的资源</td> </tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">Last-modified: Date</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">请求资源的最后修改时间</td> </tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">Content-length: N</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">请求的内容长度</td> </tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">Set-Cookie: String </td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">设置Http Cookie</td> </tr> </tbody></table> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/> <h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">CGI环境变量</h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">所有的CGI程序都接收以下的环境变量，这些变量在CGI程序中发挥了重要的作用：</p> <table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border-collapse:collapse;width:100%;"> <tbody><tr style="background-color:rgb(246, 244, 240);"><th style="font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:12px;color:rgb(255, 255, 255);border:1px solid rgb(85, 85, 85);padding:3px;vertical-align:top;text-align:left;background-color:rgb(85, 85, 85);width:30%;">变量名</th><th style="font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:12px;color:rgb(255, 255, 255);border:1px solid rgb(85, 85, 85);padding:3px;vertical-align:top;text-align:left;background-color:rgb(85, 85, 85);">描述</th></tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">CONTENT_TYPE</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">这个环境变量的值指示所传递来的信息的MIME类型。目前，环境变量CONTENT_TYPE一般都是：application/x-www-form-urlencoded,他表示数据来自于HTML表单。</td> </tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">CONTENT_LENGTH</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">如果服务器与CGI程序信息的传递方式是POST，这个环境变量即使从标准输入STDIN中可以读到的有效数据的字节数。这个环境变量在读取所输入的数据时必须使用。</td> </tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">HTTP_COOKIE</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">客户机内的 COOKIE 内容。</td> </tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">HTTP_USER_AGENT</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">提供包含了版本数或其他专有数据的客户浏览器信息。</td> </tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">PATH_INFO</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">这个环境变量的值表示紧接在CGI程序名之后的其他路径信息。它常常作为CGI程序的参数出现。</td> </tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">QUERY_STRING</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">如果服务器与CGI程序信息的传递方式是GET，这个环境变量的值即使所传递的信息。这个信息经跟在CGI程序名的后面，两者中间用一个问号'?'分隔。</td> </tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">REMOTE_ADDR</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">这个环境变量的值是发送请求的客户机的IP地址，例如上面的192.168.1.67。这个值总是存在的。而且它是Web客户机需要提供给Web服务器的唯一标识，可以在CGI程序中用它来区分不同的Web客户机。</td> </tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">REMOTE_HOST</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">这个环境变量的值包含发送CGI请求的客户机的主机名。如果不支持你想查询，则无需定义此环境变量。</td> </tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">REQUEST_METHOD</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">提供脚本被调用的方法。对于使用 HTTP/1.0 协议的脚本，仅 GET 和 POST 有意义。</td></tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">SCRIPT_FILENAME</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">CGI脚本的完整路径</td></tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">SCRIPT_NAME</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">CGI脚本的的名称</td></tr> <tr style="background-color:rgb(246, 244, 240);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">SERVER_NAME</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">这是你的 WEB 服务器的主机名、别名或IP地址。</td></tr> <tr style="background-color:rgb(255, 255, 255);"> <td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">SERVER_SOFTWARE</td><td style="line-height:140%;font-size:100%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;border:1px solid rgb(212, 212, 212);padding:7px 5px;vertical-align:top;">这个环境变量的值包含了调用CGI程序的HTTP服务器的名称和版本号。例如，上面的值为Apache/2.2.14(Unix)</td></tr> </tbody></table> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以下是一个简单的CGI脚本输出CGI的环境变量：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> os

</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Content-type: text/html\r\n\r\n&quot;</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;font size=+1&gt;Environment&lt;/font&gt;&lt;\br&gt;&quot;</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> param </span><span style="color:rgb(0, 0, 136);">in</span><span style="color:rgb(0, 0, 0);"> os</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">environ</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">keys</span><span style="color:rgb(102, 102, 0);">():</span><span style="color:rgb(0, 0, 0);">
  </span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;b&gt;%20s&lt;/b&gt;: %s&lt;\br&gt;&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">param</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> os</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">environ</span><span style="color:rgb(102, 102, 0);">[</span><span style="color:rgb(0, 0, 0);">param</span><span style="color:rgb(102, 102, 0);">])</span></pre> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/><h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">GET和POST方法</h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">浏览器客户端通过两种方法向服务器传递信息，这两种方法就是 GET 方法和 POST 方法。</p> <h3 style="font-size:120%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">使用GET方法传输数据</h3> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">GET方法发送编码后的用户信息到服务端，数据信息包含在请求页面的URL上，以&quot;?&quot;号分割, 如下所示：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 0);">http</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(136, 0, 0);">//www.test.com/cgi-bin/hello.py?key1=value1&amp;key2=value2</span></pre> 有关 GET 请求的其他一些注释： <ul style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> <li style="padding:2px 0px;">GET 请求可被缓存</li> <li style="padding:2px 0px;">GET 请求保留在浏览器历史记录中</li> <li style="padding:2px 0px;">GET 请求可被收藏为书签</li> <li style="padding:2px 0px;">GET 请求不应在处理敏感数据时使用</li> <li style="padding:2px 0px;">GET 请求有长度限制</li> <li style="padding:2px 0px;">GET 请求只应当用于取回数据</li> </ul> <h3 style="font-size:120%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">简单的url实例：GET方法</h3> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以下是一个简单的URL，使用GET方法向hello_get.py程序发送两个参数：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 136, 0);">/cgi-bin/</span><span style="color:rgb(0, 0, 0);">hello_get</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">py</span><span style="color:rgb(102, 102, 0);">?</span><span style="color:rgb(0, 0, 0);">first_name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);">ZARA</span><span style="color:rgb(102, 102, 0);">&amp;</span><span style="color:rgb(0, 0, 0);">last_name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);">ALI</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以下为hello_get.py文件的代码：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># CGI处理模块</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> cgitb 

</span><span style="color:rgb(136, 0, 0);"># 创建 FieldStorage 的实例化</span><span style="color:rgb(0, 0, 0);">
form </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(102, 0, 102);">FieldStorage</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> 

</span><span style="color:rgb(136, 0, 0);"># 获取数据</span><span style="color:rgb(0, 0, 0);">
first_name </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'first_name'</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">
last_name  </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'last_name'</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Content-type:text/html\r\n\r\n&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;html&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;title&gt;Hello - Second CGI Program&lt;/title&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;h2&gt;Hello %s %s&lt;/h2&gt;&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">first_name</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> last_name</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/html&gt;&quot;</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">浏览器请求输出结果：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(102, 0, 102);">Hello</span><span style="color:rgb(0, 0, 0);"> ZARA ALI</span></pre> <h3 style="font-size:120%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">简单的表单实例：GET方法</h3> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以下是一个通过HTML的表单使用GET方法向服务器发送两个数据，提交的服务器脚本同样是hello_get.py文件，代码如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">&lt;form</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">action</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;/cgi-bin/hello_get.py&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">method</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;get&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
First Name: </span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;text&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;first_name&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">  </span><span style="color:rgb(0, 0, 136);">&lt;br</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);">

Last Name: </span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;text&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;last_name&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;submit&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;Submit&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;/form&gt;</span></pre> <h3 style="font-size:120%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">使用POST方法传递数据</h3> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">使用POST方法向服务器传递数据是更安全可靠的，像一些敏感信息如用户密码等需要使用POST传输数据。</p> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以下同样是hello_get.py ，它也可以处理浏览器提交的POST表单数据:</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># 引入 CGI 模块 </span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> cgitb 

</span><span style="color:rgb(136, 0, 0);"># 创建 FieldStorage 实例</span><span style="color:rgb(0, 0, 0);">
form </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(102, 0, 102);">FieldStorage</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> 

</span><span style="color:rgb(136, 0, 0);"># 获取表单数据</span><span style="color:rgb(0, 0, 0);">
first_name </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'first_name'</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">
last_name  </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'last_name'</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Content-type:text/html\r\n\r\n&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;html&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;title&gt;Hello - Second CGI Program&lt;/title&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;h2&gt;Hello %s %s&lt;/h2&gt;&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">first_name</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> last_name</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/html&gt;&quot;</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以下为表单通过POST方法向服务器脚本hello_get.py提交数据:</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">&lt;form</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">action</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;/cgi-bin/hello_get.py&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">method</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;post&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
First Name: </span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;text&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;first_name&quot;</span><span style="color:rgb(0, 0, 136);">&gt;&lt;br</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);">
Last Name: </span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;text&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;last_name&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;submit&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;Submit&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;/form&gt;</span></pre> <h3 style="font-size:120%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">通过CGI程序传递checkbox数据</h3> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">checkbox用于提交一个或者多个选项数据，HTML代码如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">&lt;form</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">action</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;/cgi-bin/checkbox.cgi&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">method</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;POST&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">target</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;_blank&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;checkbox&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;maths&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;on&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);"> Maths
</span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;checkbox&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;physics&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;on&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);"> Physics
</span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;submit&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;Select Subject&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;/form&gt;</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以下为 checkbox.cgi 文件的代码：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># 引入 CGI 处理模块 </span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> cgitb 

</span><span style="color:rgb(136, 0, 0);"># 创建 FieldStorage的实例 </span><span style="color:rgb(0, 0, 0);">
form </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(102, 0, 102);">FieldStorage</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> 

</span><span style="color:rgb(136, 0, 0);"># 接收字段数据</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">if</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'maths'</span><span style="color:rgb(102, 102, 0);">):</span><span style="color:rgb(0, 0, 0);">
   math_flag </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;ON&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">else</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
   math_flag </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;OFF&quot;</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">if</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'physics'</span><span style="color:rgb(102, 102, 0);">):</span><span style="color:rgb(0, 0, 0);">
   physics_flag </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;ON&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">else</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
   physics_flag </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;OFF&quot;</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Content-type:text/html\r\n\r\n&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;html&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;title&gt;Checkbox - Third CGI Program&lt;/title&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;h2&gt; CheckBox Maths is : %s&lt;/h2&gt;&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> math_flag
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;h2&gt; CheckBox Physics is : %s&lt;/h2&gt;&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> physics_flag
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/html&gt;&quot;</span></pre> <h3 style="font-size:120%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">通过CGI程序传递Radio数据</h3> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">Radio只向服务器传递一个数据，HTML代码如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">&lt;form</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">action</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;/cgi-bin/radiobutton.py&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">method</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;post&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">target</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;_blank&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;radio&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;subject&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;maths&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);"> Maths
</span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;radio&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;subject&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;physics&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);"> Physics
</span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;submit&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;Select Subject&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;/form&gt;</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">radiobutton.py 脚本代码如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># Import modules for CGI handling </span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> cgitb 

</span><span style="color:rgb(136, 0, 0);"># Create instance of FieldStorage </span><span style="color:rgb(0, 0, 0);">
form </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(102, 0, 102);">FieldStorage</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> 

</span><span style="color:rgb(136, 0, 0);"># Get data from fields</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">if</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'subject'</span><span style="color:rgb(102, 102, 0);">):</span><span style="color:rgb(0, 0, 0);">
   subject </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'subject'</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">else</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
   subject </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Not set&quot;</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Content-type:text/html\r\n\r\n&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;html&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;title&gt;Radio - Fourth CGI Program&lt;/title&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;h2&gt; Selected Subject is %s&lt;/h2&gt;&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> subject
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/html&gt;&quot;</span></pre> <h3 style="font-size:120%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">通过CGI程序传递 Textarea 数据</h3> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">Textarea向服务器传递多行数据，HTML代码如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">&lt;form</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">action</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;/cgi-bin/textarea.py&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">method</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;post&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">target</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;_blank&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;textarea</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;textcontent&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">cols</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;40&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">rows</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;4&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
Type your text here...
</span><span style="color:rgb(0, 0, 136);">&lt;/textarea&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;submit&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;Submit&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;/form&gt;</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">textarea.cgi脚本代码如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># Import modules for CGI handling </span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> cgitb 

</span><span style="color:rgb(136, 0, 0);"># Create instance of FieldStorage </span><span style="color:rgb(0, 0, 0);">
form </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(102, 0, 102);">FieldStorage</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> 

</span><span style="color:rgb(136, 0, 0);"># Get data from fields</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">if</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'textcontent'</span><span style="color:rgb(102, 102, 0);">):</span><span style="color:rgb(0, 0, 0);">
   text_content </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'textcontent'</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">else</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
   text_content </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Not entered&quot;</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Content-type:text/html\r\n\r\n&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;html&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;head&gt;&quot;</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;title&gt;Text Area - Fifth CGI Program&lt;/title&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;h2&gt; Entered Text Content is %s&lt;/h2&gt;&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> text_content
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/body&gt;&quot;</span></pre> <h3 style="font-size:120%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">通过CGI程序传递下拉数据</h3> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">HTML下拉框代码如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">&lt;form</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">action</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;/cgi-bin/dropdown.py&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">method</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;post&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">target</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;_blank&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;select</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;dropdown&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;option</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;Maths&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">selected</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">Maths</span><span style="color:rgb(0, 0, 136);">&lt;/option&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;option</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;Physics&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">Physics</span><span style="color:rgb(0, 0, 136);">&lt;/option&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;/select&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;submit&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;Submit&quot;</span><span style="color:rgb(0, 0, 136);">/&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;/form&gt;</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">dropdown.py 脚本代码如下所示：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># Import modules for CGI handling </span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> cgitb 

</span><span style="color:rgb(136, 0, 0);"># Create instance of FieldStorage </span><span style="color:rgb(0, 0, 0);">
form </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(102, 0, 102);">FieldStorage</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> 

</span><span style="color:rgb(136, 0, 0);"># Get data from fields</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">if</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'dropdown'</span><span style="color:rgb(102, 102, 0);">):</span><span style="color:rgb(0, 0, 0);">
   subject </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">getvalue</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'dropdown'</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">else</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
   subject </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Not entered&quot;</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Content-type:text/html\r\n\r\n&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;html&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;title&gt;Dropdown Box - Sixth CGI Program&lt;/title&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/head&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;h2&gt; Selected Subject is %s&lt;/h2&gt;&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> subject
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/body&gt;&quot;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&lt;/html&gt;&quot;</span></pre> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/> <h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">CGI中使用Cookie</h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">在http协议一个很大的缺点就是不作用户身份的判断，这样给编程人员带来很大的不便， </p> 而cookie功能的出现弥补了这个缺憾。<p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"></p><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> 所有cookie就是在客户访问脚本的同时，通过客户的浏览器，在客户硬盘上写入纪录数据 ，当下次客户访问脚本时取回数据信息，从而达到身份判别的功能，cookie常用在密码判断中 。</p> 　 <h3 style="font-size:120%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">cookie的语法</h3> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">http cookie的发送是通过http头部来实现的，他早于文件的传递，头部set-cookie的语法如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(102, 0, 102);">Set</span><span style="color:rgb(102, 102, 0);">-</span><span style="color:rgb(0, 0, 0);">cookie</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);">name</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">expires</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);">date</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">path</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);">path</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">domain</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);">domain</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">secure </span></pre> <ul style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> <li style="padding:2px 0px;"> name=name: 需要设置cookie的值(name不能使用&quot;；&quot;和&quot;，&quot;号),有多个name值时用&quot;；&quot;分隔例如：name1=name1;name2=name2;name3=name3。 </li> <li style="padding:2px 0px;"> expires=date: cookie的有效期限,格式： expires=&quot;Wdy,DD-Mon-YYYY HH:MM:SS&quot;</li> <li style="padding:2px 0px;"> </li> <li style="padding:2px 0px;">path=path: 设置cookie支持的路径,如果path是一个路径，则cookie对这个目录下的所有文件及子目录生效，例如： path=&quot;/cgi-bin/&quot;，如果path是一个文件，则cookie指对这个文件生效，例如：path=&quot;/cgi-bin/cookie.cgi&quot;。 </li> <li style="padding:2px 0px;">domain=domain: 对cookie生效的域名，例如：domain=&quot;www.chinalb.com&quot; </li> <li style="padding:2px 0px;">secure: 如果给出此标志，表示cookie只能通过SSL协议的https服务器来传递。 </li> <li style="padding:2px 0px;">cookie的接收是通过设置环境变量HTTP_COOKIE来实现的，CGI程序可以通过检索该变量获取cookie信息。</li></ul> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/><h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">Cookie设置 </h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">Cookie的设置非常简单，cookie会在http头部单独发送。以下实例在cookie中设置了UserID 和 Password：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">&lt;pre&gt;</span><span style="color:rgb(0, 0, 0);">
#coding=utf-8
#!/usr/bin/python

print &quot;Set-Cookie:UserID=XYZ;\r\n&quot;
print &quot;Set-Cookie:Password=XYZ123;\r\n&quot;
print &quot;Set-Cookie:Expires=Tuesday, 31-Dec-2007 23:12:40 GMT&quot;;\r\n&quot;
print &quot;Set-Cookie:Domain=www.w3cschool.cc;\r\n&quot;
print &quot;Set-Cookie:Path=/perl;\n&quot;
print &quot;Content-type:text/html\r\n\r\n&quot;
...........Rest of the HTML Content....</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以上实例使用了 Set-Cookie 头信息来设置Cookie信息，可选项中设置了Cookie的其他属性，如过期时间Expires，域名Domain，路径Path。这些信息设置在 &quot;Content-type:text/html\r\n\r\n&quot;之前。 </p> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/> <h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;"> 检索Cookie信息</h2><p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;"> Cookie信息检索页非常简单，Cookie信息存储在CGI的环境变量HTTP_COOKIE中，存储格式如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 0);">key1</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);">value1</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">key2</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);">value2</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">key3</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);">value3</span><span style="color:rgb(102, 102, 0);">....</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以下是一个简单的CGI检索cookie信息的程序：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># Import modules for CGI handling </span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">from</span><span style="color:rgb(0, 0, 0);"> os </span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> environ
</span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> cgitb

</span><span style="color:rgb(0, 0, 136);">if</span><span style="color:rgb(0, 0, 0);"> environ</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">has_key</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'HTTP_COOKIE'</span><span style="color:rgb(102, 102, 0);">):</span><span style="color:rgb(0, 0, 0);">
   </span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> cookie </span><span style="color:rgb(0, 0, 136);">in</span><span style="color:rgb(0, 0, 0);"> map</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">strip</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> split</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">environ</span><span style="color:rgb(102, 102, 0);">[</span><span style="color:rgb(0, 136, 0);">'HTTP_COOKIE'</span><span style="color:rgb(102, 102, 0);">],</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">';'</span><span style="color:rgb(102, 102, 0);">)):</span><span style="color:rgb(0, 0, 0);">
      </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">key</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> value </span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> split</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">cookie</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'='</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">
      </span><span style="color:rgb(0, 0, 136);">if</span><span style="color:rgb(0, 0, 0);"> key </span><span style="color:rgb(102, 102, 0);">==</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;UserID&quot;</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
         user_id </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> value

      </span><span style="color:rgb(0, 0, 136);">if</span><span style="color:rgb(0, 0, 0);"> key </span><span style="color:rgb(102, 102, 0);">==</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Password&quot;</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
         password </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> value

</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;User ID  = %s&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> user_id
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Password = %s&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> password</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">以上脚本输出结果如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(102, 0, 102);">User</span><span style="color:rgb(0, 0, 0);"> ID </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> XYZ
</span><span style="color:rgb(102, 0, 102);">Password</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> XYZ123</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">文件上传实例：</p> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">HTML设置上传文件的表单需要设置enctype 属性为multipart/form-data，代码如下所示：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 136);">&lt;html&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;body&gt;</span><span style="color:rgb(0, 0, 0);">
   </span><span style="color:rgb(0, 0, 136);">&lt;form</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">enctype</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;multipart/form-data&quot;</span><span style="color:rgb(0, 0, 0);"> 
                     </span><span style="color:rgb(102, 0, 102);">action</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;save_file.py&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">method</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;post&quot;</span><span style="color:rgb(0, 0, 136);">&gt;</span><span style="color:rgb(0, 0, 0);">
   </span><span style="color:rgb(0, 0, 136);">&lt;p&gt;</span><span style="color:rgb(0, 0, 0);">File: </span><span style="color:rgb(0, 0, 136);">&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;file&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">name</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;filename&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;&lt;/p&gt;</span><span style="color:rgb(0, 0, 0);">
   </span><span style="color:rgb(0, 0, 136);">&lt;p&gt;&lt;input</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">type</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;submit&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">value</span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 136, 0);">&quot;Upload&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">/&gt;&lt;/p&gt;</span><span style="color:rgb(0, 0, 0);">
   </span><span style="color:rgb(0, 0, 136);">&lt;/form&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;/body&gt;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">&lt;/html&gt;</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">save_file.py脚本文件代码如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> os
</span><span style="color:rgb(0, 0, 136);">import</span><span style="color:rgb(0, 0, 0);"> cgitb</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> cgitb</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">enable</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);">

form </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> cgi</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(102, 0, 102);">FieldStorage</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># 获取文件名</span><span style="color:rgb(0, 0, 0);">
fileitem </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> form</span><span style="color:rgb(102, 102, 0);">[</span><span style="color:rgb(0, 136, 0);">'filename'</span><span style="color:rgb(102, 102, 0);">]</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># 检测文件是否上传</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">if</span><span style="color:rgb(0, 0, 0);"> fileitem</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">filename</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
   </span><span style="color:rgb(136, 0, 0);"># 设置文件路径 </span><span style="color:rgb(0, 0, 0);">
   fn </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> os</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">path</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">basename</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">fileitem</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">filename</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">
   open</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">'/tmp/'</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> fn</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'wb'</span><span style="color:rgb(102, 102, 0);">).</span><span style="color:rgb(0, 0, 0);">write</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">fileitem</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">file</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">read</span><span style="color:rgb(102, 102, 0);">())</span><span style="color:rgb(0, 0, 0);">

   message </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'The file &quot;'</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> fn </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'&quot; was uploaded successfully'</span><span style="color:rgb(0, 0, 0);">
   
</span><span style="color:rgb(0, 0, 136);">else</span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);">
   message </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">'No file was uploaded'</span><span style="color:rgb(0, 0, 0);">
   
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;&quot;&quot;\
Content-Type: text/html\n
&lt;html&gt;
&lt;body&gt;
   &lt;p&gt;%s&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
&quot;&quot;&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">%</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">message</span><span style="color:rgb(102, 102, 0);">,)</span></pre> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">如果你使用的系统是Unix/Linux，你必须替换文件分隔符，在window下只需要使用open()语句即可：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(0, 0, 0);">fn </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> os</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">path</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">basename</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">fileitem</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">filename</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">replace</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">&quot;\\&quot;</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;/&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">))</span></pre> <hr style="color:rgb(212, 212, 212);height:1px;border:0px;clear:both;background-color:rgb(212, 212, 212);"/><h2 style="font-size:180%;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;margin-top:10px;margin-bottom:10px;font-weight:bold;color:rgb(0, 0, 0);background-color:transparent;">文件下载对话框</h2> <p style="line-height:140%;font-size:12px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;">如果我们需要为用户提供文件下载链接，并在用户点击链接后弹出文件下载对话框，我们通过设置HTTP头信息来实现这些功能，功能代码如下：</p> <pre style="font-family:'courier new';margin:15px auto;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:20px;font-style:normal;word-break:break-all;word-wrap:break-word;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(http://www.runoob.com/images/codecolorer_bg.gif) 50% 0% rgb(251, 251, 251);padding:10px 15px;"><span style="color:rgb(136, 0, 0);">#coding=utf-8</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">#!/usr/bin/python</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># HTTP Header</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Content-Type:application/octet-stream; name=\&quot;FileName\&quot;\r\n&quot;</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;Content-Disposition: attachment; filename=\&quot;FileName\&quot;\r\n\n&quot;</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">

</span><span style="color:rgb(136, 0, 0);"># Actual File Content will go hear.</span><span style="color:rgb(0, 0, 0);">
fo </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> open</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">&quot;foo.txt&quot;</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;rb&quot;</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">

str </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> fo</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">read</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(0, 0, 136);">print</span><span style="color:rgb(0, 0, 0);"> str

</span><span style="color:rgb(136, 0, 0);"># Close opend file</span><span style="color:rgb(0, 0, 0);">
fo</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">close</span><span style="color:rgb(102, 102, 0);">()</span></pre> </div></div></div></div></div></div></div><br/></span>
</div></body></html> 